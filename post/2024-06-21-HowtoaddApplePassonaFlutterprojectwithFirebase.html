<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법 | uidev-css</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://uidev-css.github.io///post/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법 | uidev-css" data-gatsby-head="true"/><meta property="og:title" content="Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법 | uidev-css" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://uidev-css.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://uidev-css.github.io///post/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase" data-gatsby-head="true"/><meta name="twitter:title" content="Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법 | uidev-css" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | uidev-css" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-21 22:23" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b75a4bf98ee956a8.js" defer=""></script><script src="/_next/static/N-oSpECxE_fvEUVh5yP3h/_buildManifest.js" defer=""></script><script src="/_next/static/N-oSpECxE_fvEUVh5yP3h/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UIDEV CSS</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UIDEV CSS</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 21, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>이 글에서는 Firebase 함수를 사용하여 Flutter 프로젝트에 Apple Pass를 통합하는 방법을 설명하겠습니다.</p>
<p>저는 백엔드 개발과 Apple Pass 디자인에 대한 전문가가 아니기 때문에 정보가 부족하거나 부정확할 수 있습니다. 더 자세한 내용은 문서를 참조해주세요.</p>
<h1>단계 1: 인증서 준비하기</h1>
<p>가장 먼저 할 일은 인증서를 준비하는 것입니다. 세 가지 요소를 다운로드해야 합니다:</p>
<ul>
<li>
<p>서명자 인증서 (개발자)</p>
</li>
<li>
<p>서명자 인증서 키 (개발자)</p>
</li>
<li>
<p>WWDR (애플 월드와이드 개발자 관계) G4 인증서</p>
</li>
<li>
<p>새로운 패스 유형 식별자(직접 링크)를 생성하고 설명 및 역도메인 식별자(“pass.”로 시작)를 제공하세요. pass.json 파일 또는 프로퍼티 값으로 이 식별자를 passTypeIdentifier에 넣어야 합니다.</p>
</li>
<li>
<p>Keychain Access를 열고 파일 <code>인증서 보조도구</code> <code>인증서 요청</code>으로 이동하여 양식을 작성한 후 “디스크에 저장” 옵션을 선택하고 계속하세요. 새 파일이 생성됩니다.</p>
</li>
<li>
<p>패스 유형 식별자 목록(필터링)에서 새 패스 ID를 클릭하여 편집합니다.</p>
</li>
<li>
<p>“인증서 생성”을 클릭하세요. 패스 인증서 이름을 입력하고 Keychain Access로 방금 생성된 파일을 업로드하세요. 그런 다음 인증서를 다운로드하고 두 번 클릭하여(Keychain Access에 추가하는) 열어주세요.</p>
</li>
<li>
<p>Keychain Access로 돌아가서 “패스 유형ID: xxxx”를 마우스 오른쪽 버튼으로 클릭하고 “패스 유형ID: xxxx”를 내보내세요. 마음에 드는 곳에 저장하고(.p12 확장자와 함께) 암호를 생성해야 합니다. 이것은 나중에 필요할 것입니다.</p>
</li>
<li>
<p>이 .p12 파일을 저장한 위치에서 터미널을 열고 다음 명령어를 입력하세요:</p>
</li>
</ul>
<pre><code class="hljs language-js"># -passin용 &#x3C;your-password>는 <span class="hljs-variable constant_">P12</span>의 비밀번호입니다.
$ openssl pkcs12 -<span class="hljs-keyword">in</span> &#x3C;cert-name>.<span class="hljs-property">p12</span> -clcerts -nokeys -out signerCert.<span class="hljs-property">pem</span> -passin <span class="hljs-attr">pass</span>:&#x3C;your-password>

# -passin용 &#x3C;your-password>는 <span class="hljs-variable constant_">P12</span>의 비밀번호입니다. &#x3C;secret-passphrase>는 passkit-generator에 전달할 privateKey를 복호화하는 데 사용할 암호입니다.
$ openssl pkcs12 -<span class="hljs-keyword">in</span> &#x3C;cert-name>.<span class="hljs-property">p12</span> -nocerts -out signerKey.<span class="hljs-property">pem</span> -passin <span class="hljs-attr">pass</span>:&#x3C;your-password> -passout <span class="hljs-attr">pass</span>:&#x3C;secret-passphrase>
</code></pre>
<p>에러가 발생하면 명령 끝에 "-legacy"를 추가하거나 이 링크를 따르세요.</p>
<p>암호구절을 저장해두세요. 나중에 필요할 겁니다.</p>
<p>필요한 3개 인증서 중 2개가 생성되었습니다.</p>
<p>마지막 인증서를 위해서는 이 링크를 열어보세요.</p>
<h1>단계 2: 서버 측 준비</h1>
<p>우리가 말했듯이, 우리는 Firebase 함수를 사용하여 우리의 패스 생성기를 호스팅할 것입니다.</p>
<p>주의: 이 작업을 위해 Blaze 요금제가 필요합니다 (무료가 아닌 "사용한 만큼 지불" 형태입니다). Firebase를 사용하지 않으려면 우리가 만들 백엔드를 원하는 곳에 호스팅하시면 됩니다.</p>
<p>우리의 패스를 생성하기 위해 passkit-generator를 사용할 것입니다.</p>
<p>시작해봅시다:</p>
<ul>
<li>터미널에서 Firebase CLI를 설치하세요.</li>
<li>새 Firebase 프로젝트 생성하기</li>
<li>"pass-generator-be"라는 폴더를 만들고 여기서 터미널을 열고 다음을 실행하세요.</li>
</ul>
<pre><code class="hljs language-js">flutter login
</code></pre>
<ul>
<li>명령어를 입력하세요.</li>
</ul>
<pre><code class="hljs language-js">firebase init
</code></pre>
<p>“Functions: Configure a Cloud Functions directory and its files”을 선택하고 방금 만든 프로젝트를 선택하세요. 그런 다음 "JavaScript"를 선택하고 "Y"로 모든 질문에 답하십시오. 단, "가능한 버그를 잡고 스타일을 강제하기 위해 ESLint를 사용하시겠습니까?"에서는 (배포할 때 Lint 예외가 발생하지 않도록 하기 위해) "N"을 선택하시면 됩니다. 이것이 괜찮다면 그대로 두셔도 됩니다.</p>
<ul>
<li>이제 코드 에디터와 함께 생성된 "functions" 폴더를 열어보세요.</li>
<li>프로젝트 내부의 터미널을 열고 아래 의존성을 설치하세요.</li>
</ul>
<pre><code class="hljs language-js">yarn add passkit-generator
yarn add path
yarn add file-system
</code></pre>
<ul>
<li>프로젝트 내부에 "certs" 폴더를 만들어서 우리가 생성한 3개의 인증서를 붙여넣으세요.</li>
<li>또한 "model" 폴더를 만들어서 패스 모델을 넣을 것입니다.</li>
</ul>
<p>간단한 패스 모델을 사용할 예정이며, 레이블과 이미지만 포함됩니다. 다른 모델에 관심이 있다면, 이 링크를 따라가서 사용자 정의 JSON 파일을 만들어보세요. 여기서 샘플을 찾을 수 있습니다.</p>
<ul>
<li>패스 폴더를 준비했다면 (예: "auditor.pass", JSON 파일과 이미지가 포함된), 이를 프로젝트 내부의 "model" 폴더에 복사하세요.</li>
</ul>
<p>프로젝트 구조는 다음과 같이 보일 것입니다:</p>
<p><img src="/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_1.png" alt="image"></p>
<p>My pass.json file is:</p>
<p>Warnings:</p>
<ul>
<li>passTypeIdentifier: has to be the same as the one we registered at the beginning</li>
<li>teamIdentifier: has to be your team identifier</li>
</ul>
<p>"index.js"로 이동해보세요:</p>
<ul>
<li>의존성 가져오기</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> functions = <span class="hljs-built_in">require</span>(<span class="hljs-string">"firebase-functions"</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">PKPass</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"passkit-generator"</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"file-system"</span>);
<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
</code></pre>
<p>PKPass를 사용하여 패스를 생성하세요</p>
<pre><code class="hljs language-js"><span class="hljs-title class_">PKPass</span>.<span class="hljs-title function_">from</span>({
        <span class="hljs-attr">model</span>: <span class="hljs-string">"./model/auditor.pass"</span>,
        <span class="hljs-attr">certificates</span>: {
            <span class="hljs-attr">wwdr</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./certs/wwdr.pem"</span>),
            <span class="hljs-attr">signerCert</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./certs/signerCert.pem"</span>),
            <span class="hljs-attr">signerKey</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./certs/signerKey.pem"</span>),
            <span class="hljs-attr">signerKeyPassphrase</span>: <span class="hljs-string">"YOUR PASSPHRASE"</span>
        }

    },{})
</code></pre>
<p>모두 함께</p>
<p>흐름은 매우 간단합니다:</p>
<ul>
<li>새 요청이 도착하면 패스가 생성됩니다</li>
<li>그런 다음 요청 내의 정보를 사용하여 패스를 채웁니다</li>
<li>패스가 클라이언트로 되돌아갑니다</li>
</ul>
<p>알림: 주석 처리된 “fs.writeFileSync(“auditor.pkpass”, bufferData)”는 개발 중에 생성된 .pkpass 파일을 프로젝트 폴더에 저장하는 데 유용합니다. 에뮬레이터에서 결과를 확인하기 쉽게 할 수 있습니다.</p>
<p>백엔드를 로컬에서 실행하려면 다음 명령어를 입력하세요.</p>
<pre><code class="hljs language-js">firebase <span class="hljs-attr">emulators</span>:start    
</code></pre>
<p>그러면 “<a href="http://127.0.0.1:5001/XXXX/us-central1/pass%E2%80%9D%EC%99%80" rel="nofollow" target="_blank">http://127.0.0.1:5001/XXXX/us-central1/pass”와</a> 같은 URL을 제공해줄 겁니다.</p>
<p>로컬 개발을 마치고 프로덕션 환경으로 이동하려면 다음 명령어를 사용하여 서버를 배포하세요.</p>
<pre><code class="hljs language-js">firebase deploy
</code></pre>
<h1>단계 3: 플러터 앱</h1>
<p>우리 앱에서 할 일이 매우 적습니다.</p>
<ul>
<li>먼저 flutter_wallet_card와 dio(또는 다른 http 클라이언트)를 가져와주세요.</li>
<li>제안된 이미지를 사용하여 "Apple Wallet에 추가" 기능을 제공해주세요.</li>
<li>onTap 동작을 처리하는 함수를 작성해주세요.</li>
</ul>
<p>그러고 나서 XCode로 iOS 모듈을 열고 Runner 아래에서 'Signing &#x26; Capabilities'를 클릭한 후 "+ Capability"를 클릭해주세요. 마지막으로 "특정 종류의 패스 허용"을 선택하고 처음에 생성한 패스를 선택해주세요.</p>
<p><img src="/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_2.png" alt="이미지"></p>
<p>그리고...... 이게 전부에요!</p>
<p>당신의 앱은 이제 "Apple Wallet에 추가" 기능을 구현하고 있습니다.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:600/1*CSrT10rYaB124vi-MuXDFw.gif" alt="이미지"></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Firebase로 Flutter 프로젝트에 애플 패스 추가하는 방법","description":"","date":"2024-06-21 22:23","slug":"2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase","content":"\n\n\u003cimg src=\"/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_0.png\" /\u003e\n\n이 글에서는 Firebase 함수를 사용하여 Flutter 프로젝트에 Apple Pass를 통합하는 방법을 설명하겠습니다.\n\n저는 백엔드 개발과 Apple Pass 디자인에 대한 전문가가 아니기 때문에 정보가 부족하거나 부정확할 수 있습니다. 더 자세한 내용은 문서를 참조해주세요.\n\n# 단계 1: 인증서 준비하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n가장 먼저 할 일은 인증서를 준비하는 것입니다. 세 가지 요소를 다운로드해야 합니다:\n\n- 서명자 인증서 (개발자)\n- 서명자 인증서 키 (개발자)\n- WWDR (애플 월드와이드 개발자 관계) G4 인증서\n\n- 새로운 패스 유형 식별자(직접 링크)를 생성하고 설명 및 역도메인 식별자(“pass.”로 시작)를 제공하세요. pass.json 파일 또는 프로퍼티 값으로 이 식별자를 passTypeIdentifier에 넣어야 합니다.\n- Keychain Access를 열고 파일 `인증서 보조도구` `인증서 요청`으로 이동하여 양식을 작성한 후 “디스크에 저장” 옵션을 선택하고 계속하세요. 새 파일이 생성됩니다.\n- 패스 유형 식별자 목록(필터링)에서 새 패스 ID를 클릭하여 편집합니다.\n- “인증서 생성”을 클릭하세요. 패스 인증서 이름을 입력하고 Keychain Access로 방금 생성된 파일을 업로드하세요. 그런 다음 인증서를 다운로드하고 두 번 클릭하여(Keychain Access에 추가하는) 열어주세요.\n- Keychain Access로 돌아가서 “패스 유형ID: xxxx”를 마우스 오른쪽 버튼으로 클릭하고 “패스 유형ID: xxxx”를 내보내세요. 마음에 드는 곳에 저장하고(.p12 확장자와 함께) 암호를 생성해야 합니다. 이것은 나중에 필요할 것입니다.\n- 이 .p12 파일을 저장한 위치에서 터미널을 열고 다음 명령어를 입력하세요:\n\n```js\n# -passin용 \u003cyour-password\u003e는 P12의 비밀번호입니다.\n$ openssl pkcs12 -in \u003ccert-name\u003e.p12 -clcerts -nokeys -out signerCert.pem -passin pass:\u003cyour-password\u003e\n\n# -passin용 \u003cyour-password\u003e는 P12의 비밀번호입니다. \u003csecret-passphrase\u003e는 passkit-generator에 전달할 privateKey를 복호화하는 데 사용할 암호입니다.\n$ openssl pkcs12 -in \u003ccert-name\u003e.p12 -nocerts -out signerKey.pem -passin pass:\u003cyour-password\u003e -passout pass:\u003csecret-passphrase\u003e\r\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n에러가 발생하면 명령 끝에 \"-legacy\"를 추가하거나 이 링크를 따르세요.\n\n암호구절을 저장해두세요. 나중에 필요할 겁니다.\n\n필요한 3개 인증서 중 2개가 생성되었습니다.\n\n마지막 인증서를 위해서는 이 링크를 열어보세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 단계 2: 서버 측 준비\n\n우리가 말했듯이, 우리는 Firebase 함수를 사용하여 우리의 패스 생성기를 호스팅할 것입니다.\n\n주의: 이 작업을 위해 Blaze 요금제가 필요합니다 (무료가 아닌 \"사용한 만큼 지불\" 형태입니다). Firebase를 사용하지 않으려면 우리가 만들 백엔드를 원하는 곳에 호스팅하시면 됩니다.\n\n우리의 패스를 생성하기 위해 passkit-generator를 사용할 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n시작해봅시다:\n\n- 터미널에서 Firebase CLI를 설치하세요.\n- 새 Firebase 프로젝트 생성하기\n- \"pass-generator-be\"라는 폴더를 만들고 여기서 터미널을 열고 다음을 실행하세요.\n\n```js\nflutter login\n```\n\n- 명령어를 입력하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nfirebase init\n```\n\n“Functions: Configure a Cloud Functions directory and its files”을 선택하고 방금 만든 프로젝트를 선택하세요. 그런 다음 \"JavaScript\"를 선택하고 \"Y\"로 모든 질문에 답하십시오. 단, \"가능한 버그를 잡고 스타일을 강제하기 위해 ESLint를 사용하시겠습니까?\"에서는 (배포할 때 Lint 예외가 발생하지 않도록 하기 위해) \"N\"을 선택하시면 됩니다. 이것이 괜찮다면 그대로 두셔도 됩니다.\n\n- 이제 코드 에디터와 함께 생성된 \"functions\" 폴더를 열어보세요.\n- 프로젝트 내부의 터미널을 열고 아래 의존성을 설치하세요.\n\n```js\nyarn add passkit-generator\nyarn add path\nyarn add file-system\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 프로젝트 내부에 \"certs\" 폴더를 만들어서 우리가 생성한 3개의 인증서를 붙여넣으세요.\n- 또한 \"model\" 폴더를 만들어서 패스 모델을 넣을 것입니다.\n\n간단한 패스 모델을 사용할 예정이며, 레이블과 이미지만 포함됩니다. 다른 모델에 관심이 있다면, 이 링크를 따라가서 사용자 정의 JSON 파일을 만들어보세요. 여기서 샘플을 찾을 수 있습니다.\n\n- 패스 폴더를 준비했다면 (예: \"auditor.pass\", JSON 파일과 이미지가 포함된), 이를 프로젝트 내부의 \"model\" 폴더에 복사하세요.\n\n프로젝트 구조는 다음과 같이 보일 것입니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![image](/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_1.png)\n\nMy pass.json file is:\n\nWarnings:\n\n- passTypeIdentifier: has to be the same as the one we registered at the beginning\n- teamIdentifier: has to be your team identifier\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\"index.js\"로 이동해보세요:\n\n- 의존성 가져오기\n\n```js\nconst functions = require(\"firebase-functions\");\nconst { PKPass } = require(\"passkit-generator\");\nvar fs = require(\"file-system\");\nvar path = require(\"path\");\n```\n\nPKPass를 사용하여 패스를 생성하세요\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nPKPass.from({\n        model: \"./model/auditor.pass\",\n        certificates: {\n            wwdr: fs.readFileSync(\"./certs/wwdr.pem\"),\n            signerCert: fs.readFileSync(\"./certs/signerCert.pem\"),\n            signerKey: fs.readFileSync(\"./certs/signerKey.pem\"),\n            signerKeyPassphrase: \"YOUR PASSPHRASE\"\n        }\n\n    },{})\n```\n\n모두 함께\n\n흐름은 매우 간단합니다:\n\n- 새 요청이 도착하면 패스가 생성됩니다\n- 그런 다음 요청 내의 정보를 사용하여 패스를 채웁니다\n- 패스가 클라이언트로 되돌아갑니다\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n알림: 주석 처리된 “fs.writeFileSync(“auditor.pkpass”, bufferData)”는 개발 중에 생성된 .pkpass 파일을 프로젝트 폴더에 저장하는 데 유용합니다. 에뮬레이터에서 결과를 확인하기 쉽게 할 수 있습니다.\n\n백엔드를 로컬에서 실행하려면 다음 명령어를 입력하세요.\n\n```js\nfirebase emulators:start    \n```\n\n그러면 “http://127.0.0.1:5001/XXXX/us-central1/pass”와 같은 URL을 제공해줄 겁니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n로컬 개발을 마치고 프로덕션 환경으로 이동하려면 다음 명령어를 사용하여 서버를 배포하세요.\n\n```js\nfirebase deploy\n```\n\n# 단계 3: 플러터 앱\n\n우리 앱에서 할 일이 매우 적습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 먼저 flutter_wallet_card와 dio(또는 다른 http 클라이언트)를 가져와주세요.\n- 제안된 이미지를 사용하여 \"Apple Wallet에 추가\" 기능을 제공해주세요.\n- onTap 동작을 처리하는 함수를 작성해주세요.\n\n그러고 나서 XCode로 iOS 모듈을 열고 Runner 아래에서 'Signing \u0026 Capabilities'를 클릭한 후 \"+ Capability\"를 클릭해주세요. 마지막으로 \"특정 종류의 패스 허용\"을 선택하고 처음에 생성한 패스를 선택해주세요.\n\n![이미지](/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_2.png)\n\n그리고...... 이게 전부에요!\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n당신의 앱은 이제 \"Apple Wallet에 추가\" 기능을 구현하고 있습니다.\n\n![이미지](https://miro.medium.com/v2/resize:fit:600/1*CSrT10rYaB124vi-MuXDFw.gif)","ogImage":{"url":"/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_0.png"},"coverImage":"/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e이 글에서는 Firebase 함수를 사용하여 Flutter 프로젝트에 Apple Pass를 통합하는 방법을 설명하겠습니다.\u003c/p\u003e\n\u003cp\u003e저는 백엔드 개발과 Apple Pass 디자인에 대한 전문가가 아니기 때문에 정보가 부족하거나 부정확할 수 있습니다. 더 자세한 내용은 문서를 참조해주세요.\u003c/p\u003e\n\u003ch1\u003e단계 1: 인증서 준비하기\u003c/h1\u003e\n\u003cp\u003e가장 먼저 할 일은 인증서를 준비하는 것입니다. 세 가지 요소를 다운로드해야 합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e서명자 인증서 (개발자)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e서명자 인증서 키 (개발자)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWWDR (애플 월드와이드 개발자 관계) G4 인증서\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e새로운 패스 유형 식별자(직접 링크)를 생성하고 설명 및 역도메인 식별자(“pass.”로 시작)를 제공하세요. pass.json 파일 또는 프로퍼티 값으로 이 식별자를 passTypeIdentifier에 넣어야 합니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eKeychain Access를 열고 파일 \u003ccode\u003e인증서 보조도구\u003c/code\u003e \u003ccode\u003e인증서 요청\u003c/code\u003e으로 이동하여 양식을 작성한 후 “디스크에 저장” 옵션을 선택하고 계속하세요. 새 파일이 생성됩니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e패스 유형 식별자 목록(필터링)에서 새 패스 ID를 클릭하여 편집합니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e“인증서 생성”을 클릭하세요. 패스 인증서 이름을 입력하고 Keychain Access로 방금 생성된 파일을 업로드하세요. 그런 다음 인증서를 다운로드하고 두 번 클릭하여(Keychain Access에 추가하는) 열어주세요.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eKeychain Access로 돌아가서 “패스 유형ID: xxxx”를 마우스 오른쪽 버튼으로 클릭하고 “패스 유형ID: xxxx”를 내보내세요. 마음에 드는 곳에 저장하고(.p12 확장자와 함께) 암호를 생성해야 합니다. 이것은 나중에 필요할 것입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e이 .p12 파일을 저장한 위치에서 터미널을 열고 다음 명령어를 입력하세요:\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# -passin용 \u0026#x3C;your-password\u003e는 \u003cspan class=\"hljs-variable constant_\"\u003eP12\u003c/span\u003e의 비밀번호입니다.\n$ openssl pkcs12 -\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;cert-name\u003e.\u003cspan class=\"hljs-property\"\u003ep12\u003c/span\u003e -clcerts -nokeys -out signerCert.\u003cspan class=\"hljs-property\"\u003epem\u003c/span\u003e -passin \u003cspan class=\"hljs-attr\"\u003epass\u003c/span\u003e:\u0026#x3C;your-password\u003e\n\n# -passin용 \u0026#x3C;your-password\u003e는 \u003cspan class=\"hljs-variable constant_\"\u003eP12\u003c/span\u003e의 비밀번호입니다. \u0026#x3C;secret-passphrase\u003e는 passkit-generator에 전달할 privateKey를 복호화하는 데 사용할 암호입니다.\n$ openssl pkcs12 -\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;cert-name\u003e.\u003cspan class=\"hljs-property\"\u003ep12\u003c/span\u003e -nocerts -out signerKey.\u003cspan class=\"hljs-property\"\u003epem\u003c/span\u003e -passin \u003cspan class=\"hljs-attr\"\u003epass\u003c/span\u003e:\u0026#x3C;your-password\u003e -passout \u003cspan class=\"hljs-attr\"\u003epass\u003c/span\u003e:\u0026#x3C;secret-passphrase\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e에러가 발생하면 명령 끝에 \"-legacy\"를 추가하거나 이 링크를 따르세요.\u003c/p\u003e\n\u003cp\u003e암호구절을 저장해두세요. 나중에 필요할 겁니다.\u003c/p\u003e\n\u003cp\u003e필요한 3개 인증서 중 2개가 생성되었습니다.\u003c/p\u003e\n\u003cp\u003e마지막 인증서를 위해서는 이 링크를 열어보세요.\u003c/p\u003e\n\u003ch1\u003e단계 2: 서버 측 준비\u003c/h1\u003e\n\u003cp\u003e우리가 말했듯이, 우리는 Firebase 함수를 사용하여 우리의 패스 생성기를 호스팅할 것입니다.\u003c/p\u003e\n\u003cp\u003e주의: 이 작업을 위해 Blaze 요금제가 필요합니다 (무료가 아닌 \"사용한 만큼 지불\" 형태입니다). Firebase를 사용하지 않으려면 우리가 만들 백엔드를 원하는 곳에 호스팅하시면 됩니다.\u003c/p\u003e\n\u003cp\u003e우리의 패스를 생성하기 위해 passkit-generator를 사용할 것입니다.\u003c/p\u003e\n\u003cp\u003e시작해봅시다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e터미널에서 Firebase CLI를 설치하세요.\u003c/li\u003e\n\u003cli\u003e새 Firebase 프로젝트 생성하기\u003c/li\u003e\n\u003cli\u003e\"pass-generator-be\"라는 폴더를 만들고 여기서 터미널을 열고 다음을 실행하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eflutter login\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e명령어를 입력하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003efirebase init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e“Functions: Configure a Cloud Functions directory and its files”을 선택하고 방금 만든 프로젝트를 선택하세요. 그런 다음 \"JavaScript\"를 선택하고 \"Y\"로 모든 질문에 답하십시오. 단, \"가능한 버그를 잡고 스타일을 강제하기 위해 ESLint를 사용하시겠습니까?\"에서는 (배포할 때 Lint 예외가 발생하지 않도록 하기 위해) \"N\"을 선택하시면 됩니다. 이것이 괜찮다면 그대로 두셔도 됩니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e이제 코드 에디터와 함께 생성된 \"functions\" 폴더를 열어보세요.\u003c/li\u003e\n\u003cli\u003e프로젝트 내부의 터미널을 열고 아래 의존성을 설치하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn add passkit-generator\nyarn add path\nyarn add file-system\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e프로젝트 내부에 \"certs\" 폴더를 만들어서 우리가 생성한 3개의 인증서를 붙여넣으세요.\u003c/li\u003e\n\u003cli\u003e또한 \"model\" 폴더를 만들어서 패스 모델을 넣을 것입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e간단한 패스 모델을 사용할 예정이며, 레이블과 이미지만 포함됩니다. 다른 모델에 관심이 있다면, 이 링크를 따라가서 사용자 정의 JSON 파일을 만들어보세요. 여기서 샘플을 찾을 수 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e패스 폴더를 준비했다면 (예: \"auditor.pass\", JSON 파일과 이미지가 포함된), 이를 프로젝트 내부의 \"model\" 폴더에 복사하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e프로젝트 구조는 다음과 같이 보일 것입니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_1.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eMy pass.json file is:\u003c/p\u003e\n\u003cp\u003eWarnings:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epassTypeIdentifier: has to be the same as the one we registered at the beginning\u003c/li\u003e\n\u003cli\u003eteamIdentifier: has to be your team identifier\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\"index.js\"로 이동해보세요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e의존성 가져오기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e functions = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"firebase-functions\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003ePKPass\u003c/span\u003e } = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"passkit-generator\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e fs = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"file-system\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e path = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"path\"\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePKPass를 사용하여 패스를 생성하세요\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003ePKPass\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efrom\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003emodel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"./model/auditor.pass\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecertificates\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003ewwdr\u003c/span\u003e: fs.\u003cspan class=\"hljs-title function_\"\u003ereadFileSync\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"./certs/wwdr.pem\"\u003c/span\u003e),\n            \u003cspan class=\"hljs-attr\"\u003esignerCert\u003c/span\u003e: fs.\u003cspan class=\"hljs-title function_\"\u003ereadFileSync\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"./certs/signerCert.pem\"\u003c/span\u003e),\n            \u003cspan class=\"hljs-attr\"\u003esignerKey\u003c/span\u003e: fs.\u003cspan class=\"hljs-title function_\"\u003ereadFileSync\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"./certs/signerKey.pem\"\u003c/span\u003e),\n            \u003cspan class=\"hljs-attr\"\u003esignerKeyPassphrase\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"YOUR PASSPHRASE\"\u003c/span\u003e\n        }\n\n    },{})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e모두 함께\u003c/p\u003e\n\u003cp\u003e흐름은 매우 간단합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e새 요청이 도착하면 패스가 생성됩니다\u003c/li\u003e\n\u003cli\u003e그런 다음 요청 내의 정보를 사용하여 패스를 채웁니다\u003c/li\u003e\n\u003cli\u003e패스가 클라이언트로 되돌아갑니다\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e알림: 주석 처리된 “fs.writeFileSync(“auditor.pkpass”, bufferData)”는 개발 중에 생성된 .pkpass 파일을 프로젝트 폴더에 저장하는 데 유용합니다. 에뮬레이터에서 결과를 확인하기 쉽게 할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e백엔드를 로컬에서 실행하려면 다음 명령어를 입력하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003efirebase \u003cspan class=\"hljs-attr\"\u003eemulators\u003c/span\u003e:start    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그러면 “\u003ca href=\"http://127.0.0.1:5001/XXXX/us-central1/pass%E2%80%9D%EC%99%80\" rel=\"nofollow\" target=\"_blank\"\u003ehttp://127.0.0.1:5001/XXXX/us-central1/pass”와\u003c/a\u003e 같은 URL을 제공해줄 겁니다.\u003c/p\u003e\n\u003cp\u003e로컬 개발을 마치고 프로덕션 환경으로 이동하려면 다음 명령어를 사용하여 서버를 배포하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003efirebase deploy\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 3: 플러터 앱\u003c/h1\u003e\n\u003cp\u003e우리 앱에서 할 일이 매우 적습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e먼저 flutter_wallet_card와 dio(또는 다른 http 클라이언트)를 가져와주세요.\u003c/li\u003e\n\u003cli\u003e제안된 이미지를 사용하여 \"Apple Wallet에 추가\" 기능을 제공해주세요.\u003c/li\u003e\n\u003cli\u003eonTap 동작을 처리하는 함수를 작성해주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e그러고 나서 XCode로 iOS 모듈을 열고 Runner 아래에서 'Signing \u0026#x26; Capabilities'를 클릭한 후 \"+ Capability\"를 클릭해주세요. 마지막으로 \"특정 종류의 패스 허용\"을 선택하고 처음에 생성한 패스를 선택해주세요.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase_2.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e그리고...... 이게 전부에요!\u003c/p\u003e\n\u003cp\u003e당신의 앱은 이제 \"Apple Wallet에 추가\" 기능을 구현하고 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:600/1*CSrT10rYaB124vi-MuXDFw.gif\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-21-HowtoaddApplePassonaFlutterprojectwithFirebase"},"buildId":"N-oSpECxE_fvEUVh5yP3h","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>