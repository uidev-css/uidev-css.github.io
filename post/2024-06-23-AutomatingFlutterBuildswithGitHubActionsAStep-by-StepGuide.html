<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>GitHub Actions로 Flutter 빌드 자동화 단계별 가이드 | uidev-css</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://uidev-css.github.io///post/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="GitHub Actions로 Flutter 빌드 자동화 단계별 가이드 | uidev-css" data-gatsby-head="true"/><meta property="og:title" content="GitHub Actions로 Flutter 빌드 자동화 단계별 가이드 | uidev-css" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://uidev-css.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://uidev-css.github.io///post/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide" data-gatsby-head="true"/><meta name="twitter:title" content="GitHub Actions로 Flutter 빌드 자동화 단계별 가이드 | uidev-css" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | uidev-css" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 14:45" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b4eed7811784bdd3.js" defer=""></script><script src="/_next/static/5et5eMZxpKCgDAAyIS6Ju/_buildManifest.js" defer=""></script><script src="/_next/static/5et5eMZxpKCgDAAyIS6Ju/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UIDEV CSS</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">GitHub Actions로 Flutter 빌드 자동화 단계별 가이드</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="GitHub Actions로 Flutter 빌드 자동화 단계별 가이드" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UIDEV CSS</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">12<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png" alt="이미지"></p>
<p>안녕하세요! 이 기사에서는 GitHub Actions를 활용하여 Flutter 앱의 빌드 및 릴리스 프로세스를 자동화하는 방법을 알아볼 거에요. 이 방법을 통해 연속적인 통합/배포(CI/CD) 파이프라인을 유지할 수 있어 개발에 집중할 수 있게 해주죠. GitHub Actions가 빌드와 애플리케이션 릴리스를 처리하는 동안 무거운 작업을 자동으로 처리해줍니다.</p>
<h1>소개</h1>
<p>자동화는 현대 소프트웨어 개발의 중요한 구성 요소로, 개발자가 반복 작업을 간소화하고 인적 오류를 줄일 수 있게 해줍니다. Flutter 개발자들에게는 빌드 및 릴리스 프로세스를 자동화하면 생산성을 크게 향상시키고 일관된 배포를 보장할 수 있습니다. GitHub Actions는 GitHub 저장소에서 직접 워크플로를 자동화할 수 있는 강력한 플랫폼을 제공합니다. 이 기사에서는 Android 및 iOS 플랫폼용 Flutter 앱의 빌드 및 릴리스를 처리하며 버전 관리 및 keystore 관리까지 다루는 GitHub Actions 워크플로를 생성해볼 거에요.</p>
<div class="content-ad"></div>
<h1>워크플로우 설정하기</h1>
<p>이전에 언급했듯이 Github Actions와 함께 작업할 것이므로, 먼저 프로젝트를 위한 Github Repo를 생성해야 합니다. 프로젝트의 이름을 flutterGitHubAction으로 지정합시다.</p>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_1.png" alt="이미지 1"></p>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_2.png" alt="이미지 2"></p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">$ git init
$ git add .
$ git commit -m <span class="hljs-string">"init app"</span>
$ git remote add origin <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/colonal/flutterGitHubAction.git</span>
$ git push -u origin master
</code></pre>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_3.png" alt="image"></p>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_4.png" alt="image"></p>
<p>이제 사랑하는 VSCode로 돌아가서 작업을 시작해봅시다.</p>
<div class="content-ad"></div>
<ul>
<li>프로젝트의 루트 폴더에 " .github "라는 새 디렉토리를 만듭니다.</li>
<li>새로 만든 디렉토리 아래에 또 다른 새 디렉토리를 만들고 " workflows "라고 이름 짓습니다.</li>
<li>마지막으로 workflows 디렉토리 안에 " main.yml "이라는 새 파일을 만듭니다.</li>
</ul>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_5.png" alt="이미지"></p>
<ul>
<li>이제 필요한 workflow를 작성해 봅시다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-attr">name</span>: <span class="hljs-string">"Build &#x26; Release"</span>   # 필요에 맞게 이름을 지정하세요
</code></pre>
<div class="content-ad"></div>
<ul>
<li>이것은 GitHub Actions에서 실행하려는 workflow의 이름입니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-attr">on</span>:
  <span class="hljs-attr">pull_request</span>:
    <span class="hljs-attr">branches</span>:
      - dev
      - test
  <span class="hljs-attr">push</span>:
    <span class="hljs-attr">branches</span>:
      - dev
      - test 
</code></pre>
<ul>
<li>이 작업을 트리거하고 싶은 경우들이며, 여기에서는 2가지 경우 [pull_request 및 push]에 대해 설정했으며, 청취하고 트리거할 브랜치를 지정했습니다. 여기에서는 [dev, test] 브랜치로 설정했습니다.</li>
<li>이것은 즉, 우리의 작업이 dev 또는 test 브랜치로 뭔가를 푸시하거나 dev 또는 test 브랜치에서 PR을 할 때마다 트리거될 것을 의미합니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-attr">jobs</span>:  # 어떤 작업이 필요한지 알려주는 부분
  <span class="hljs-attr">build</span>:      # 작성될 이름과 머신을 지정
    <span class="hljs-attr">name</span>: <span class="hljs-title class_">Build</span> &#x26; <span class="hljs-title class_">Release</span>  # 빌드 이름을 원하시는 대로 지정할 수 있습니다
    runs-<span class="hljs-attr">on</span>: macos-latest # 여기에서 우리는 ios 빌드를 얻기 위해 macos-latest를 선택했습니다
</code></pre>
<div class="content-ad"></div>
<p>이제 우리가 거쳐가길 원하는 단계를 구체적으로 지정해야 해요(위에 보여진 대로):</p>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_6.png" alt="Step Image"></p>
<h1>1. 저장소 체크아웃</h1>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">Repository</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
</code></pre>
<div class="content-ad"></div>
<p>설명: 여기서는 checkout이라는 미리 만들어 둔 작업을 사용하여 저장소 코드를 체크아웃하여 워크플로가 액세스할 수 있게 합니다. 이 작업과 많은 다른 작업은 GitHub Actions marketplace에서 찾을 수 있습니다. 각 작업에 이름을 지정하는 것은 필수는 아니지만 명확성을 위해 유용합니다.</p>
<h2>2. Java 설정</h2>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Set</span> <span class="hljs-string">Up</span> <span class="hljs-string">Java</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-java@v3.12.0</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">distribution:</span> <span class="hljs-string">'oracle'</span>
    <span class="hljs-attr">java-version:</span> <span class="hljs-string">'17'</span>
</code></pre>
<p>설명: 이 단계는 setup-java 작업을 사용하여 필요한 Java 환경을 설정합니다. 'Oracle'를 배포로, '17'을 Java 버전으로 지정합니다. 이는 Android 앱을 빌드하는 데 필요합니다. 모든 사용 가능한 배포본을 여기에서 찾을 수 있습니다.</p>
<div class="content-ad"></div>
<h1>3. 플러터 설정하기</h1>
<pre><code class="hljs language-js">- <span class="hljs-attr">name</span>: 플러터 설정
  <span class="hljs-attr">uses</span>: subosito/flutter-action@v2
  <span class="hljs-attr">with</span>:
    flutter-<span class="hljs-attr">version</span>: <span class="hljs-string">'3.22.2'</span>
    <span class="hljs-attr">channel</span>: <span class="hljs-string">'stable'</span>
</code></pre>
<p>설명: 이 단계에서는 subosito/flutter-action을 사용하여 지정된 버전과 채널로 플러터 환경을 설정합니다. 이렇게 하면 빌드 프로세스 중에 올바른 버전의 플러터를 사용할 수 있습니다.</p>
<h1>4. 종속성 설치하기</h1>
<div class="content-ad"></div>
<ul>
<li>name: 의존성 설치
run: flutter pub get</li>
</ul>
<p>설명: 이 단계는 플러터 프로젝트에 필요한 종속성을 설치하기 위해 flutter pub get을 실행합니다. 이것은 로컬에서 명령을 실행하는 것과 동일하며, pubspec.yaml 파일에서 지정된 모든 종속성을 해결하는 데 중요합니다.</p>
<h1>5. 키스토어 설정</h1>
<p>Android 앱에 서명하려면 키스토어 파일 및 관련 속성을 안전하게 처리해야 합니다. 저장소에 직접 keystore.jks 파일을 추가하는 대신 (보안에 취약합니다), 해당 파일을 base64 문자열로 변환하여 GitHub 저장소에서 비밀로 저장합니다. 또한 필요한 다른 키스토어 속성을 비밀로 저장합니다. 아래는 자세한 단계입니다:</p>
<div class="content-ad"></div>
<h2>단계별 안내:</h2>
<ul>
<li>키스토어 파일을 Base64로 변환하세요. 다음 명령을 사용하여 keystore.jks 파일을 base64 문자열로 변환하세요:</li>
</ul>
<pre><code class="hljs language-js">base64 -w <span class="hljs-number">0</span> keystore.<span class="hljs-property">jks</span> > keystore.<span class="hljs-property">jks</span>.<span class="hljs-property">base64</span>
</code></pre>
<ul>
<li>keystore.jks.base64 파일의 내용을 복사하세요.</li>
<li>GitHub 리포지토리에 시크릿 추가하기. 리포지토리 설정으로 이동하여 "Actions"에서 "Secrets and variables"로 이동한 후 다음 시크릿을 추가하세요:</li>
</ul>
<div class="content-ad"></div>
<ul>
<li>KEYSTORE_BASE64: keystore.jks.base64의 내용입니다.</li>
<li>KEYSTORE_PASSWORD: 키스토어의 비밀번호입니다.</li>
<li>KEY_ALIAS: 키에 대한 별칭입니다.</li>
<li>KEY_PASSWORD: 키 별칭의 비밀번호입니다.</li>
</ul>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_7.png" alt="image"></p>
<h2>GitHub Actions Workflow 단계:</h2>
<ul>
<li>Keystore 디코딩</li>
</ul>
<div class="content-ad"></div>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">키스토어</span> <span class="hljs-string">디코드</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    echo "${ secrets.KEYSTORE_BASE64 }" | base64 --decode > android/app/keystore.jks
</span></code></pre>
<p>설명: 이 단계는 GitHub 저장소에 저장된 시크릿을 사용하여 base64로 인코딩된 키스토어를 디코딩합니다. 디코딩된 키스토어는 android/app/keystore.jks에 저장됩니다. Android 앱을 서명하는 데 필요합니다.</p>
<ol start="2">
<li>key.properties 파일 생성하기</li>
</ol>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">key.properties</span> <span class="hljs-string">파일</span> <span class="hljs-string">생성</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    echo "storePassword=${ secrets.KEYSTORE_PASSWORD }" > android/key.properties
    echo "keyPassword=${ secrets.KEY_PASSWORD }" >> android/key.properties
    echo "keyAlias=${ secrets.KEY_ALIAS }" >> android/key.properties
    echo "storeFile=keystore.jks" >> android/key.properties
</span></code></pre>
<div class="content-ad"></div>
<p>설명: 이 단계에서는 애플리케이션을 서명하는 데 필요한 속성을 갖는 key.properties 파일이 생성됩니다. 이러한 속성은 GitHub 저장소에 저장된 비밀 정보를 사용하여 채워집니다.</p>
<h1>6. APK 빌드</h1>
<pre><code class="hljs language-js">- <span class="hljs-attr">name</span>: <span class="hljs-variable constant_">APK</span> 빌드
  <span class="hljs-attr">run</span>: flutter build apk --release
</code></pre>
<p>설명: 이 단계에서는 flutter build apk --release 명령어를 사용하여 Flutter 애플리케이션의 APK를 릴리스 모드로 빌드합니다.</p>
<div class="content-ad"></div>
<h1>7. 앱 번들 빌드</h1>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">앱</span> <span class="hljs-string">번들</span> <span class="hljs-string">빌드</span> <span class="hljs-string">실행</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">flutter</span> <span class="hljs-string">build</span> <span class="hljs-string">appbundle</span>
</code></pre>
<p>설명: 이 단계는 flutter build appbundle 명령어를 사용하여 Flutter 애플리케이션의 Android 앱 번들(AAB)을 빌드합니다.</p>
<h1>8. IPA 빌드(iOS 빌드)</h1>
<div class="content-ad"></div>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-string">이름:</span> <span class="hljs-string">IPA</span> <span class="hljs-string">빌드</span>
  <span class="hljs-string">실행:</span> <span class="hljs-string">flutter</span> <span class="hljs-string">build</span> <span class="hljs-string">ipa</span> <span class="hljs-string">--no-codesign</span>
</code></pre>
<p>설명: 이 단계는 flutter build ipa --no-codesign 명령을 사용하여 코드 서명 없이 iOS 애플리케이션을 위한 IPA 파일을 빌드합니다. --no-codesign 플래그를 사용하면 로컬 개발을 위해 유효한 Apple 개발자 계정이 필요하지 않고 IPA를 빌드할 수 있습니다.</p>
<h1>9. 아카이브와 IPA 압축</h1>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-string">이름:</span> <span class="hljs-string">아카이브</span> <span class="hljs-string">및</span> <span class="hljs-string">IPA</span> <span class="hljs-string">압축</span>
  <span class="hljs-string">실행:</span> <span class="hljs-string">|
    cd build
    tar -czf ios_build.tar.gz ios
</span></code></pre>
<div class="content-ad"></div>
<h1>10. 아티팩트 업로드</h1>
<pre><code class="hljs language-js">- <span class="hljs-attr">name</span>: 아티팩트 업로드
  <span class="hljs-attr">uses</span>: actions/upload-artifact@v2
  <span class="hljs-attr">with</span>:
    <span class="hljs-attr">name</span>: 릴리즈
    <span class="hljs-attr">path</span>: |
      build/app/outputs/flutter-apk/app-release.<span class="hljs-property">apk</span>
      build/app/outputs/bundle/release/app-release.<span class="hljs-property">aab</span>
      build/ios_build.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>
</code></pre>
<p>설명: 이 단계는 iOS 빌드 디렉토리를 tar.gz 파일로 압축하여 저장 및 전송을 쉽게합니다. 이 단계는 upload-artifact 작업을 사용하여 빌드 아티팩트 (APK, AAB 및 압축된 iOS 빌드)를 업로드하여 나중에 다운로드할 수 있게 합니다. 이를 통해 빌드 출력물을 GitHub Actions 실행 페이지에서 액세스할 수 있습니다.</p>
<div class="content-ad"></div>
<h1>11. 버전 추출</h1>
<pre><code class="hljs language-js">- <span class="hljs-attr">name</span>: pubspec.<span class="hljs-property">yaml</span>에서 버전 추출
  <span class="hljs-attr">id</span>: extract_version
  <span class="hljs-attr">run</span>: |
    version=$(grep <span class="hljs-string">'^version: '</span> pubspec.<span class="hljs-property">yaml</span> | cut -d <span class="hljs-string">' '</span> -f <span class="hljs-number">2</span> | tr -d <span class="hljs-string">'\r'</span>)
    echo <span class="hljs-string">"VERSION=$version"</span> >> $GITHUB_ENV
</code></pre>
<p>설명: 이 단계는 pubspec.yaml 파일에서 버전 번호를 추출하고 환경 변수로 설정합니다. grep 명령은 버전 라인을 검색하여 버전 번호를 추출하고 이를 VERSION 환경 변수에 저장합니다.</p>
<h1>12. 태그의 존재 여부 확인</h1>
<div class="content-ad"></div>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">태그</span> <span class="hljs-string">여부</span> <span class="hljs-string">확인</span>
  <span class="hljs-attr">id:</span> <span class="hljs-string">check_tag</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    if git rev-parse "v${ env.VERSION }" >/dev/null 2>&#x26;1; then
      echo "TAG_EXISTS=true" >> $GITHUB_ENV
    else
      echo "TAG_EXISTS=false" >> $GITHUB_ENV
    fi
</span></code></pre>
<p>설명: 이 단계는 저장소에 버전 태그가 이미 존재하는지 확인합니다. 태그가 있으면 TAG_EXISTS 환경 변수를 true로 설정하고, 그렇지 않으면 false로 설정합니다.</p>
<h1>13. 태그 수정하기 (태그가 존재하는 경우)</h1>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">태그</span> <span class="hljs-string">수정</span>
  <span class="hljs-attr">if:</span> <span class="hljs-string">env.TAG_EXISTS</span> <span class="hljs-string">==</span> <span class="hljs-string">'true'</span>
  <span class="hljs-attr">id:</span> <span class="hljs-string">modify_tag</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    new_version="${ env.VERSION }-build-${ github.run_number }"
    echo "VERSION=$new_version" >> $GITHUB_ENV
</span></code></pre>
<div class="content-ad"></div>
<p>설명: 이 단계에서는 이미 있는 태그인 경우, 버전 태그를 수정하여 버전 번호에 -build-<code>run_number</code>를 추가하여 고유 식별자가 포함되도록 합니다. 이렇게 하면 태그가 고유하게 유지되고 충돌을 피할 수 있습니다.</p>
<h1>14. 릴리스 생성</h1>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">릴리스</span> <span class="hljs-string">생성</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">ncipollo/release-action@v1</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">artifacts:</span> <span class="hljs-string">"build/app/outputs/flutter-apk/app-release.apk,build/app/outputs/bundle/release/app-release.aab,build/ios_build.tar.gz"</span>
    <span class="hljs-attr">tag:</span> <span class="hljs-string">v${</span> <span class="hljs-string">env.VERSION</span> <span class="hljs-string">}</span>
    <span class="hljs-attr">token:</span> <span class="hljs-string">${</span> <span class="hljs-string">secrets.TOKEN</span> <span class="hljs-string">}</span>
</code></pre>
<p>설명: 이 단계에서는 ncipollo/release-action을 사용하여 지정된 아티팩트로 GitHub 릴리스를 생성합니다. (필요한 경우 수정된) 버전을 태그로 사용하고 GitHub 시크릿에 저장된 토큰을 인증에 사용합니다.</p>
<div class="content-ad"></div>
<h1>마법을 볼 준비가 되셨나요?</h1>
<pre><code class="hljs language-js">$ get add .
$ git commit -m <span class="hljs-string">"test github actions"</span> 
$ git push -u origin dev
</code></pre>
<ul>
<li>변경 사항을 dev 브랜치에 푸시하고 작동하는지 확인해 보세요.</li>
<li>레포지토리의 Actions 탭으로 이동해서 확인해 보세요.</li>
</ul>
<p><img src="/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_8.png" alt="이미지"></p>
<div class="content-ad"></div>
<h1>완성된 Workflow 코드</h1>
<p>중요한 메모: 들여쓰기가 중요하니 주의하세요</p>
<pre><code class="hljs language-js"><span class="hljs-attr">name</span>: <span class="hljs-string">"Build"</span>

<span class="hljs-attr">on</span>:
  <span class="hljs-attr">pull_request</span>:
    <span class="hljs-attr">branches</span>:
      - dev
      - test
  <span class="hljs-attr">push</span>:
    <span class="hljs-attr">branches</span>:
      - dev
      - test

<span class="hljs-attr">jobs</span>:  
  <span class="hljs-attr">build</span>:      
    <span class="hljs-attr">name</span>: <span class="hljs-title class_">Build</span> &#x26; <span class="hljs-title class_">Release</span> 
    runs-<span class="hljs-attr">on</span>: macos-latest 

    <span class="hljs-attr">steps</span>:
        #<span class="hljs-number">1</span> 저장소 체크아웃
      - <span class="hljs-attr">name</span>: 저장소 체크아웃
        <span class="hljs-attr">uses</span>: actions/checkout@v3

        #<span class="hljs-number">2</span> <span class="hljs-title class_">Java</span> 설정
      - <span class="hljs-attr">name</span>: <span class="hljs-title class_">Java</span> 설정
        <span class="hljs-attr">uses</span>: actions/setup-java@v3<span class="hljs-number">.12</span><span class="hljs-number">.0</span>
        <span class="hljs-attr">with</span>:
          <span class="hljs-attr">distribution</span>: <span class="hljs-string">'oracle'</span>
          java-<span class="hljs-attr">version</span>: <span class="hljs-string">'17'</span>

        #<span class="hljs-number">3</span> <span class="hljs-title class_">Flutter</span> 설정
      - <span class="hljs-attr">name</span>: <span class="hljs-title class_">Flutter</span> 설정
        <span class="hljs-attr">uses</span>: subosito/flutter-action@v2
        <span class="hljs-attr">with</span>:
          flutter-<span class="hljs-attr">version</span>: <span class="hljs-string">'3.22.2'</span>
          <span class="hljs-attr">channel</span>: <span class="hljs-string">'stable'</span>

        #<span class="hljs-number">4</span> 종속성 설치
      - <span class="hljs-attr">name</span>: 종속성 설치
        <span class="hljs-attr">run</span>: flutter pub get

        #<span class="hljs-number">5</span> <span class="hljs-title class_">Keystore</span> 설정
      - <span class="hljs-attr">name</span>: <span class="hljs-title class_">Keystore</span> 디코딩
        <span class="hljs-attr">run</span>: |
          echo <span class="hljs-string">"${ secrets.KEYSTORE_BASE64 }"</span> | base64 --decode > android/app/keystore.<span class="hljs-property">jks</span>
          
      - <span class="hljs-attr">name</span>: key.<span class="hljs-property">properties</span> 생성
        <span class="hljs-attr">run</span>: |
          echo <span class="hljs-string">"storePassword=${ secrets.KEYSTORE_PASSWORD }"</span> > android/key.<span class="hljs-property">properties</span>
          echo <span class="hljs-string">"keyPassword=${ secrets.KEY_PASSWORD }"</span> >> android/key.<span class="hljs-property">properties</span>
          echo <span class="hljs-string">"keyAlias=${ secrets.KEY_ALIAS }"</span> >> android/key.<span class="hljs-property">properties</span>
          echo <span class="hljs-string">"storeFile=keystore.jks"</span> >> android/key.<span class="hljs-property">properties</span>
        
       #<span class="hljs-number">6</span> <span class="hljs-variable constant_">APK</span> 빌드
      - <span class="hljs-attr">name</span>: <span class="hljs-variable constant_">APK</span> 빌드
        <span class="hljs-attr">run</span>: flutter build apk --release

        #<span class="hljs-number">7</span> <span class="hljs-title class_">App</span> <span class="hljs-title class_">Bundle</span> (aab) 빌드
      - <span class="hljs-attr">name</span>: <span class="hljs-title class_">App</span> <span class="hljs-title class_">Bundle</span> 빌드
        <span class="hljs-attr">run</span>: flutter build appbundle

        #<span class="hljs-number">8</span> <span class="hljs-variable constant_">IPA</span> 빌드 (iOS 빌드)
      - <span class="hljs-attr">name</span>: <span class="hljs-variable constant_">IPA</span> 빌드
        <span class="hljs-attr">run</span>: flutter build ipa --no-codesign

      - <span class="hljs-attr">name</span>: 아카이브 및 <span class="hljs-variable constant_">IPA</span> 압축
        <span class="hljs-attr">run</span>: |
          cd build
          tar -czf ios_build.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span> ios

        #<span class="hljs-number">9</span> 아티팩트 업로드
      - <span class="hljs-attr">name</span>: 아티팩트 업로드
        <span class="hljs-attr">uses</span>: actions/upload-artifact@v2
        <span class="hljs-attr">with</span>:
          <span class="hljs-attr">name</span>: 릴리스
          <span class="hljs-attr">path</span>: |
            build/app/outputs/flutter-apk/app-release.<span class="hljs-property">apk</span>
            build/app/outputs/bundle/release/app-release.<span class="hljs-property">aab</span>
            build/ios_build.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>

        #<span class="hljs-number">10</span> 버전 추출
      - <span class="hljs-attr">name</span>: pubspec.<span class="hljs-property">yaml</span>에서 버전 추출
        <span class="hljs-attr">id</span>: extract_version
        <span class="hljs-attr">run</span>: |
          version=$(grep <span class="hljs-string">'^version: '</span> pubspec.<span class="hljs-property">yaml</span> | cut -d <span class="hljs-string">' '</span> -f <span class="hljs-number">2</span> | tr -d <span class="hljs-string">'\r'</span>)
          echo <span class="hljs-string">"VERSION=$version"</span> >> $GITHUB_ENV

        #<span class="hljs-number">11</span> 태그 확인
      - <span class="hljs-attr">name</span>: 태그 확인
        <span class="hljs-attr">id</span>: check_tag
        <span class="hljs-attr">run</span>: |
          <span class="hljs-keyword">if</span> git rev-parse <span class="hljs-string">"v${ env.VERSION }"</span> ><span class="hljs-regexp">/dev/</span><span class="hljs-literal">null</span> <span class="hljs-number">2</span>>&#x26;<span class="hljs-number">1</span>; then
            echo <span class="hljs-string">"TAG_EXISTS=true"</span> >> $GITHUB_ENV
          <span class="hljs-keyword">else</span>
            echo <span class="hljs-string">"TAG_EXISTS=false"</span> >> $GITHUB_ENV
          fi

        #<span class="hljs-number">12</span> 태그 수정
      - <span class="hljs-attr">name</span>: 태그 수정
        <span class="hljs-attr">if</span>: env.<span class="hljs-property">TAG_EXISTS</span> == <span class="hljs-string">'true'</span>
        <span class="hljs-attr">id</span>: modify_tag
        <span class="hljs-attr">run</span>: |
          new_version=<span class="hljs-string">"${ env.VERSION }-build-${ github.run_number }"</span>
          echo <span class="hljs-string">"VERSION=$new_version"</span> >> $GITHUB_ENV
        
        #<span class="hljs-number">13</span> 릴리스 생성
      - <span class="hljs-attr">name</span>: 릴리스 생성
        <span class="hljs-attr">uses</span>: ncipollo/release-action@v1
        <span class="hljs-attr">with</span>:
          <span class="hljs-attr">artifacts</span>: <span class="hljs-string">"build/app/outputs/flutter-apk/app-release.apk,build/app/outputs/bundle/release/app-release.aab,build/ios_build.tar.gz"</span>
          <span class="hljs-attr">tag</span>: v${ env.<span class="hljs-property">VERSION</span> }
          <span class="hljs-attr">token</span>: ${ secrets.<span class="hljs-property">TOKEN</span> }
</code></pre>
<p>위 단계를 따라 완성된 Workflow 코드를 사용하면 Flutter 빌드 및 릴리스 프로세스를 자동화하여 CI/CD 파이프라인에서 일관성과 효율성을 확보할 수 있습니다.</p>
<div class="content-ad"></div>
<h2>이제 첫 CI/CD 워크플로를 만들었어요, 축하드려요 🥳🥳</h2>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"GitHub Actions로 Flutter 빌드 자동화 단계별 가이드","description":"","date":"2024-06-23 14:45","slug":"2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide","content":"\n\n![이미지](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png)\n\n안녕하세요! 이 기사에서는 GitHub Actions를 활용하여 Flutter 앱의 빌드 및 릴리스 프로세스를 자동화하는 방법을 알아볼 거에요. 이 방법을 통해 연속적인 통합/배포(CI/CD) 파이프라인을 유지할 수 있어 개발에 집중할 수 있게 해주죠. GitHub Actions가 빌드와 애플리케이션 릴리스를 처리하는 동안 무거운 작업을 자동으로 처리해줍니다.\n\n# 소개\n\n자동화는 현대 소프트웨어 개발의 중요한 구성 요소로, 개발자가 반복 작업을 간소화하고 인적 오류를 줄일 수 있게 해줍니다. Flutter 개발자들에게는 빌드 및 릴리스 프로세스를 자동화하면 생산성을 크게 향상시키고 일관된 배포를 보장할 수 있습니다. GitHub Actions는 GitHub 저장소에서 직접 워크플로를 자동화할 수 있는 강력한 플랫폼을 제공합니다. 이 기사에서는 Android 및 iOS 플랫폼용 Flutter 앱의 빌드 및 릴리스를 처리하며 버전 관리 및 keystore 관리까지 다루는 GitHub Actions 워크플로를 생성해볼 거에요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 워크플로우 설정하기\n\n이전에 언급했듯이 Github Actions와 함께 작업할 것이므로, 먼저 프로젝트를 위한 Github Repo를 생성해야 합니다. 프로젝트의 이름을 flutterGitHubAction으로 지정합시다.\n\n![이미지 1](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_1.png)\n\n![이미지 2](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_2.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n$ git init\n$ git add .\n$ git commit -m \"init app\"\n$ git remote add origin https://github.com/colonal/flutterGitHubAction.git\n$ git push -u origin master\n```\n\n![image](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_3.png)\n\n![image](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_4.png)\n\n이제 사랑하는 VSCode로 돌아가서 작업을 시작해봅시다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 프로젝트의 루트 폴더에 \" .github \"라는 새 디렉토리를 만듭니다.\n- 새로 만든 디렉토리 아래에 또 다른 새 디렉토리를 만들고 \" workflows \"라고 이름 짓습니다.\n- 마지막으로 workflows 디렉토리 안에 \" main.yml \"이라는 새 파일을 만듭니다.\n\n![이미지](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_5.png)\n\n- 이제 필요한 workflow를 작성해 봅시다.\n\n```js\nname: \"Build \u0026 Release\"   # 필요에 맞게 이름을 지정하세요\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 이것은 GitHub Actions에서 실행하려는 workflow의 이름입니다.\n\n```js\non:\n  pull_request:\n    branches:\n      - dev\n      - test\n  push:\n    branches:\n      - dev\n      - test \n```\n\n- 이 작업을 트리거하고 싶은 경우들이며, 여기에서는 2가지 경우 [pull_request 및 push]에 대해 설정했으며, 청취하고 트리거할 브랜치를 지정했습니다. 여기에서는 [dev, test] 브랜치로 설정했습니다.\n- 이것은 즉, 우리의 작업이 dev 또는 test 브랜치로 뭔가를 푸시하거나 dev 또는 test 브랜치에서 PR을 할 때마다 트리거될 것을 의미합니다.\n\n```js\njobs:  # 어떤 작업이 필요한지 알려주는 부분\n  build:      # 작성될 이름과 머신을 지정\n    name: Build \u0026 Release  # 빌드 이름을 원하시는 대로 지정할 수 있습니다\n    runs-on: macos-latest # 여기에서 우리는 ios 빌드를 얻기 위해 macos-latest를 선택했습니다\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이제 우리가 거쳐가길 원하는 단계를 구체적으로 지정해야 해요(위에 보여진 대로):\n\n![Step Image](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_6.png)\n\n# 1. 저장소 체크아웃\n\n```yaml\n- name: Checkout Repository\n  uses: actions/checkout@v3\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n설명: 여기서는 checkout이라는 미리 만들어 둔 작업을 사용하여 저장소 코드를 체크아웃하여 워크플로가 액세스할 수 있게 합니다. 이 작업과 많은 다른 작업은 GitHub Actions marketplace에서 찾을 수 있습니다. 각 작업에 이름을 지정하는 것은 필수는 아니지만 명확성을 위해 유용합니다.\n\n## 2. Java 설정\n\n```yaml\n- name: Set Up Java\n  uses: actions/setup-java@v3.12.0\n  with:\n    distribution: 'oracle'\n    java-version: '17'\n```\n\n설명: 이 단계는 setup-java 작업을 사용하여 필요한 Java 환경을 설정합니다. 'Oracle'를 배포로, '17'을 Java 버전으로 지정합니다. 이는 Android 앱을 빌드하는 데 필요합니다. 모든 사용 가능한 배포본을 여기에서 찾을 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 3. 플러터 설정하기\n\n```js\n- name: 플러터 설정\n  uses: subosito/flutter-action@v2\n  with:\n    flutter-version: '3.22.2'\n    channel: 'stable'\n```\n\n설명: 이 단계에서는 subosito/flutter-action을 사용하여 지정된 버전과 채널로 플러터 환경을 설정합니다. 이렇게 하면 빌드 프로세스 중에 올바른 버전의 플러터를 사용할 수 있습니다.\n\n# 4. 종속성 설치하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n- name: 의존성 설치\n  run: flutter pub get\n\n\n설명: 이 단계는 플러터 프로젝트에 필요한 종속성을 설치하기 위해 flutter pub get을 실행합니다. 이것은 로컬에서 명령을 실행하는 것과 동일하며, pubspec.yaml 파일에서 지정된 모든 종속성을 해결하는 데 중요합니다.\n\n# 5. 키스토어 설정\n\nAndroid 앱에 서명하려면 키스토어 파일 및 관련 속성을 안전하게 처리해야 합니다. 저장소에 직접 keystore.jks 파일을 추가하는 대신 (보안에 취약합니다), 해당 파일을 base64 문자열로 변환하여 GitHub 저장소에서 비밀로 저장합니다. 또한 필요한 다른 키스토어 속성을 비밀로 저장합니다. 아래는 자세한 단계입니다:\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 단계별 안내:\n\n- 키스토어 파일을 Base64로 변환하세요. 다음 명령을 사용하여 keystore.jks 파일을 base64 문자열로 변환하세요:\n\n```js\nbase64 -w 0 keystore.jks \u003e keystore.jks.base64\n```\n\n- keystore.jks.base64 파일의 내용을 복사하세요.\n- GitHub 리포지토리에 시크릿 추가하기. 리포지토리 설정으로 이동하여 \"Actions\"에서 \"Secrets and variables\"로 이동한 후 다음 시크릿을 추가하세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- KEYSTORE_BASE64: keystore.jks.base64의 내용입니다.\n- KEYSTORE_PASSWORD: 키스토어의 비밀번호입니다.\n- KEY_ALIAS: 키에 대한 별칭입니다.\n- KEY_PASSWORD: 키 별칭의 비밀번호입니다.\n\n![image](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_7.png)\n\n## GitHub Actions Workflow 단계:\n\n- Keystore 디코딩\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\n- name: 키스토어 디코드\n  run: |\n    echo \"${ secrets.KEYSTORE_BASE64 }\" | base64 --decode \u003e android/app/keystore.jks\n```\n\n설명: 이 단계는 GitHub 저장소에 저장된 시크릿을 사용하여 base64로 인코딩된 키스토어를 디코딩합니다. 디코딩된 키스토어는 android/app/keystore.jks에 저장됩니다. Android 앱을 서명하는 데 필요합니다.\n\n2. key.properties 파일 생성하기\n\n```yaml\n- name: key.properties 파일 생성\n  run: |\n    echo \"storePassword=${ secrets.KEYSTORE_PASSWORD }\" \u003e android/key.properties\n    echo \"keyPassword=${ secrets.KEY_PASSWORD }\" \u003e\u003e android/key.properties\n    echo \"keyAlias=${ secrets.KEY_ALIAS }\" \u003e\u003e android/key.properties\n    echo \"storeFile=keystore.jks\" \u003e\u003e android/key.properties\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n설명: 이 단계에서는 애플리케이션을 서명하는 데 필요한 속성을 갖는 key.properties 파일이 생성됩니다. 이러한 속성은 GitHub 저장소에 저장된 비밀 정보를 사용하여 채워집니다.\n\n# 6. APK 빌드\n\n```js\n- name: APK 빌드\n  run: flutter build apk --release\n```\n\n설명: 이 단계에서는 flutter build apk --release 명령어를 사용하여 Flutter 애플리케이션의 APK를 릴리스 모드로 빌드합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 7. 앱 번들 빌드\n\n```yaml\n- name: 앱 번들 빌드 실행\n  run: flutter build appbundle\n```\n\n설명: 이 단계는 flutter build appbundle 명령어를 사용하여 Flutter 애플리케이션의 Android 앱 번들(AAB)을 빌드합니다.\n\n# 8. IPA 빌드(iOS 빌드)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\n- 이름: IPA 빌드\n  실행: flutter build ipa --no-codesign\n```\n\n설명: 이 단계는 flutter build ipa --no-codesign 명령을 사용하여 코드 서명 없이 iOS 애플리케이션을 위한 IPA 파일을 빌드합니다. --no-codesign 플래그를 사용하면 로컬 개발을 위해 유효한 Apple 개발자 계정이 필요하지 않고 IPA를 빌드할 수 있습니다.\n\n# 9. 아카이브와 IPA 압축\n\n```yaml\n- 이름: 아카이브 및 IPA 압축\n  실행: |\n    cd build\n    tar -czf ios_build.tar.gz ios\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 10. 아티팩트 업로드\n\n```js\n- name: 아티팩트 업로드\n  uses: actions/upload-artifact@v2\n  with:\n    name: 릴리즈\n    path: |\n      build/app/outputs/flutter-apk/app-release.apk\n      build/app/outputs/bundle/release/app-release.aab\n      build/ios_build.tar.gz\n```\n\n설명: 이 단계는 iOS 빌드 디렉토리를 tar.gz 파일로 압축하여 저장 및 전송을 쉽게합니다. 이 단계는 upload-artifact 작업을 사용하여 빌드 아티팩트 (APK, AAB 및 압축된 iOS 빌드)를 업로드하여 나중에 다운로드할 수 있게 합니다. 이를 통해 빌드 출력물을 GitHub Actions 실행 페이지에서 액세스할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 11. 버전 추출\n\n```js\n- name: pubspec.yaml에서 버전 추출\n  id: extract_version\n  run: |\n    version=$(grep '^version: ' pubspec.yaml | cut -d ' ' -f 2 | tr -d '\\r')\n    echo \"VERSION=$version\" \u003e\u003e $GITHUB_ENV\n```\n\n설명: 이 단계는 pubspec.yaml 파일에서 버전 번호를 추출하고 환경 변수로 설정합니다. grep 명령은 버전 라인을 검색하여 버전 번호를 추출하고 이를 VERSION 환경 변수에 저장합니다.\n\n# 12. 태그의 존재 여부 확인\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\n- name: 태그 여부 확인\n  id: check_tag\n  run: |\n    if git rev-parse \"v${ env.VERSION }\" \u003e/dev/null 2\u003e\u00261; then\n      echo \"TAG_EXISTS=true\" \u003e\u003e $GITHUB_ENV\n    else\n      echo \"TAG_EXISTS=false\" \u003e\u003e $GITHUB_ENV\n    fi\n```\n\n설명: 이 단계는 저장소에 버전 태그가 이미 존재하는지 확인합니다. 태그가 있으면 TAG_EXISTS 환경 변수를 true로 설정하고, 그렇지 않으면 false로 설정합니다.\n\n# 13. 태그 수정하기 (태그가 존재하는 경우)\n\n```yaml\n- name: 태그 수정\n  if: env.TAG_EXISTS == 'true'\n  id: modify_tag\n  run: |\n    new_version=\"${ env.VERSION }-build-${ github.run_number }\"\n    echo \"VERSION=$new_version\" \u003e\u003e $GITHUB_ENV\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n설명: 이 단계에서는 이미 있는 태그인 경우, 버전 태그를 수정하여 버전 번호에 -build-`run_number`를 추가하여 고유 식별자가 포함되도록 합니다. 이렇게 하면 태그가 고유하게 유지되고 충돌을 피할 수 있습니다.\n\n# 14. 릴리스 생성\n\n```yaml\n- name: 릴리스 생성\n  uses: ncipollo/release-action@v1\n  with:\n    artifacts: \"build/app/outputs/flutter-apk/app-release.apk,build/app/outputs/bundle/release/app-release.aab,build/ios_build.tar.gz\"\n    tag: v${ env.VERSION }\n    token: ${ secrets.TOKEN }\n```\n\n설명: 이 단계에서는 ncipollo/release-action을 사용하여 지정된 아티팩트로 GitHub 릴리스를 생성합니다. (필요한 경우 수정된) 버전을 태그로 사용하고 GitHub 시크릿에 저장된 토큰을 인증에 사용합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 마법을 볼 준비가 되셨나요?\n\n```js\n$ get add .\n$ git commit -m \"test github actions\" \n$ git push -u origin dev\n```\n\n- 변경 사항을 dev 브랜치에 푸시하고 작동하는지 확인해 보세요.\n- 레포지토리의 Actions 탭으로 이동해서 확인해 보세요.\n\n![이미지](/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_8.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 완성된 Workflow 코드\n\n중요한 메모: 들여쓰기가 중요하니 주의하세요\n\n```js\nname: \"Build\"\n\non:\n  pull_request:\n    branches:\n      - dev\n      - test\n  push:\n    branches:\n      - dev\n      - test\n\njobs:  \n  build:      \n    name: Build \u0026 Release \n    runs-on: macos-latest \n\n    steps:\n        #1 저장소 체크아웃\n      - name: 저장소 체크아웃\n        uses: actions/checkout@v3\n\n        #2 Java 설정\n      - name: Java 설정\n        uses: actions/setup-java@v3.12.0\n        with:\n          distribution: 'oracle'\n          java-version: '17'\n\n        #3 Flutter 설정\n      - name: Flutter 설정\n        uses: subosito/flutter-action@v2\n        with:\n          flutter-version: '3.22.2'\n          channel: 'stable'\n\n        #4 종속성 설치\n      - name: 종속성 설치\n        run: flutter pub get\n\n        #5 Keystore 설정\n      - name: Keystore 디코딩\n        run: |\n          echo \"${ secrets.KEYSTORE_BASE64 }\" | base64 --decode \u003e android/app/keystore.jks\n          \n      - name: key.properties 생성\n        run: |\n          echo \"storePassword=${ secrets.KEYSTORE_PASSWORD }\" \u003e android/key.properties\n          echo \"keyPassword=${ secrets.KEY_PASSWORD }\" \u003e\u003e android/key.properties\n          echo \"keyAlias=${ secrets.KEY_ALIAS }\" \u003e\u003e android/key.properties\n          echo \"storeFile=keystore.jks\" \u003e\u003e android/key.properties\n        \n       #6 APK 빌드\n      - name: APK 빌드\n        run: flutter build apk --release\n\n        #7 App Bundle (aab) 빌드\n      - name: App Bundle 빌드\n        run: flutter build appbundle\n\n        #8 IPA 빌드 (iOS 빌드)\n      - name: IPA 빌드\n        run: flutter build ipa --no-codesign\n\n      - name: 아카이브 및 IPA 압축\n        run: |\n          cd build\n          tar -czf ios_build.tar.gz ios\n\n        #9 아티팩트 업로드\n      - name: 아티팩트 업로드\n        uses: actions/upload-artifact@v2\n        with:\n          name: 릴리스\n          path: |\n            build/app/outputs/flutter-apk/app-release.apk\n            build/app/outputs/bundle/release/app-release.aab\n            build/ios_build.tar.gz\n\n        #10 버전 추출\n      - name: pubspec.yaml에서 버전 추출\n        id: extract_version\n        run: |\n          version=$(grep '^version: ' pubspec.yaml | cut -d ' ' -f 2 | tr -d '\\r')\n          echo \"VERSION=$version\" \u003e\u003e $GITHUB_ENV\n\n        #11 태그 확인\n      - name: 태그 확인\n        id: check_tag\n        run: |\n          if git rev-parse \"v${ env.VERSION }\" \u003e/dev/null 2\u003e\u00261; then\n            echo \"TAG_EXISTS=true\" \u003e\u003e $GITHUB_ENV\n          else\n            echo \"TAG_EXISTS=false\" \u003e\u003e $GITHUB_ENV\n          fi\n\n        #12 태그 수정\n      - name: 태그 수정\n        if: env.TAG_EXISTS == 'true'\n        id: modify_tag\n        run: |\n          new_version=\"${ env.VERSION }-build-${ github.run_number }\"\n          echo \"VERSION=$new_version\" \u003e\u003e $GITHUB_ENV\n        \n        #13 릴리스 생성\n      - name: 릴리스 생성\n        uses: ncipollo/release-action@v1\n        with:\n          artifacts: \"build/app/outputs/flutter-apk/app-release.apk,build/app/outputs/bundle/release/app-release.aab,build/ios_build.tar.gz\"\n          tag: v${ env.VERSION }\n          token: ${ secrets.TOKEN }\n```\n\n위 단계를 따라 완성된 Workflow 코드를 사용하면 Flutter 빌드 및 릴리스 프로세스를 자동화하여 CI/CD 파이프라인에서 일관성과 효율성을 확보할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 이제 첫 CI/CD 워크플로를 만들었어요, 축하드려요 🥳🥳","ogImage":{"url":"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png"},"coverImage":"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png","tag":["Tech"],"readingTime":12},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e안녕하세요! 이 기사에서는 GitHub Actions를 활용하여 Flutter 앱의 빌드 및 릴리스 프로세스를 자동화하는 방법을 알아볼 거에요. 이 방법을 통해 연속적인 통합/배포(CI/CD) 파이프라인을 유지할 수 있어 개발에 집중할 수 있게 해주죠. GitHub Actions가 빌드와 애플리케이션 릴리스를 처리하는 동안 무거운 작업을 자동으로 처리해줍니다.\u003c/p\u003e\n\u003ch1\u003e소개\u003c/h1\u003e\n\u003cp\u003e자동화는 현대 소프트웨어 개발의 중요한 구성 요소로, 개발자가 반복 작업을 간소화하고 인적 오류를 줄일 수 있게 해줍니다. Flutter 개발자들에게는 빌드 및 릴리스 프로세스를 자동화하면 생산성을 크게 향상시키고 일관된 배포를 보장할 수 있습니다. GitHub Actions는 GitHub 저장소에서 직접 워크플로를 자동화할 수 있는 강력한 플랫폼을 제공합니다. 이 기사에서는 Android 및 iOS 플랫폼용 Flutter 앱의 빌드 및 릴리스를 처리하며 버전 관리 및 keystore 관리까지 다루는 GitHub Actions 워크플로를 생성해볼 거에요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e워크플로우 설정하기\u003c/h1\u003e\n\u003cp\u003e이전에 언급했듯이 Github Actions와 함께 작업할 것이므로, 먼저 프로젝트를 위한 Github Repo를 생성해야 합니다. 프로젝트의 이름을 flutterGitHubAction으로 지정합시다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_1.png\" alt=\"이미지 1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_2.png\" alt=\"이미지 2\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ git init\n$ git add .\n$ git commit -m \u003cspan class=\"hljs-string\"\u003e\"init app\"\u003c/span\u003e\n$ git remote add origin \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/colonal/flutterGitHubAction.git\u003c/span\u003e\n$ git push -u origin master\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_3.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_4.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e이제 사랑하는 VSCode로 돌아가서 작업을 시작해봅시다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e프로젝트의 루트 폴더에 \" .github \"라는 새 디렉토리를 만듭니다.\u003c/li\u003e\n\u003cli\u003e새로 만든 디렉토리 아래에 또 다른 새 디렉토리를 만들고 \" workflows \"라고 이름 짓습니다.\u003c/li\u003e\n\u003cli\u003e마지막으로 workflows 디렉토리 안에 \" main.yml \"이라는 새 파일을 만듭니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e이제 필요한 workflow를 작성해 봅시다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Build \u0026#x26; Release\"\u003c/span\u003e   # 필요에 맞게 이름을 지정하세요\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e이것은 GitHub Actions에서 실행하려는 workflow의 이름입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003epull_request\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebranches\u003c/span\u003e:\n      - dev\n      - test\n  \u003cspan class=\"hljs-attr\"\u003epush\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebranches\u003c/span\u003e:\n      - dev\n      - test \n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e이 작업을 트리거하고 싶은 경우들이며, 여기에서는 2가지 경우 [pull_request 및 push]에 대해 설정했으며, 청취하고 트리거할 브랜치를 지정했습니다. 여기에서는 [dev, test] 브랜치로 설정했습니다.\u003c/li\u003e\n\u003cli\u003e이것은 즉, 우리의 작업이 dev 또는 test 브랜치로 뭔가를 푸시하거나 dev 또는 test 브랜치에서 PR을 할 때마다 트리거될 것을 의미합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003ejobs\u003c/span\u003e:  # 어떤 작업이 필요한지 알려주는 부분\n  \u003cspan class=\"hljs-attr\"\u003ebuild\u003c/span\u003e:      # 작성될 이름과 머신을 지정\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eBuild\u003c/span\u003e \u0026#x26; \u003cspan class=\"hljs-title class_\"\u003eRelease\u003c/span\u003e  # 빌드 이름을 원하시는 대로 지정할 수 있습니다\n    runs-\u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e: macos-latest # 여기에서 우리는 ios 빌드를 얻기 위해 macos-latest를 선택했습니다\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이제 우리가 거쳐가길 원하는 단계를 구체적으로 지정해야 해요(위에 보여진 대로):\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_6.png\" alt=\"Step Image\"\u003e\u003c/p\u003e\n\u003ch1\u003e1. 저장소 체크아웃\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eCheckout\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eRepository\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/checkout@v3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e설명: 여기서는 checkout이라는 미리 만들어 둔 작업을 사용하여 저장소 코드를 체크아웃하여 워크플로가 액세스할 수 있게 합니다. 이 작업과 많은 다른 작업은 GitHub Actions marketplace에서 찾을 수 있습니다. 각 작업에 이름을 지정하는 것은 필수는 아니지만 명확성을 위해 유용합니다.\u003c/p\u003e\n\u003ch2\u003e2. Java 설정\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eSet\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUp\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eJava\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/setup-java@v3.12.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003edistribution:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'oracle'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ejava-version:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'17'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 setup-java 작업을 사용하여 필요한 Java 환경을 설정합니다. 'Oracle'를 배포로, '17'을 Java 버전으로 지정합니다. 이는 Android 앱을 빌드하는 데 필요합니다. 모든 사용 가능한 배포본을 여기에서 찾을 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e3. 플러터 설정하기\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e- \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 플러터 설정\n  \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: subosito/flutter-action@v2\n  \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n    flutter-\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'3.22.2'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003echannel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'stable'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계에서는 subosito/flutter-action을 사용하여 지정된 버전과 채널로 플러터 환경을 설정합니다. 이렇게 하면 빌드 프로세스 중에 올바른 버전의 플러터를 사용할 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e4. 종속성 설치하기\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003ename: 의존성 설치\nrun: flutter pub get\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e설명: 이 단계는 플러터 프로젝트에 필요한 종속성을 설치하기 위해 flutter pub get을 실행합니다. 이것은 로컬에서 명령을 실행하는 것과 동일하며, pubspec.yaml 파일에서 지정된 모든 종속성을 해결하는 데 중요합니다.\u003c/p\u003e\n\u003ch1\u003e5. 키스토어 설정\u003c/h1\u003e\n\u003cp\u003eAndroid 앱에 서명하려면 키스토어 파일 및 관련 속성을 안전하게 처리해야 합니다. 저장소에 직접 keystore.jks 파일을 추가하는 대신 (보안에 취약합니다), 해당 파일을 base64 문자열로 변환하여 GitHub 저장소에서 비밀로 저장합니다. 또한 필요한 다른 키스토어 속성을 비밀로 저장합니다. 아래는 자세한 단계입니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e단계별 안내:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e키스토어 파일을 Base64로 변환하세요. 다음 명령을 사용하여 keystore.jks 파일을 base64 문자열로 변환하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebase64 -w \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e keystore.\u003cspan class=\"hljs-property\"\u003ejks\u003c/span\u003e \u003e keystore.\u003cspan class=\"hljs-property\"\u003ejks\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebase64\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ekeystore.jks.base64 파일의 내용을 복사하세요.\u003c/li\u003e\n\u003cli\u003eGitHub 리포지토리에 시크릿 추가하기. 리포지토리 설정으로 이동하여 \"Actions\"에서 \"Secrets and variables\"로 이동한 후 다음 시크릿을 추가하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eKEYSTORE_BASE64: keystore.jks.base64의 내용입니다.\u003c/li\u003e\n\u003cli\u003eKEYSTORE_PASSWORD: 키스토어의 비밀번호입니다.\u003c/li\u003e\n\u003cli\u003eKEY_ALIAS: 키에 대한 별칭입니다.\u003c/li\u003e\n\u003cli\u003eKEY_PASSWORD: 키 별칭의 비밀번호입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_7.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003ch2\u003eGitHub Actions Workflow 단계:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eKeystore 디코딩\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e키스토어\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e디코드\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n    echo \"${ secrets.KEYSTORE_BASE64 }\" | base64 --decode \u003e android/app/keystore.jks\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 GitHub 저장소에 저장된 시크릿을 사용하여 base64로 인코딩된 키스토어를 디코딩합니다. 디코딩된 키스토어는 android/app/keystore.jks에 저장됩니다. Android 앱을 서명하는 데 필요합니다.\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003ekey.properties 파일 생성하기\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ekey.properties\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e파일\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e생성\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n    echo \"storePassword=${ secrets.KEYSTORE_PASSWORD }\" \u003e android/key.properties\n    echo \"keyPassword=${ secrets.KEY_PASSWORD }\" \u003e\u003e android/key.properties\n    echo \"keyAlias=${ secrets.KEY_ALIAS }\" \u003e\u003e android/key.properties\n    echo \"storeFile=keystore.jks\" \u003e\u003e android/key.properties\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e설명: 이 단계에서는 애플리케이션을 서명하는 데 필요한 속성을 갖는 key.properties 파일이 생성됩니다. 이러한 속성은 GitHub 저장소에 저장된 비밀 정보를 사용하여 채워집니다.\u003c/p\u003e\n\u003ch1\u003e6. APK 빌드\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e- \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eAPK\u003c/span\u003e 빌드\n  \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: flutter build apk --release\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계에서는 flutter build apk --release 명령어를 사용하여 Flutter 애플리케이션의 APK를 릴리스 모드로 빌드합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e7. 앱 번들 빌드\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e앱\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e번들\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e빌드\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e실행\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eflutter\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eappbundle\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 flutter build appbundle 명령어를 사용하여 Flutter 애플리케이션의 Android 앱 번들(AAB)을 빌드합니다.\u003c/p\u003e\n\u003ch1\u003e8. IPA 빌드(iOS 빌드)\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e이름:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eIPA\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e빌드\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e실행:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eflutter\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eipa\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--no-codesign\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 flutter build ipa --no-codesign 명령을 사용하여 코드 서명 없이 iOS 애플리케이션을 위한 IPA 파일을 빌드합니다. --no-codesign 플래그를 사용하면 로컬 개발을 위해 유효한 Apple 개발자 계정이 필요하지 않고 IPA를 빌드할 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e9. 아카이브와 IPA 압축\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e이름:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e아카이브\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e및\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eIPA\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e압축\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e실행:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n    cd build\n    tar -czf ios_build.tar.gz ios\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e10. 아티팩트 업로드\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e- \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 아티팩트 업로드\n  \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: actions/upload-artifact@v2\n  \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 릴리즈\n    \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: |\n      build/app/outputs/flutter-apk/app-release.\u003cspan class=\"hljs-property\"\u003eapk\u003c/span\u003e\n      build/app/outputs/bundle/release/app-release.\u003cspan class=\"hljs-property\"\u003eaab\u003c/span\u003e\n      build/ios_build.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 iOS 빌드 디렉토리를 tar.gz 파일로 압축하여 저장 및 전송을 쉽게합니다. 이 단계는 upload-artifact 작업을 사용하여 빌드 아티팩트 (APK, AAB 및 압축된 iOS 빌드)를 업로드하여 나중에 다운로드할 수 있게 합니다. 이를 통해 빌드 출력물을 GitHub Actions 실행 페이지에서 액세스할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e11. 버전 추출\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e- \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: pubspec.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e에서 버전 추출\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: extract_version\n  \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n    version=$(grep \u003cspan class=\"hljs-string\"\u003e'^version: '\u003c/span\u003e pubspec.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e | cut -d \u003cspan class=\"hljs-string\"\u003e' '\u003c/span\u003e -f \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e | tr -d \u003cspan class=\"hljs-string\"\u003e'\\r'\u003c/span\u003e)\n    echo \u003cspan class=\"hljs-string\"\u003e\"VERSION=$version\"\u003c/span\u003e \u003e\u003e $GITHUB_ENV\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 pubspec.yaml 파일에서 버전 번호를 추출하고 환경 변수로 설정합니다. grep 명령은 버전 라인을 검색하여 버전 번호를 추출하고 이를 VERSION 환경 변수에 저장합니다.\u003c/p\u003e\n\u003ch1\u003e12. 태그의 존재 여부 확인\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e태그\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e여부\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e확인\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003echeck_tag\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n    if git rev-parse \"v${ env.VERSION }\" \u003e/dev/null 2\u003e\u0026#x26;1; then\n      echo \"TAG_EXISTS=true\" \u003e\u003e $GITHUB_ENV\n    else\n      echo \"TAG_EXISTS=false\" \u003e\u003e $GITHUB_ENV\n    fi\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계는 저장소에 버전 태그가 이미 존재하는지 확인합니다. 태그가 있으면 TAG_EXISTS 환경 변수를 true로 설정하고, 그렇지 않으면 false로 설정합니다.\u003c/p\u003e\n\u003ch1\u003e13. 태그 수정하기 (태그가 존재하는 경우)\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e태그\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e수정\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eif:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eenv.TAG_EXISTS\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e==\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'true'\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emodify_tag\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n    new_version=\"${ env.VERSION }-build-${ github.run_number }\"\n    echo \"VERSION=$new_version\" \u003e\u003e $GITHUB_ENV\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e설명: 이 단계에서는 이미 있는 태그인 경우, 버전 태그를 수정하여 버전 번호에 -build-\u003ccode\u003erun_number\u003c/code\u003e를 추가하여 고유 식별자가 포함되도록 합니다. 이렇게 하면 태그가 고유하게 유지되고 충돌을 피할 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e14. 릴리스 생성\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e릴리스\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e생성\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003encipollo/release-action@v1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eartifacts:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"build/app/outputs/flutter-apk/app-release.apk,build/app/outputs/bundle/release/app-release.aab,build/ios_build.tar.gz\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003etag:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ev${\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eenv.VERSION\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003etoken:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esecrets.TOKEN\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설명: 이 단계에서는 ncipollo/release-action을 사용하여 지정된 아티팩트로 GitHub 릴리스를 생성합니다. (필요한 경우 수정된) 버전을 태그로 사용하고 GitHub 시크릿에 저장된 토큰을 인증에 사용합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e마법을 볼 준비가 되셨나요?\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ get add .\n$ git commit -m \u003cspan class=\"hljs-string\"\u003e\"test github actions\"\u003c/span\u003e \n$ git push -u origin dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e변경 사항을 dev 브랜치에 푸시하고 작동하는지 확인해 보세요.\u003c/li\u003e\n\u003cli\u003e레포지토리의 Actions 탭으로 이동해서 확인해 보세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide_8.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e완성된 Workflow 코드\u003c/h1\u003e\n\u003cp\u003e중요한 메모: 들여쓰기가 중요하니 주의하세요\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Build\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003epull_request\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebranches\u003c/span\u003e:\n      - dev\n      - test\n  \u003cspan class=\"hljs-attr\"\u003epush\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebranches\u003c/span\u003e:\n      - dev\n      - test\n\n\u003cspan class=\"hljs-attr\"\u003ejobs\u003c/span\u003e:  \n  \u003cspan class=\"hljs-attr\"\u003ebuild\u003c/span\u003e:      \n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eBuild\u003c/span\u003e \u0026#x26; \u003cspan class=\"hljs-title class_\"\u003eRelease\u003c/span\u003e \n    runs-\u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e: macos-latest \n\n    \u003cspan class=\"hljs-attr\"\u003esteps\u003c/span\u003e:\n        #\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e 저장소 체크아웃\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 저장소 체크아웃\n        \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: actions/checkout@v3\n\n        #\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJava\u003c/span\u003e 설정\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJava\u003c/span\u003e 설정\n        \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: actions/setup-java@v3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n          \u003cspan class=\"hljs-attr\"\u003edistribution\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'oracle'\u003c/span\u003e\n          java-\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'17'\u003c/span\u003e\n\n        #\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFlutter\u003c/span\u003e 설정\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFlutter\u003c/span\u003e 설정\n        \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: subosito/flutter-action@v2\n        \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n          flutter-\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'3.22.2'\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003echannel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'stable'\u003c/span\u003e\n\n        #\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e 종속성 설치\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 종속성 설치\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: flutter pub get\n\n        #\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eKeystore\u003c/span\u003e 설정\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eKeystore\u003c/span\u003e 디코딩\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n          echo \u003cspan class=\"hljs-string\"\u003e\"${ secrets.KEYSTORE_BASE64 }\"\u003c/span\u003e | base64 --decode \u003e android/app/keystore.\u003cspan class=\"hljs-property\"\u003ejks\u003c/span\u003e\n          \n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: key.\u003cspan class=\"hljs-property\"\u003eproperties\u003c/span\u003e 생성\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n          echo \u003cspan class=\"hljs-string\"\u003e\"storePassword=${ secrets.KEYSTORE_PASSWORD }\"\u003c/span\u003e \u003e android/key.\u003cspan class=\"hljs-property\"\u003eproperties\u003c/span\u003e\n          echo \u003cspan class=\"hljs-string\"\u003e\"keyPassword=${ secrets.KEY_PASSWORD }\"\u003c/span\u003e \u003e\u003e android/key.\u003cspan class=\"hljs-property\"\u003eproperties\u003c/span\u003e\n          echo \u003cspan class=\"hljs-string\"\u003e\"keyAlias=${ secrets.KEY_ALIAS }\"\u003c/span\u003e \u003e\u003e android/key.\u003cspan class=\"hljs-property\"\u003eproperties\u003c/span\u003e\n          echo \u003cspan class=\"hljs-string\"\u003e\"storeFile=keystore.jks\"\u003c/span\u003e \u003e\u003e android/key.\u003cspan class=\"hljs-property\"\u003eproperties\u003c/span\u003e\n        \n       #\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAPK\u003c/span\u003e 빌드\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eAPK\u003c/span\u003e 빌드\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: flutter build apk --release\n\n        #\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBundle\u003c/span\u003e (aab) 빌드\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBundle\u003c/span\u003e 빌드\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: flutter build appbundle\n\n        #\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eIPA\u003c/span\u003e 빌드 (iOS 빌드)\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eIPA\u003c/span\u003e 빌드\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: flutter build ipa --no-codesign\n\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 아카이브 및 \u003cspan class=\"hljs-variable constant_\"\u003eIPA\u003c/span\u003e 압축\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n          cd build\n          tar -czf ios_build.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e ios\n\n        #\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e 아티팩트 업로드\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 아티팩트 업로드\n        \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: actions/upload-artifact@v2\n        \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n          \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 릴리스\n          \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: |\n            build/app/outputs/flutter-apk/app-release.\u003cspan class=\"hljs-property\"\u003eapk\u003c/span\u003e\n            build/app/outputs/bundle/release/app-release.\u003cspan class=\"hljs-property\"\u003eaab\u003c/span\u003e\n            build/ios_build.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e\n\n        #\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e 버전 추출\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: pubspec.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e에서 버전 추출\n        \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: extract_version\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n          version=$(grep \u003cspan class=\"hljs-string\"\u003e'^version: '\u003c/span\u003e pubspec.\u003cspan class=\"hljs-property\"\u003eyaml\u003c/span\u003e | cut -d \u003cspan class=\"hljs-string\"\u003e' '\u003c/span\u003e -f \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e | tr -d \u003cspan class=\"hljs-string\"\u003e'\\r'\u003c/span\u003e)\n          echo \u003cspan class=\"hljs-string\"\u003e\"VERSION=$version\"\u003c/span\u003e \u003e\u003e $GITHUB_ENV\n\n        #\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e 태그 확인\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 태그 확인\n        \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: check_tag\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e git rev-parse \u003cspan class=\"hljs-string\"\u003e\"v${ env.VERSION }\"\u003c/span\u003e \u003e\u003cspan class=\"hljs-regexp\"\u003e/dev/\u003c/span\u003e\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\u003e\u0026#x26;\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e; then\n            echo \u003cspan class=\"hljs-string\"\u003e\"TAG_EXISTS=true\"\u003c/span\u003e \u003e\u003e $GITHUB_ENV\n          \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n            echo \u003cspan class=\"hljs-string\"\u003e\"TAG_EXISTS=false\"\u003c/span\u003e \u003e\u003e $GITHUB_ENV\n          fi\n\n        #\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e 태그 수정\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 태그 수정\n        \u003cspan class=\"hljs-attr\"\u003eif\u003c/span\u003e: env.\u003cspan class=\"hljs-property\"\u003eTAG_EXISTS\u003c/span\u003e == \u003cspan class=\"hljs-string\"\u003e'true'\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: modify_tag\n        \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: |\n          new_version=\u003cspan class=\"hljs-string\"\u003e\"${ env.VERSION }-build-${ github.run_number }\"\u003c/span\u003e\n          echo \u003cspan class=\"hljs-string\"\u003e\"VERSION=$new_version\"\u003c/span\u003e \u003e\u003e $GITHUB_ENV\n        \n        #\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e 릴리스 생성\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: 릴리스 생성\n        \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: ncipollo/release-action@v1\n        \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n          \u003cspan class=\"hljs-attr\"\u003eartifacts\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"build/app/outputs/flutter-apk/app-release.apk,build/app/outputs/bundle/release/app-release.aab,build/ios_build.tar.gz\"\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003etag\u003c/span\u003e: v${ env.\u003cspan class=\"hljs-property\"\u003eVERSION\u003c/span\u003e }\n          \u003cspan class=\"hljs-attr\"\u003etoken\u003c/span\u003e: ${ secrets.\u003cspan class=\"hljs-property\"\u003eTOKEN\u003c/span\u003e }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 단계를 따라 완성된 Workflow 코드를 사용하면 Flutter 빌드 및 릴리스 프로세스를 자동화하여 CI/CD 파이프라인에서 일관성과 효율성을 확보할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e이제 첫 CI/CD 워크플로를 만들었어요, 축하드려요 🥳🥳\u003c/h2\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-AutomatingFlutterBuildswithGitHubActionsAStep-by-StepGuide"},"buildId":"5et5eMZxpKCgDAAyIS6Ju","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>