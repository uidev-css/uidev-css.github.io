<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Flutter의 Clean Architecture 파트1 - 소개 | uidev-css</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://uidev-css.github.io///post/2024-06-20-FlutterCleanArchitecturePart1Introduction" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Flutter의 Clean Architecture 파트1 - 소개 | uidev-css" data-gatsby-head="true"/><meta property="og:title" content="Flutter의 Clean Architecture 파트1 - 소개 | uidev-css" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://uidev-css.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://uidev-css.github.io///post/2024-06-20-FlutterCleanArchitecturePart1Introduction" data-gatsby-head="true"/><meta name="twitter:title" content="Flutter의 Clean Architecture 파트1 - 소개 | uidev-css" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | uidev-css" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-20 13:46" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BHFR6GTH9P"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-BHFR6GTH9P');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b75a4bf98ee956a8.js" defer=""></script><script src="/_next/static/4HDhroK4kHnB5DAbbbGv3/_buildManifest.js" defer=""></script><script src="/_next/static/4HDhroK4kHnB5DAbbbGv3/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">UIDEV CSS</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Flutter의 Clean Architecture 파트1 - 소개</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Flutter의 Clean Architecture 파트1 - 소개" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">UIDEV CSS</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 20, 2024</span><span class="posts_reading_time__f7YPP">12<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-20-FlutterCleanArchitecturePart1Introduction&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png" alt="image"></p>
<p>소프트웨어 개발에서는 체계적이고 유지보수 가능한 코드베이스를 유지하는 것이 매우 중요합니다. 이때 Clean Architecture가 등장하여 코드베이스를 모듈식, 독립적이고 테스트 가능한 방식으로 구성하는 데 도움을 줍니다. 이 글에서는 Clean Architecture가 무엇인지, Flutter에서 어떻게 구현하는지, 그리고 프로젝트에 어떤 이점을 가져다 줄 수 있는지 살펴보겠습니다.</p>
<p>커피를 마시고 준비하세요! 오랜 여정이 시작됩니다.</p>
<h2>Flutter에서 Clean Architecture를 사용해야 하는 이유</h2>
<p>클린 아키텍처는 모듈화, 유지보수 가능성, 테스트 가능성을 향상시켜 주는 소프트웨어 설계 철학입니다. 각 층으로 코드를 분리하여 애플리케이션을 구조화하며, 크고 복잡한 앱에 특히 유용합니다.</p>
<h2>장점</h2>
<ul>
<li>모듈성과 독립성: 애플리케이션을 독립적인 부분으로 분할하고 각각을 별도로 관리 및 개발합니다.</li>
<li>쉬운 테스트 가능성: 비즈니스 로직을 독립적으로 테스트하여 오류를 감지하기 쉽습니다.</li>
<li>테스트 주도 개발 (TDD): TDD 원칙과 잘 부합합니다. 먼저 비즈니스 로직에 대한 테스트를 작성한 후 그 테스트를 통과할 코드를 구현할 수 있습니다.</li>
<li>미래 확장성: 새로운 기능을 추가하거나 기존 기능을 수정하는 데 더 적은 노력이 필요합니다.</li>
<li>재사용성: 비즈니스 로직을 다른 프로젝트나 플랫폼에서 재사용할 수 있습니다.</li>
<li>관심사 분리: 비즈니스 로직과 사용자 인터페이스 (UI) 사이의 명확한 경계를 유지함으로써 팀 구성을 더 잘 조직화할 수 있습니다.</li>
<li>유지보수 용이성: 층 간 의존성을 줄여 코드 유지보수를 단순화합니다.</li>
<li>변경에 대한 유연성: 데이터 소스나 서비스를 변경하기 쉽게 합니다.</li>
<li>좋은 문서화: 프로젝트 이해와 유지보수를 위해 구조와 작동원리를 명확히 정의합니다.</li>
</ul>
<p>클린 아키텍처는 데이터층, 도메인층, 프레젠테이션 층으로 구성되어 있습니다. 각 층은 구별된 책임과 제한된 의존성을 가지고 있습니다.</p>
<p><img src="/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_1.png" alt="이미지"></p>
<p>코딩을 시작하기 전에 짧게 예제에 대해 설명하겠습니다:</p>
<p>TMDB 플랫폼의 API를 사용하여 기본 영화 애플리케이션을 구축할 예정입니다. 이 응용 프로그램은 API에서 인기 있는 및 최상위 영화 목록을 검색하고 표시할 것입니다. 사용자는 배우 세부 정보를 포함한 영화 정보에 액세스할 수 있습니다.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:600/1*opIWWgVq6ZlP_x5sdV0LDA.gif" alt="이미지"></p>
<p>사용할 패키지 목록</p>
<pre><code class="hljs language-js"><span class="hljs-attr">dependencies</span>:
  # 라우팅을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/auto_route</span>
  <span class="hljs-attr">auto_route</span>: ^<span class="hljs-number">7.8</span><span class="hljs-number">.3</span>

  # 이미지 캐싱을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/cached_network_image</span>
  <span class="hljs-attr">cached_network_image</span>: ^<span class="hljs-number">3.3</span><span class="hljs-number">.0</span>

  # 네트워크 요청을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/dio</span>
  <span class="hljs-attr">dio</span>: ^<span class="hljs-number">5.3</span><span class="hljs-number">.3</span>

  # 동등성을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/equatable</span>
  <span class="hljs-attr">equatable</span>: ^<span class="hljs-number">2.0</span><span class="hljs-number">.5</span>

  # 테마를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flex_color_scheme</span>
  <span class="hljs-attr">flex_color_scheme</span>: ^<span class="hljs-number">7.3</span><span class="hljs-number">.1</span>

  <span class="hljs-attr">flutter</span>:
    <span class="hljs-attr">sdk</span>: flutter

  # 상태 관리를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flutter_bloc</span>
  <span class="hljs-attr">flutter_bloc</span>: ^<span class="hljs-number">8.1</span><span class="hljs-number">.3</span>

  # 환경 변수를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flutter_dotenv</span>
  <span class="hljs-attr">flutter_dotenv</span>: ^<span class="hljs-number">5.1</span><span class="hljs-number">.0</span>

  # 자산 코드 생성을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flutter_gen</span>
  <span class="hljs-attr">flutter_gen</span>: ^<span class="hljs-number">5.4</span><span class="hljs-number">.0</span>

  # 유용한 훅을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flutter_hooks</span>
  <span class="hljs-attr">flutter_hooks</span>: ^<span class="hljs-number">0.20</span><span class="hljs-number">.3</span>

  # 책임성을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flutter_screenutil</span>
  <span class="hljs-attr">flutter_screenutil</span>: ^<span class="hljs-number">5.9</span><span class="hljs-number">.0</span>

  # <span class="hljs-variable constant_">SVG</span>를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/flutter_svg</span>
  <span class="hljs-attr">flutter_svg</span>: ^<span class="hljs-number">2.0</span><span class="hljs-number">.9</span>

  # 함수형 프로그래밍을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/fpdart</span>
  <span class="hljs-attr">fpdart</span>: ^<span class="hljs-number">1.1</span><span class="hljs-number">.0</span>

  # 의존성 주입을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/get_it</span>
  <span class="hljs-attr">get_it</span>: ^<span class="hljs-number">7.6</span><span class="hljs-number">.4</span>

  # 테마 또는 로캘 관리를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/hydrated_bloc</span>
  <span class="hljs-attr">hydrated_bloc</span>: ^<span class="hljs-number">9.1</span><span class="hljs-number">.2</span>

  <span class="hljs-attr">intl</span>: ^<span class="hljs-number">0.19</span><span class="hljs-number">.0</span>

  # 로컬 데이터 소스를 위해
  <span class="hljs-attr">isar</span>: ^<span class="hljs-number">3.1</span><span class="hljs-number">.0</span>+<span class="hljs-number">1</span>
  <span class="hljs-attr">isar_flutter_libs</span>: ^<span class="hljs-number">3.1</span><span class="hljs-number">.0</span>+<span class="hljs-number">1</span>

  # <span class="hljs-variable constant_">API</span> 모델 생성을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/json_annotation</span>
  <span class="hljs-attr">json_annotation</span>: ^<span class="hljs-number">4.8</span><span class="hljs-number">.1</span>

  # 앱 데이터 디렉토리
  <span class="hljs-attr">path_provider</span>: ^<span class="hljs-number">2.1</span><span class="hljs-number">.1</span>

  # 개발자를 위한 dio 인터셉터 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/pretty_dio_logger</span>
  <span class="hljs-attr">pretty_dio_logger</span>: ^<span class="hljs-number">1.3</span><span class="hljs-number">.1</span>

  # 반짝거림 효과를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/shimmer</span>
  <span class="hljs-attr">shimmer</span>: ^<span class="hljs-number">3.0</span><span class="hljs-number">.0</span>

  # <span class="hljs-variable constant_">URL</span> 런처를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/url_launcher</span>
  <span class="hljs-attr">url_launcher</span>: ^<span class="hljs-number">6.2</span><span class="hljs-number">.2</span>

<span class="hljs-attr">dev_dependencies</span>:
  # auto_route 생성기 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/auto_route_generator</span>
  <span class="hljs-attr">auto_route_generator</span>: ^<span class="hljs-number">7.3</span><span class="hljs-number">.1</span>

  # bloc 테스트를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/bloc_test</span>
  <span class="hljs-attr">bloc_test</span>: ^<span class="hljs-number">9.1</span><span class="hljs-number">.4</span>

  <span class="hljs-attr">build_runner</span>: ^<span class="hljs-number">2.4</span><span class="hljs-number">.6</span>
  <span class="hljs-attr">flutter_gen_runner</span>: ^<span class="hljs-number">5.4</span><span class="hljs-number">.0</span>
  <span class="hljs-attr">flutter_lints</span>: ^<span class="hljs-number">3.0</span><span class="hljs-number">.1</span>
  <span class="hljs-attr">flutter_test</span>:
    <span class="hljs-attr">sdk</span>: flutter

  # 로컬 데이터 소스
  <span class="hljs-attr">isar_generator</span>: ^<span class="hljs-number">3.1</span><span class="hljs-number">.0</span>+<span class="hljs-number">1</span>

  # <span class="hljs-variable constant_">API</span> 모델 생성을 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/json_serializable</span>
  <span class="hljs-attr">json_serializable</span>: ^<span class="hljs-number">6.7</span><span class="hljs-number">.1</span>

  # 테스트를 위해 => <span class="hljs-attr">https</span>:<span class="hljs-comment">//pub.dev/packages/mockito</span>
  <span class="hljs-attr">mockito</span>: ^<span class="hljs-number">5.4</span><span class="hljs-number">.4</span>
</code></pre>
<h2>HTTP 요청</h2>
<p>flutter_dotenv 패키지를 사용하여 간단한 애플리케이션 상수 클래스를 만들어 봅시다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConstants</span> {
  final baseUrl = <span class="hljs-string">'${dotenv.env['</span><span class="hljs-variable constant_">BASE_URL</span><span class="hljs-string">']}'</span>; <span class="hljs-comment">//* https://api.themoviedb.org/3</span>
  final apiToken = <span class="hljs-string">'${dotenv.env['</span><span class="hljs-variable constant_">API_TOKEN</span><span class="hljs-string">']}'</span>; <span class="hljs-comment">//* your TMDB token. (sign up here https://developer.themoviedb.org/docs)</span>
}
</code></pre>
<p>HTTP 요청을 위한 클래스를 만들어 봅시다. DioClient 클래스는 API 요청을 보내고 json 데이터를 반환할 것입니다. 여기서 주요 목적은 DioClient 클래스를 get, post, put, patch, delete 메서드로 제한하는 것입니다.</p>
<p>저희 애플리케이션에서는 하나의 API만 사용할 것이므로, Dio를 사용하기 때문에 DioClient라고 이름 짓겠습니다. 애플리케이션이 여러 개의 API와 통신해야 하는 경우, HTTP 요청을 보내는 DioClient와 유사한 클래스가 필요합니다. 이것은 각 네트워크 클래스가 관련된 데이터 원본과 관련되어야 하기 때문입니다.</p>
<p>예를 들어, 영화 데이터에 대해 TMDB API를 사용하고 배우에 대해 BlaBla API를 사용하는 경우, 명명 규칙에 유의해야 합니다. 네이밍의 예시로는 TmdbNetworkManager, BlaBlaClient, CatClient 등이 있을 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DioClient</span> {
  <span class="hljs-title class_">Dio</span> _dio;

  <span class="hljs-title class_">DioClient</span>() {
    _dio = <span class="hljs-title class_">Dio</span>();
    _dio
      ..<span class="hljs-property">options</span>.<span class="hljs-property">baseUrl</span> = <span class="hljs-title class_">AppConstants</span>.<span class="hljs-property">baseUrl</span>
      ..<span class="hljs-property">options</span>.<span class="hljs-property">headers</span> = {
        <span class="hljs-title class_">HttpHeaders</span>.<span class="hljs-property">contentTypeHeader</span>: <span class="hljs-title class_">ContentType</span>.<span class="hljs-property">json</span>.<span class="hljs-property">mimeType</span>,
        <span class="hljs-title class_">HttpHeaders</span>.<span class="hljs-property">authorizationHeader</span>: <span class="hljs-string">'Bearer ${AppConstants.apiToken}'</span>,
      }
      ..<span class="hljs-property">options</span>.<span class="hljs-property">connectTimeout</span> = <span class="hljs-keyword">const</span> <span class="hljs-title class_">Duration</span>(<span class="hljs-attr">milliseconds</span>: <span class="hljs-number">15000</span>)
      ..<span class="hljs-property">options</span>.<span class="hljs-property">receiveTimeout</span> = <span class="hljs-keyword">const</span> <span class="hljs-title class_">Duration</span>(<span class="hljs-attr">milliseconds</span>: <span class="hljs-number">15000</span>)
      ..<span class="hljs-property">options</span>.<span class="hljs-property">responseType</span> = <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">json</span>
      ..<span class="hljs-property">interceptors</span>.<span class="hljs-title function_">add</span>(
        <span class="hljs-title class_">PrettyDioLogger</span>(
          <span class="hljs-attr">compact</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">logPrint</span>: <span class="hljs-function">(<span class="hljs-params">object</span>) =></span> <span class="hljs-title function_">log</span>(object.<span class="hljs-title function_">toString</span>(), <span class="hljs-attr">name</span>: <span class="hljs-string">'TMDB API'</span>),
        ),
      );
  }

  <span class="hljs-comment">/// * GET</span>
  <span class="hljs-title class_">Future</span>&#x3C;<span class="hljs-title class_">Response</span>> <span class="hljs-title function_">get</span>(
    <span class="hljs-title class_">String</span> url, {
    <span class="hljs-title class_">Map</span>&#x3C;<span class="hljs-title class_">String</span>, dynamic>? queryParameters,
    <span class="hljs-title class_">Options</span>? options,
    <span class="hljs-title class_">CancelToken</span>? cancelToken,
    <span class="hljs-title class_">ProgressCallback</span>? onReceiveProgress,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      final response = <span class="hljs-keyword">await</span> _dio.<span class="hljs-title function_">get</span>(
        url,
        <span class="hljs-attr">queryParameters</span>: queryParameters,
        <span class="hljs-attr">options</span>: options,
        <span class="hljs-attr">cancelToken</span>: cancelToken,
        <span class="hljs-attr">onReceiveProgress</span>: onReceiveProgress,
      );
      <span class="hljs-keyword">return</span> response;
    } on <span class="hljs-title class_">DioException</span> {
      rethrow;
    }
  }

  <span class="hljs-comment">/// * POST</span>
  <span class="hljs-title class_">Future</span>&#x3C;<span class="hljs-title class_">Response</span>> <span class="hljs-title function_">post</span>(
    <span class="hljs-title class_">String</span> uri, {
    data,
    <span class="hljs-title class_">Map</span>&#x3C;<span class="hljs-title class_">String</span>, dynamic>? queryParameters,
    <span class="hljs-title class_">Options</span>? options,
    <span class="hljs-title class_">CancelToken</span>? cancelToken,
    <span class="hljs-title class_">ProgressCallback</span>? onSendProgress,
    <span class="hljs-title class_">ProgressCallback</span>? onReceiveProgress,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      final response = <span class="hljs-keyword">await</span> _dio.<span class="hljs-title function_">post</span>(
        uri,
        <span class="hljs-attr">data</span>: data,
        <span class="hljs-attr">queryParameters</span>: queryParameters,
        <span class="hljs-attr">options</span>: options,
        <span class="hljs-attr">cancelToken</span>: cancelToken,
        <span class="hljs-attr">onSendProgress</span>: onSendProgress,
        <span class="hljs-attr">onReceiveProgress</span>: onReceiveProgress,
      );
      <span class="hljs-keyword">return</span> response;
    } on <span class="hljs-title class_">DioException</span> {
      rethrow;
    }
  }

  <span class="hljs-comment">/// * PUT</span>
  <span class="hljs-title class_">Future</span>&#x3C;<span class="hljs-title class_">Response</span>> <span class="hljs-title function_">put</span>(
    <span class="hljs-title class_">String</span> uri, {
    data,
    <span class="hljs-title class_">Map</span>&#x3C;<span class="hljs-title class_">String</span>, dynamic>? queryParameters,
    <span class="hljs-title class_">Options</span>? options,
    <span class="hljs-title class_">CancelToken</span>? cancelToken,
    <span class="hljs-title class_">ProgressCallback</span>? onSendProgress,
    <span class="hljs-title class_">ProgressCallback</span>? onReceiveProgress,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      final response = <span class="hljs-keyword">await</span> _dio.<span class="hljs-title function_">put</span>(
        uri,
        <span class="hljs-attr">data</span>: data,
        <span class="hljs-attr">queryParameters</span>: queryParameters,
        <span class="hljs-attr">options</span>: options,
        <span class="hljs-attr">cancelToken</span>: cancelToken,
        <span class="hljs-attr">onSendProgress</span>: onSendProgress,
        <span class="hljs-attr">onReceiveProgress</span>: onReceiveProgress,
      );
      <span class="hljs-keyword">return</span> response;
    } on <span class="hljs-title class_">DioException</span> {
      rethrow;
    }
  }

  <span class="hljs-comment">/// * PATCH</span>
  <span class="hljs-title class_">Future</span>&#x3C;<span class="hljs-title class_">Response</span>> <span class="hljs-title function_">patch</span>(
    <span class="hljs-title class_">String</span> uri, {
    data,
    <span class="hljs-title class_">Map</span>&#x3C;<span class="hljs-title class_">String</span>, dynamic>? queryParameters,
    <span class="hljs-title class_">Options</span>? options,
    <span class="hljs-title class_">CancelToken</span>? cancelToken,
    <span class="hljs-title class_">ProgressCallback</span>? onSendProgress,
    <span class="hljs-title class_">ProgressCallback</span>? onReceiveProgress,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      final response = <span class="hljs-keyword">await</span> _dio.<span class="hljs-title function_">patch</span>(
        uri,
        <span class="hljs-attr">data</span>: data,
        <span class="hljs-attr">queryParameters</span>: queryParameters,
        <span class="hljs-attr">options</span>: options,
        <span class="hljs-attr">cancelToken</span>: cancelToken,
        <span class="hljs-attr">onSendProgress</span>: onSendProgress,
        <span class="hljs-attr">onReceiveProgress</span>: onReceiveProgress,
      );
      <span class="hljs-keyword">return</span> response;
    } on <span class="hljs-title class_">DioException</span> {
      rethrow;
    }
  }

  <span class="hljs-comment">/// * DELETE</span>
  <span class="hljs-title class_">Future</span>&#x3C;dynamic> <span class="hljs-title function_">delete</span>(
    <span class="hljs-title class_">String</span> uri, {
    data,
    <span class="hljs-title class_">Map</span>&#x3C;<span class="hljs-title class_">String</span>, dynamic>? queryParameters,
    <span class="hljs-title class_">Options</span>? options,
    <span class="hljs-title class_">CancelToken</span>? cancelToken,
    <span class="hljs-title class_">ProgressCallback</span>? onSendProgress,
    <span class="hljs-title class_">ProgressCallback</span>? onReceiveProgress,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      final response = <span class="hljs-keyword">await</span> _dio.<span class="hljs-title function_">delete</span>(
        uri,
        <span class="hljs-attr">data</span>: data,
        <span class="hljs-attr">queryParameters</span>: queryParameters,
        <span class="hljs-attr">options</span>: options,
        <span class="hljs-attr">cancelToken</span>: cancelToken,
      );
      <span class="hljs-keyword">return</span> response;
    } on <span class="hljs-title class_">DioException</span> {
      rethrow;
    }
  }
}
</code></pre>
<h2>네트워크 오류 모델</h2>
<p>네트워크 오류 모델을 만들어봅시다. 이 모델은 나쁜 응답 오류가 발생할 때 생성되므로 API에서 오류 메시지를 표시할 수 있습니다.</p>
<p>TMDB API의 오류 모델은 아래와 같습니다.</p>
<pre><code class="hljs language-json">@JsonSerializable()
class NetworkErrorModel extends Equatable <span class="hljs-punctuation">{</span>
  @JsonKey(name<span class="hljs-punctuation">:</span> 'status_code')
  final int? statusCode;
  @JsonKey(name<span class="hljs-punctuation">:</span> 'status_message')
  final String? statusMessage;

  const NetworkErrorModel(<span class="hljs-punctuation">{</span>this.statusCode<span class="hljs-punctuation">,</span> this.statusMessage<span class="hljs-punctuation">}</span>);

  factory NetworkErrorModel.fromJson(Map&#x3C;String<span class="hljs-punctuation">,</span> dynamic> json) <span class="hljs-punctuation">{</span>
    return _$NetworkErrorModelFromJson(json);
  <span class="hljs-punctuation">}</span>

  Map&#x3C;String<span class="hljs-punctuation">,</span> dynamic> toJson() => _$NetworkErrorModelToJson(this);

  @override
  List&#x3C;Object?> get props => <span class="hljs-punctuation">[</span>statusCode<span class="hljs-punctuation">,</span> statusMessage<span class="hljs-punctuation">]</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<h2>로컬 데이터베이스</h2>
<p>데이터베이스에 접근하는 클래스를 만들어 봅시다.</p>
<pre><code class="hljs language-json"><span class="hljs-comment">/// 로컬 데이터베이스를 나타내는 클래스.</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// 이 클래스는 Isar 데이터베이스를 초기화하고 액세스하는 방법을 제공합니다.</span>
class LocalDatabase <span class="hljs-punctuation">{</span>
  late final Isar _isar;
  bool _isInitialized = <span class="hljs-literal"><span class="hljs-keyword">false</span></span>;

  <span class="hljs-comment">/// 초기화된 Isar 데이터베이스 인스턴스를 반환합니다.</span>
  <span class="hljs-comment">///</span>
  <span class="hljs-comment">/// 데이터베이스가 초기화되지 않은 경우 [IsarError]를 throw합니다.</span>
  Isar get db => _isInitialized ? _isar <span class="hljs-punctuation">:</span> throw IsarError('Isar가 초기화되지 않았습니다.');

  <span class="hljs-comment">/// Isar 데이터베이스를 초기화합니다.</span>
  <span class="hljs-comment">///</span>
  <span class="hljs-comment">/// 데이터베이스가 이미 초기화된 경우 [IsarError]를 throw합니다.</span>
  Future&#x3C;void> initialize() async <span class="hljs-punctuation">{</span>
    if (_isInitialized) throw IsarError('Isar가 이미 초기화되었습니다.');

    final directory = await getApplicationDocumentsDirectory();
    _isar = await Isar.open(<span class="hljs-punctuation">[</span>MovieDetailCollectionSchema<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> directory<span class="hljs-punctuation">:</span> directory.path);

    _isInitialized = <span class="hljs-literal"><span class="hljs-keyword">true</span></span>;
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2>에러 처리</h2>
<p>DioException을 사용하여 네트워크 오류를 처리하는 클래스를 만들어 보겠습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Equatable</span> implements <span class="hljs-title class_">Exception</span> {
  late final <span class="hljs-title class_">String</span> message;
  late final int? statusCode;

  <span class="hljs-title class_">NetworkException</span>.<span class="hljs-title function_">fromDioError</span>(<span class="hljs-params">DioException dioException</span>) {
    statusCode = dioException.<span class="hljs-property">response</span>?.<span class="hljs-property">statusCode</span>;

    <span class="hljs-keyword">switch</span> (dioException.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">cancel</span>:
        message = <span class="hljs-string">'API 서버로의 요청이 취소되었습니다'</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">connectionTimeout</span>:
        message = <span class="hljs-string">'API 서버와의 연결 시간 초과'</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">receiveTimeout</span>:
        message = <span class="hljs-string">'API 서버와의 연결 중 수신 시간 초과'</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">sendTimeout</span>:
        message = <span class="hljs-string">'API 서버와의 연결 중 송신 시간 초과'</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">connectionError</span>:
        <span class="hljs-keyword">if</span> (dioException.<span class="hljs-property">error</span>.<span class="hljs-property">runtimeType</span> == <span class="hljs-title class_">SocketException</span>) {
          message = <span class="hljs-string">'인터넷 연결을 확인해주세요'</span>;
          <span class="hljs-keyword">break</span>;
        } <span class="hljs-keyword">else</span> {
          message = <span class="hljs-string">'예기치 않은 오류가 발생했습니다'</span>;
          <span class="hljs-keyword">break</span>;
        }

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">badCertificate</span>:
        message = <span class="hljs-string">'잘못된 인증서'</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">badResponse</span>:
        final model = <span class="hljs-title class_">NetworkErrorModel</span>.<span class="hljs-title function_">fromJson</span>(dioException.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Map</span>&#x3C;<span class="hljs-title class_">String</span>, dynamic>);
        message = model.<span class="hljs-property">statusMessage</span> ?? <span class="hljs-string">'예기치 않은 오류가 발생했습니다'</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">DioExceptionType</span>.<span class="hljs-property">unknown</span>:
        message = <span class="hljs-string">'예기치 않은 오류가 발생했습니다'</span>;
        <span class="hljs-keyword">break</span>;
    }
  }

  @override
  <span class="hljs-title class_">List</span>&#x3C;<span class="hljs-title class_">Object</span>?> get props => [message, statusCode];
}
</code></pre>
<p>그리고 IsarError를 사용하여 로컬 데이터베이스 오류를 처리하는 클래스를 만들어 보겠습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Equatable</span> implements <span class="hljs-title class_">Exception</span> {
  late final <span class="hljs-title class_">String</span> message;

  <span class="hljs-title class_">DatabaseException</span>.<span class="hljs-title function_">fromIsarError</span>(<span class="hljs-title class_">IsarError</span> isarError) : message = isarError.<span class="hljs-property">message</span>;

  @override
  <span class="hljs-title class_">List</span>&#x3C;<span class="hljs-title class_">Object</span>?> get props => [message];
}
</code></pre>
<p>알겠어요! 여기까지입니다. 이 부분에서는 여기까지 언급할 거예요.</p>
<p>이제 Clean Architecture에 대해 준비되었습니다.</p>
<p>다음 파트</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Flutter의 Clean Architecture 파트1 - 소개","description":"","date":"2024-06-20 13:46","slug":"2024-06-20-FlutterCleanArchitecturePart1Introduction","content":"\n\n\n![image](/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png)\n\n소프트웨어 개발에서는 체계적이고 유지보수 가능한 코드베이스를 유지하는 것이 매우 중요합니다. 이때 Clean Architecture가 등장하여 코드베이스를 모듈식, 독립적이고 테스트 가능한 방식으로 구성하는 데 도움을 줍니다. 이 글에서는 Clean Architecture가 무엇인지, Flutter에서 어떻게 구현하는지, 그리고 프로젝트에 어떤 이점을 가져다 줄 수 있는지 살펴보겠습니다.\n\n커피를 마시고 준비하세요! 오랜 여정이 시작됩니다.\n\n## Flutter에서 Clean Architecture를 사용해야 하는 이유\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n클린 아키텍처는 모듈화, 유지보수 가능성, 테스트 가능성을 향상시켜 주는 소프트웨어 설계 철학입니다. 각 층으로 코드를 분리하여 애플리케이션을 구조화하며, 크고 복잡한 앱에 특히 유용합니다.\n\n## 장점\n\n- 모듈성과 독립성: 애플리케이션을 독립적인 부분으로 분할하고 각각을 별도로 관리 및 개발합니다.\n- 쉬운 테스트 가능성: 비즈니스 로직을 독립적으로 테스트하여 오류를 감지하기 쉽습니다.\n- 테스트 주도 개발 (TDD): TDD 원칙과 잘 부합합니다. 먼저 비즈니스 로직에 대한 테스트를 작성한 후 그 테스트를 통과할 코드를 구현할 수 있습니다.\n- 미래 확장성: 새로운 기능을 추가하거나 기존 기능을 수정하는 데 더 적은 노력이 필요합니다.\n- 재사용성: 비즈니스 로직을 다른 프로젝트나 플랫폼에서 재사용할 수 있습니다.\n- 관심사 분리: 비즈니스 로직과 사용자 인터페이스 (UI) 사이의 명확한 경계를 유지함으로써 팀 구성을 더 잘 조직화할 수 있습니다.\n- 유지보수 용이성: 층 간 의존성을 줄여 코드 유지보수를 단순화합니다.\n- 변경에 대한 유연성: 데이터 소스나 서비스를 변경하기 쉽게 합니다.\n- 좋은 문서화: 프로젝트 이해와 유지보수를 위해 구조와 작동원리를 명확히 정의합니다.\n\n클린 아키텍처는 데이터층, 도메인층, 프레젠테이션 층으로 구성되어 있습니다. 각 층은 구별된 책임과 제한된 의존성을 가지고 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![이미지](/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_1.png)\n\n코딩을 시작하기 전에 짧게 예제에 대해 설명하겠습니다:\n\nTMDB 플랫폼의 API를 사용하여 기본 영화 애플리케이션을 구축할 예정입니다. 이 응용 프로그램은 API에서 인기 있는 및 최상위 영화 목록을 검색하고 표시할 것입니다. 사용자는 배우 세부 정보를 포함한 영화 정보에 액세스할 수 있습니다.\n\n![이미지](https://miro.medium.com/v2/resize:fit:600/1*opIWWgVq6ZlP_x5sdV0LDA.gif)\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n사용할 패키지 목록\n\n```js\ndependencies:\n  # 라우팅을 위해 =\u003e https://pub.dev/packages/auto_route\n  auto_route: ^7.8.3\n\n  # 이미지 캐싱을 위해 =\u003e https://pub.dev/packages/cached_network_image\n  cached_network_image: ^3.3.0\n\n  # 네트워크 요청을 위해 =\u003e https://pub.dev/packages/dio\n  dio: ^5.3.3\n\n  # 동등성을 위해 =\u003e https://pub.dev/packages/equatable\n  equatable: ^2.0.5\n\n  # 테마를 위해 =\u003e https://pub.dev/packages/flex_color_scheme\n  flex_color_scheme: ^7.3.1\n\n  flutter:\n    sdk: flutter\n\n  # 상태 관리를 위해 =\u003e https://pub.dev/packages/flutter_bloc\n  flutter_bloc: ^8.1.3\n\n  # 환경 변수를 위해 =\u003e https://pub.dev/packages/flutter_dotenv\n  flutter_dotenv: ^5.1.0\n\n  # 자산 코드 생성을 위해 =\u003e https://pub.dev/packages/flutter_gen\n  flutter_gen: ^5.4.0\n\n  # 유용한 훅을 위해 =\u003e https://pub.dev/packages/flutter_hooks\n  flutter_hooks: ^0.20.3\n\n  # 책임성을 위해 =\u003e https://pub.dev/packages/flutter_screenutil\n  flutter_screenutil: ^5.9.0\n\n  # SVG를 위해 =\u003e https://pub.dev/packages/flutter_svg\n  flutter_svg: ^2.0.9\n\n  # 함수형 프로그래밍을 위해 =\u003e https://pub.dev/packages/fpdart\n  fpdart: ^1.1.0\n\n  # 의존성 주입을 위해 =\u003e https://pub.dev/packages/get_it\n  get_it: ^7.6.4\n\n  # 테마 또는 로캘 관리를 위해 =\u003e https://pub.dev/packages/hydrated_bloc\n  hydrated_bloc: ^9.1.2\n\n  intl: ^0.19.0\n\n  # 로컬 데이터 소스를 위해\n  isar: ^3.1.0+1\n  isar_flutter_libs: ^3.1.0+1\n\n  # API 모델 생성을 위해 =\u003e https://pub.dev/packages/json_annotation\n  json_annotation: ^4.8.1\n\n  # 앱 데이터 디렉토리\n  path_provider: ^2.1.1\n\n  # 개발자를 위한 dio 인터셉터 =\u003e https://pub.dev/packages/pretty_dio_logger\n  pretty_dio_logger: ^1.3.1\n\n  # 반짝거림 효과를 위해 =\u003e https://pub.dev/packages/shimmer\n  shimmer: ^3.0.0\n\n  # URL 런처를 위해 =\u003e https://pub.dev/packages/url_launcher\n  url_launcher: ^6.2.2\n\ndev_dependencies:\n  # auto_route 생성기 =\u003e https://pub.dev/packages/auto_route_generator\n  auto_route_generator: ^7.3.1\n\n  # bloc 테스트를 위해 =\u003e https://pub.dev/packages/bloc_test\n  bloc_test: ^9.1.4\n\n  build_runner: ^2.4.6\n  flutter_gen_runner: ^5.4.0\n  flutter_lints: ^3.0.1\n  flutter_test:\n    sdk: flutter\n\n  # 로컬 데이터 소스\n  isar_generator: ^3.1.0+1\n\n  # API 모델 생성을 위해 =\u003e https://pub.dev/packages/json_serializable\n  json_serializable: ^6.7.1\n\n  # 테스트를 위해 =\u003e https://pub.dev/packages/mockito\n  mockito: ^5.4.4\n```\n\n## HTTP 요청\n\nflutter_dotenv 패키지를 사용하여 간단한 애플리케이션 상수 클래스를 만들어 봅시다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nclass AppConstants {\n  final baseUrl = '${dotenv.env['BASE_URL']}'; //* https://api.themoviedb.org/3\n  final apiToken = '${dotenv.env['API_TOKEN']}'; //* your TMDB token. (sign up here https://developer.themoviedb.org/docs)\n}\n```\n\nHTTP 요청을 위한 클래스를 만들어 봅시다. DioClient 클래스는 API 요청을 보내고 json 데이터를 반환할 것입니다. 여기서 주요 목적은 DioClient 클래스를 get, post, put, patch, delete 메서드로 제한하는 것입니다.\n\n저희 애플리케이션에서는 하나의 API만 사용할 것이므로, Dio를 사용하기 때문에 DioClient라고 이름 짓겠습니다. 애플리케이션이 여러 개의 API와 통신해야 하는 경우, HTTP 요청을 보내는 DioClient와 유사한 클래스가 필요합니다. 이것은 각 네트워크 클래스가 관련된 데이터 원본과 관련되어야 하기 때문입니다.\n\n예를 들어, 영화 데이터에 대해 TMDB API를 사용하고 배우에 대해 BlaBla API를 사용하는 경우, 명명 규칙에 유의해야 합니다. 네이밍의 예시로는 TmdbNetworkManager, BlaBlaClient, CatClient 등이 있을 수 있습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nclass DioClient {\n  Dio _dio;\n\n  DioClient() {\n    _dio = Dio();\n    _dio\n      ..options.baseUrl = AppConstants.baseUrl\n      ..options.headers = {\n        HttpHeaders.contentTypeHeader: ContentType.json.mimeType,\n        HttpHeaders.authorizationHeader: 'Bearer ${AppConstants.apiToken}',\n      }\n      ..options.connectTimeout = const Duration(milliseconds: 15000)\n      ..options.receiveTimeout = const Duration(milliseconds: 15000)\n      ..options.responseType = ResponseType.json\n      ..interceptors.add(\n        PrettyDioLogger(\n          compact: false,\n          logPrint: (object) =\u003e log(object.toString(), name: 'TMDB API'),\n        ),\n      );\n  }\n\n  /// * GET\n  Future\u003cResponse\u003e get(\n    String url, {\n    Map\u003cString, dynamic\u003e? queryParameters,\n    Options? options,\n    CancelToken? cancelToken,\n    ProgressCallback? onReceiveProgress,\n  }) async {\n    try {\n      final response = await _dio.get(\n        url,\n        queryParameters: queryParameters,\n        options: options,\n        cancelToken: cancelToken,\n        onReceiveProgress: onReceiveProgress,\n      );\n      return response;\n    } on DioException {\n      rethrow;\n    }\n  }\n\n  /// * POST\n  Future\u003cResponse\u003e post(\n    String uri, {\n    data,\n    Map\u003cString, dynamic\u003e? queryParameters,\n    Options? options,\n    CancelToken? cancelToken,\n    ProgressCallback? onSendProgress,\n    ProgressCallback? onReceiveProgress,\n  }) async {\n    try {\n      final response = await _dio.post(\n        uri,\n        data: data,\n        queryParameters: queryParameters,\n        options: options,\n        cancelToken: cancelToken,\n        onSendProgress: onSendProgress,\n        onReceiveProgress: onReceiveProgress,\n      );\n      return response;\n    } on DioException {\n      rethrow;\n    }\n  }\n\n  /// * PUT\n  Future\u003cResponse\u003e put(\n    String uri, {\n    data,\n    Map\u003cString, dynamic\u003e? queryParameters,\n    Options? options,\n    CancelToken? cancelToken,\n    ProgressCallback? onSendProgress,\n    ProgressCallback? onReceiveProgress,\n  }) async {\n    try {\n      final response = await _dio.put(\n        uri,\n        data: data,\n        queryParameters: queryParameters,\n        options: options,\n        cancelToken: cancelToken,\n        onSendProgress: onSendProgress,\n        onReceiveProgress: onReceiveProgress,\n      );\n      return response;\n    } on DioException {\n      rethrow;\n    }\n  }\n\n  /// * PATCH\n  Future\u003cResponse\u003e patch(\n    String uri, {\n    data,\n    Map\u003cString, dynamic\u003e? queryParameters,\n    Options? options,\n    CancelToken? cancelToken,\n    ProgressCallback? onSendProgress,\n    ProgressCallback? onReceiveProgress,\n  }) async {\n    try {\n      final response = await _dio.patch(\n        uri,\n        data: data,\n        queryParameters: queryParameters,\n        options: options,\n        cancelToken: cancelToken,\n        onSendProgress: onSendProgress,\n        onReceiveProgress: onReceiveProgress,\n      );\n      return response;\n    } on DioException {\n      rethrow;\n    }\n  }\n\n  /// * DELETE\n  Future\u003cdynamic\u003e delete(\n    String uri, {\n    data,\n    Map\u003cString, dynamic\u003e? queryParameters,\n    Options? options,\n    CancelToken? cancelToken,\n    ProgressCallback? onSendProgress,\n    ProgressCallback? onReceiveProgress,\n  }) async {\n    try {\n      final response = await _dio.delete(\n        uri,\n        data: data,\n        queryParameters: queryParameters,\n        options: options,\n        cancelToken: cancelToken,\n      );\n      return response;\n    } on DioException {\n      rethrow;\n    }\n  }\n}\n```\n\n## 네트워크 오류 모델\n\n네트워크 오류 모델을 만들어봅시다. 이 모델은 나쁜 응답 오류가 발생할 때 생성되므로 API에서 오류 메시지를 표시할 수 있습니다.\n\nTMDB API의 오류 모델은 아래와 같습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```json\n@JsonSerializable()\nclass NetworkErrorModel extends Equatable {\n  @JsonKey(name: 'status_code')\n  final int? statusCode;\n  @JsonKey(name: 'status_message')\n  final String? statusMessage;\n\n  const NetworkErrorModel({this.statusCode, this.statusMessage});\n\n  factory NetworkErrorModel.fromJson(Map\u003cString, dynamic\u003e json) {\n    return _$NetworkErrorModelFromJson(json);\n  }\n\n  Map\u003cString, dynamic\u003e toJson() =\u003e _$NetworkErrorModelToJson(this);\n\n  @override\n  List\u003cObject?\u003e get props =\u003e [statusCode, statusMessage];\n}\n```\n\n## 로컬 데이터베이스\n\n데이터베이스에 접근하는 클래스를 만들어 봅시다.\n\n```json\n/// 로컬 데이터베이스를 나타내는 클래스.\n///\n/// 이 클래스는 Isar 데이터베이스를 초기화하고 액세스하는 방법을 제공합니다.\nclass LocalDatabase {\n  late final Isar _isar;\n  bool _isInitialized = false;\n\n  /// 초기화된 Isar 데이터베이스 인스턴스를 반환합니다.\n  ///\n  /// 데이터베이스가 초기화되지 않은 경우 [IsarError]를 throw합니다.\n  Isar get db =\u003e _isInitialized ? _isar : throw IsarError('Isar가 초기화되지 않았습니다.');\n\n  /// Isar 데이터베이스를 초기화합니다.\n  ///\n  /// 데이터베이스가 이미 초기화된 경우 [IsarError]를 throw합니다.\n  Future\u003cvoid\u003e initialize() async {\n    if (_isInitialized) throw IsarError('Isar가 이미 초기화되었습니다.');\n\n    final directory = await getApplicationDocumentsDirectory();\n    _isar = await Isar.open([MovieDetailCollectionSchema], directory: directory.path);\n\n    _isInitialized = true;\n  }\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 에러 처리\n\nDioException을 사용하여 네트워크 오류를 처리하는 클래스를 만들어 보겠습니다.\n\n```js\nclass NetworkException extends Equatable implements Exception {\n  late final String message;\n  late final int? statusCode;\n\n  NetworkException.fromDioError(DioException dioException) {\n    statusCode = dioException.response?.statusCode;\n\n    switch (dioException.type) {\n      case DioExceptionType.cancel:\n        message = 'API 서버로의 요청이 취소되었습니다';\n        break;\n\n      case DioExceptionType.connectionTimeout:\n        message = 'API 서버와의 연결 시간 초과';\n        break;\n\n      case DioExceptionType.receiveTimeout:\n        message = 'API 서버와의 연결 중 수신 시간 초과';\n        break;\n\n      case DioExceptionType.sendTimeout:\n        message = 'API 서버와의 연결 중 송신 시간 초과';\n        break;\n\n      case DioExceptionType.connectionError:\n        if (dioException.error.runtimeType == SocketException) {\n          message = '인터넷 연결을 확인해주세요';\n          break;\n        } else {\n          message = '예기치 않은 오류가 발생했습니다';\n          break;\n        }\n\n      case DioExceptionType.badCertificate:\n        message = '잘못된 인증서';\n        break;\n\n      case DioExceptionType.badResponse:\n        final model = NetworkErrorModel.fromJson(dioException.response?.data as Map\u003cString, dynamic\u003e);\n        message = model.statusMessage ?? '예기치 않은 오류가 발생했습니다';\n        break;\n\n      case DioExceptionType.unknown:\n        message = '예기치 않은 오류가 발생했습니다';\n        break;\n    }\n  }\n\n  @override\n  List\u003cObject?\u003e get props =\u003e [message, statusCode];\n}\n```\n\n그리고 IsarError를 사용하여 로컬 데이터베이스 오류를 처리하는 클래스를 만들어 보겠습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nclass DatabaseException extends Equatable implements Exception {\n  late final String message;\n\n  DatabaseException.fromIsarError(IsarError isarError) : message = isarError.message;\n\n  @override\n  List\u003cObject?\u003e get props =\u003e [message];\n}\n```\n\n알겠어요! 여기까지입니다. 이 부분에서는 여기까지 언급할 거예요.\n\n이제 Clean Architecture에 대해 준비되었습니다.\n\n다음 파트\n","ogImage":{"url":"/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png"},"coverImage":"/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png","tag":["Tech"],"readingTime":12},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e소프트웨어 개발에서는 체계적이고 유지보수 가능한 코드베이스를 유지하는 것이 매우 중요합니다. 이때 Clean Architecture가 등장하여 코드베이스를 모듈식, 독립적이고 테스트 가능한 방식으로 구성하는 데 도움을 줍니다. 이 글에서는 Clean Architecture가 무엇인지, Flutter에서 어떻게 구현하는지, 그리고 프로젝트에 어떤 이점을 가져다 줄 수 있는지 살펴보겠습니다.\u003c/p\u003e\n\u003cp\u003e커피를 마시고 준비하세요! 오랜 여정이 시작됩니다.\u003c/p\u003e\n\u003ch2\u003eFlutter에서 Clean Architecture를 사용해야 하는 이유\u003c/h2\u003e\n\u003cp\u003e클린 아키텍처는 모듈화, 유지보수 가능성, 테스트 가능성을 향상시켜 주는 소프트웨어 설계 철학입니다. 각 층으로 코드를 분리하여 애플리케이션을 구조화하며, 크고 복잡한 앱에 특히 유용합니다.\u003c/p\u003e\n\u003ch2\u003e장점\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e모듈성과 독립성: 애플리케이션을 독립적인 부분으로 분할하고 각각을 별도로 관리 및 개발합니다.\u003c/li\u003e\n\u003cli\u003e쉬운 테스트 가능성: 비즈니스 로직을 독립적으로 테스트하여 오류를 감지하기 쉽습니다.\u003c/li\u003e\n\u003cli\u003e테스트 주도 개발 (TDD): TDD 원칙과 잘 부합합니다. 먼저 비즈니스 로직에 대한 테스트를 작성한 후 그 테스트를 통과할 코드를 구현할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e미래 확장성: 새로운 기능을 추가하거나 기존 기능을 수정하는 데 더 적은 노력이 필요합니다.\u003c/li\u003e\n\u003cli\u003e재사용성: 비즈니스 로직을 다른 프로젝트나 플랫폼에서 재사용할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e관심사 분리: 비즈니스 로직과 사용자 인터페이스 (UI) 사이의 명확한 경계를 유지함으로써 팀 구성을 더 잘 조직화할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e유지보수 용이성: 층 간 의존성을 줄여 코드 유지보수를 단순화합니다.\u003c/li\u003e\n\u003cli\u003e변경에 대한 유연성: 데이터 소스나 서비스를 변경하기 쉽게 합니다.\u003c/li\u003e\n\u003cli\u003e좋은 문서화: 프로젝트 이해와 유지보수를 위해 구조와 작동원리를 명확히 정의합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e클린 아키텍처는 데이터층, 도메인층, 프레젠테이션 층으로 구성되어 있습니다. 각 층은 구별된 책임과 제한된 의존성을 가지고 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-FlutterCleanArchitecturePart1Introduction_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e코딩을 시작하기 전에 짧게 예제에 대해 설명하겠습니다:\u003c/p\u003e\n\u003cp\u003eTMDB 플랫폼의 API를 사용하여 기본 영화 애플리케이션을 구축할 예정입니다. 이 응용 프로그램은 API에서 인기 있는 및 최상위 영화 목록을 검색하고 표시할 것입니다. 사용자는 배우 세부 정보를 포함한 영화 정보에 액세스할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:600/1*opIWWgVq6ZlP_x5sdV0LDA.gif\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e사용할 패키지 목록\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003edependencies\u003c/span\u003e:\n  # 라우팅을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/auto_route\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eauto_route\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e7.8\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n\n  # 이미지 캐싱을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/cached_network_image\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ecached_network_image\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e3.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # 네트워크 요청을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/dio\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edio\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e5.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n\n  # 동등성을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/equatable\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eequatable\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.5\u003c/span\u003e\n\n  # 테마를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flex_color_scheme\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflex_color_scheme\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e7.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003eflutter\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003esdk\u003c/span\u003e: flutter\n\n  # 상태 관리를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flutter_bloc\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_bloc\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e8.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n\n  # 환경 변수를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flutter_dotenv\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_dotenv\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e5.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # 자산 코드 생성을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flutter_gen\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_gen\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e5.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # 유용한 훅을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flutter_hooks\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_hooks\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e0.20\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n\n  # 책임성을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flutter_screenutil\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_screenutil\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e5.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # \u003cspan class=\"hljs-variable constant_\"\u003eSVG\u003c/span\u003e를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/flutter_svg\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_svg\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.9\u003c/span\u003e\n\n  # 함수형 프로그래밍을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/fpdart\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003efpdart\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e1.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # 의존성 주입을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/get_it\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eget_it\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e7.6\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n\n  # 테마 또는 로캘 관리를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/hydrated_bloc\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehydrated_bloc\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e9.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003eintl\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e0.19\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # 로컬 데이터 소스를 위해\n  \u003cspan class=\"hljs-attr\"\u003eisar\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e3.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e+\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eisar_flutter_libs\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e3.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e+\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\n  # \u003cspan class=\"hljs-variable constant_\"\u003eAPI\u003c/span\u003e 모델 생성을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/json_annotation\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ejson_annotation\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e4.8\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\n  # 앱 데이터 디렉토리\n  \u003cspan class=\"hljs-attr\"\u003epath_provider\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e2.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\n  # 개발자를 위한 dio 인터셉터 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/pretty_dio_logger\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epretty_dio_logger\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e1.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\n  # 반짝거림 효과를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/shimmer\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eshimmer\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n  # \u003cspan class=\"hljs-variable constant_\"\u003eURL\u003c/span\u003e 런처를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/url_launcher\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eurl_launcher\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e6.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003edev_dependencies\u003c/span\u003e:\n  # auto_route 생성기 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/auto_route_generator\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eauto_route_generator\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e7.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\n  # bloc 테스트를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/bloc_test\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebloc_test\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e9.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003ebuild_runner\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_gen_runner\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e5.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_lints\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_test\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003esdk\u003c/span\u003e: flutter\n\n  # 로컬 데이터 소스\n  \u003cspan class=\"hljs-attr\"\u003eisar_generator\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e3.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e+\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\n  # \u003cspan class=\"hljs-variable constant_\"\u003eAPI\u003c/span\u003e 모델 생성을 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/json_serializable\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ejson_serializable\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e6.7\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\n  # 테스트를 위해 =\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pub.dev/packages/mockito\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emockito\u003c/span\u003e: ^\u003cspan class=\"hljs-number\"\u003e5.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eHTTP 요청\u003c/h2\u003e\n\u003cp\u003eflutter_dotenv 패키지를 사용하여 간단한 애플리케이션 상수 클래스를 만들어 봅시다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppConstants\u003c/span\u003e {\n  final baseUrl = \u003cspan class=\"hljs-string\"\u003e'${dotenv.env['\u003c/span\u003e\u003cspan class=\"hljs-variable constant_\"\u003eBASE_URL\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e']}'\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e//* https://api.themoviedb.org/3\u003c/span\u003e\n  final apiToken = \u003cspan class=\"hljs-string\"\u003e'${dotenv.env['\u003c/span\u003e\u003cspan class=\"hljs-variable constant_\"\u003eAPI_TOKEN\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e']}'\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e//* your TMDB token. (sign up here https://developer.themoviedb.org/docs)\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHTTP 요청을 위한 클래스를 만들어 봅시다. DioClient 클래스는 API 요청을 보내고 json 데이터를 반환할 것입니다. 여기서 주요 목적은 DioClient 클래스를 get, post, put, patch, delete 메서드로 제한하는 것입니다.\u003c/p\u003e\n\u003cp\u003e저희 애플리케이션에서는 하나의 API만 사용할 것이므로, Dio를 사용하기 때문에 DioClient라고 이름 짓겠습니다. 애플리케이션이 여러 개의 API와 통신해야 하는 경우, HTTP 요청을 보내는 DioClient와 유사한 클래스가 필요합니다. 이것은 각 네트워크 클래스가 관련된 데이터 원본과 관련되어야 하기 때문입니다.\u003c/p\u003e\n\u003cp\u003e예를 들어, 영화 데이터에 대해 TMDB API를 사용하고 배우에 대해 BlaBla API를 사용하는 경우, 명명 규칙에 유의해야 합니다. 네이밍의 예시로는 TmdbNetworkManager, BlaBlaClient, CatClient 등이 있을 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioClient\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eDio\u003c/span\u003e _dio;\n\n  \u003cspan class=\"hljs-title class_\"\u003eDioClient\u003c/span\u003e() {\n    _dio = \u003cspan class=\"hljs-title class_\"\u003eDio\u003c/span\u003e();\n    _dio\n      ..\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebaseUrl\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eAppConstants\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebaseUrl\u003c/span\u003e\n      ..\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e = {\n        \u003cspan class=\"hljs-title class_\"\u003eHttpHeaders\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econtentTypeHeader\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eContentType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emimeType\u003c/span\u003e,\n        \u003cspan class=\"hljs-title class_\"\u003eHttpHeaders\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthorizationHeader\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Bearer ${AppConstants.apiToken}'\u003c/span\u003e,\n      }\n      ..\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econnectTimeout\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDuration\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emilliseconds\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e15000\u003c/span\u003e)\n      ..\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ereceiveTimeout\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDuration\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emilliseconds\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e15000\u003c/span\u003e)\n      ..\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eresponseType\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eResponseType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n      ..\u003cspan class=\"hljs-property\"\u003einterceptors\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eadd\u003c/span\u003e(\n        \u003cspan class=\"hljs-title class_\"\u003ePrettyDioLogger\u003c/span\u003e(\n          \u003cspan class=\"hljs-attr\"\u003ecompact\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003elogPrint\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobject\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(object.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e(), \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'TMDB API'\u003c/span\u003e),\n        ),\n      );\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e/// * GET\u003c/span\u003e\n  \u003cspan class=\"hljs-title class_\"\u003eFuture\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e\u003e \u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\n    \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e url, {\n    \u003cspan class=\"hljs-title class_\"\u003eMap\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e, dynamic\u003e? queryParameters,\n    \u003cspan class=\"hljs-title class_\"\u003eOptions\u003c/span\u003e? options,\n    \u003cspan class=\"hljs-title class_\"\u003eCancelToken\u003c/span\u003e? cancelToken,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onReceiveProgress,\n  }) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      final response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e _dio.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\n        url,\n        \u003cspan class=\"hljs-attr\"\u003equeryParameters\u003c/span\u003e: queryParameters,\n        \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: options,\n        \u003cspan class=\"hljs-attr\"\u003ecancelToken\u003c/span\u003e: cancelToken,\n        \u003cspan class=\"hljs-attr\"\u003eonReceiveProgress\u003c/span\u003e: onReceiveProgress,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response;\n    } on \u003cspan class=\"hljs-title class_\"\u003eDioException\u003c/span\u003e {\n      rethrow;\n    }\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e/// * POST\u003c/span\u003e\n  \u003cspan class=\"hljs-title class_\"\u003eFuture\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e\u003e \u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\n    \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e uri, {\n    data,\n    \u003cspan class=\"hljs-title class_\"\u003eMap\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e, dynamic\u003e? queryParameters,\n    \u003cspan class=\"hljs-title class_\"\u003eOptions\u003c/span\u003e? options,\n    \u003cspan class=\"hljs-title class_\"\u003eCancelToken\u003c/span\u003e? cancelToken,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onSendProgress,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onReceiveProgress,\n  }) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      final response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e _dio.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\n        uri,\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data,\n        \u003cspan class=\"hljs-attr\"\u003equeryParameters\u003c/span\u003e: queryParameters,\n        \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: options,\n        \u003cspan class=\"hljs-attr\"\u003ecancelToken\u003c/span\u003e: cancelToken,\n        \u003cspan class=\"hljs-attr\"\u003eonSendProgress\u003c/span\u003e: onSendProgress,\n        \u003cspan class=\"hljs-attr\"\u003eonReceiveProgress\u003c/span\u003e: onReceiveProgress,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response;\n    } on \u003cspan class=\"hljs-title class_\"\u003eDioException\u003c/span\u003e {\n      rethrow;\n    }\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e/// * PUT\u003c/span\u003e\n  \u003cspan class=\"hljs-title class_\"\u003eFuture\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e\u003e \u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\n    \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e uri, {\n    data,\n    \u003cspan class=\"hljs-title class_\"\u003eMap\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e, dynamic\u003e? queryParameters,\n    \u003cspan class=\"hljs-title class_\"\u003eOptions\u003c/span\u003e? options,\n    \u003cspan class=\"hljs-title class_\"\u003eCancelToken\u003c/span\u003e? cancelToken,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onSendProgress,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onReceiveProgress,\n  }) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      final response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e _dio.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\n        uri,\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data,\n        \u003cspan class=\"hljs-attr\"\u003equeryParameters\u003c/span\u003e: queryParameters,\n        \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: options,\n        \u003cspan class=\"hljs-attr\"\u003ecancelToken\u003c/span\u003e: cancelToken,\n        \u003cspan class=\"hljs-attr\"\u003eonSendProgress\u003c/span\u003e: onSendProgress,\n        \u003cspan class=\"hljs-attr\"\u003eonReceiveProgress\u003c/span\u003e: onReceiveProgress,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response;\n    } on \u003cspan class=\"hljs-title class_\"\u003eDioException\u003c/span\u003e {\n      rethrow;\n    }\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e/// * PATCH\u003c/span\u003e\n  \u003cspan class=\"hljs-title class_\"\u003eFuture\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e\u003e \u003cspan class=\"hljs-title function_\"\u003epatch\u003c/span\u003e(\n    \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e uri, {\n    data,\n    \u003cspan class=\"hljs-title class_\"\u003eMap\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e, dynamic\u003e? queryParameters,\n    \u003cspan class=\"hljs-title class_\"\u003eOptions\u003c/span\u003e? options,\n    \u003cspan class=\"hljs-title class_\"\u003eCancelToken\u003c/span\u003e? cancelToken,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onSendProgress,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onReceiveProgress,\n  }) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      final response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e _dio.\u003cspan class=\"hljs-title function_\"\u003epatch\u003c/span\u003e(\n        uri,\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data,\n        \u003cspan class=\"hljs-attr\"\u003equeryParameters\u003c/span\u003e: queryParameters,\n        \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: options,\n        \u003cspan class=\"hljs-attr\"\u003ecancelToken\u003c/span\u003e: cancelToken,\n        \u003cspan class=\"hljs-attr\"\u003eonSendProgress\u003c/span\u003e: onSendProgress,\n        \u003cspan class=\"hljs-attr\"\u003eonReceiveProgress\u003c/span\u003e: onReceiveProgress,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response;\n    } on \u003cspan class=\"hljs-title class_\"\u003eDioException\u003c/span\u003e {\n      rethrow;\n    }\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e/// * DELETE\u003c/span\u003e\n  \u003cspan class=\"hljs-title class_\"\u003eFuture\u003c/span\u003e\u0026#x3C;dynamic\u003e \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\n    \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e uri, {\n    data,\n    \u003cspan class=\"hljs-title class_\"\u003eMap\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e, dynamic\u003e? queryParameters,\n    \u003cspan class=\"hljs-title class_\"\u003eOptions\u003c/span\u003e? options,\n    \u003cspan class=\"hljs-title class_\"\u003eCancelToken\u003c/span\u003e? cancelToken,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onSendProgress,\n    \u003cspan class=\"hljs-title class_\"\u003eProgressCallback\u003c/span\u003e? onReceiveProgress,\n  }) \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      final response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e _dio.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\n        uri,\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data,\n        \u003cspan class=\"hljs-attr\"\u003equeryParameters\u003c/span\u003e: queryParameters,\n        \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: options,\n        \u003cspan class=\"hljs-attr\"\u003ecancelToken\u003c/span\u003e: cancelToken,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response;\n    } on \u003cspan class=\"hljs-title class_\"\u003eDioException\u003c/span\u003e {\n      rethrow;\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e네트워크 오류 모델\u003c/h2\u003e\n\u003cp\u003e네트워크 오류 모델을 만들어봅시다. 이 모델은 나쁜 응답 오류가 발생할 때 생성되므로 API에서 오류 메시지를 표시할 수 있습니다.\u003c/p\u003e\n\u003cp\u003eTMDB API의 오류 모델은 아래와 같습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e@JsonSerializable()\nclass NetworkErrorModel extends Equatable \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  @JsonKey(name\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e 'status_code')\n  final int? statusCode;\n  @JsonKey(name\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e 'status_message')\n  final String? statusMessage;\n\n  const NetworkErrorModel(\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003ethis.statusCode\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e this.statusMessage\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e);\n\n  factory NetworkErrorModel.fromJson(Map\u0026#x3C;String\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e dynamic\u003e json) \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    return _$NetworkErrorModelFromJson(json);\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\n  Map\u0026#x3C;String\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e dynamic\u003e toJson() =\u003e _$NetworkErrorModelToJson(this);\n\n  @override\n  List\u0026#x3C;Object?\u003e get props =\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003estatusCode\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e statusMessage\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e;\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e로컬 데이터베이스\u003c/h2\u003e\n\u003cp\u003e데이터베이스에 접근하는 클래스를 만들어 봅시다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-comment\"\u003e/// 로컬 데이터베이스를 나타내는 클래스.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e///\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e/// 이 클래스는 Isar 데이터베이스를 초기화하고 액세스하는 방법을 제공합니다.\u003c/span\u003e\nclass LocalDatabase \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  late final Isar _isar;\n  bool _isInitialized = \u003cspan class=\"hljs-literal\"\u003e\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-comment\"\u003e/// 초기화된 Isar 데이터베이스 인스턴스를 반환합니다.\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e///\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e/// 데이터베이스가 초기화되지 않은 경우 [IsarError]를 throw합니다.\u003c/span\u003e\n  Isar get db =\u003e _isInitialized ? _isar \u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e throw IsarError('Isar가 초기화되지 않았습니다.');\n\n  \u003cspan class=\"hljs-comment\"\u003e/// Isar 데이터베이스를 초기화합니다.\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e///\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e/// 데이터베이스가 이미 초기화된 경우 [IsarError]를 throw합니다.\u003c/span\u003e\n  Future\u0026#x3C;void\u003e initialize() async \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    if (_isInitialized) throw IsarError('Isar가 이미 초기화되었습니다.');\n\n    final directory = await getApplicationDocumentsDirectory();\n    _isar = await Isar.open(\u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003eMovieDetailCollectionSchema\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e directory\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e directory.path);\n\n    _isInitialized = \u003cspan class=\"hljs-literal\"\u003e\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e에러 처리\u003c/h2\u003e\n\u003cp\u003eDioException을 사용하여 네트워크 오류를 처리하는 클래스를 만들어 보겠습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNetworkException\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eEquatable\u003c/span\u003e implements \u003cspan class=\"hljs-title class_\"\u003eException\u003c/span\u003e {\n  late final \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e message;\n  late final int? statusCode;\n\n  \u003cspan class=\"hljs-title class_\"\u003eNetworkException\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efromDioError\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eDioException dioException\u003c/span\u003e) {\n    statusCode = dioException.\u003cspan class=\"hljs-property\"\u003eresponse\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003estatusCode\u003c/span\u003e;\n\n    \u003cspan class=\"hljs-keyword\"\u003eswitch\u003c/span\u003e (dioException.\u003cspan class=\"hljs-property\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecancel\u003c/span\u003e:\n        message = \u003cspan class=\"hljs-string\"\u003e'API 서버로의 요청이 취소되었습니다'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econnectionTimeout\u003c/span\u003e:\n        message = \u003cspan class=\"hljs-string\"\u003e'API 서버와의 연결 시간 초과'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ereceiveTimeout\u003c/span\u003e:\n        message = \u003cspan class=\"hljs-string\"\u003e'API 서버와의 연결 중 수신 시간 초과'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003esendTimeout\u003c/span\u003e:\n        message = \u003cspan class=\"hljs-string\"\u003e'API 서버와의 연결 중 송신 시간 초과'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003econnectionError\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (dioException.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eruntimeType\u003c/span\u003e == \u003cspan class=\"hljs-title class_\"\u003eSocketException\u003c/span\u003e) {\n          message = \u003cspan class=\"hljs-string\"\u003e'인터넷 연결을 확인해주세요'\u003c/span\u003e;\n          \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n          message = \u003cspan class=\"hljs-string\"\u003e'예기치 않은 오류가 발생했습니다'\u003c/span\u003e;\n          \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n        }\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebadCertificate\u003c/span\u003e:\n        message = \u003cspan class=\"hljs-string\"\u003e'잘못된 인증서'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebadResponse\u003c/span\u003e:\n        final model = \u003cspan class=\"hljs-title class_\"\u003eNetworkErrorModel\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efromJson\u003c/span\u003e(dioException.\u003cspan class=\"hljs-property\"\u003eresponse\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMap\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e, dynamic\u003e);\n        message = model.\u003cspan class=\"hljs-property\"\u003estatusMessage\u003c/span\u003e ?? \u003cspan class=\"hljs-string\"\u003e'예기치 않은 오류가 발생했습니다'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDioExceptionType\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eunknown\u003c/span\u003e:\n        message = \u003cspan class=\"hljs-string\"\u003e'예기치 않은 오류가 발생했습니다'\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n    }\n  }\n\n  @override\n  \u003cspan class=\"hljs-title class_\"\u003eList\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e?\u003e get props =\u003e [message, statusCode];\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그리고 IsarError를 사용하여 로컬 데이터베이스 오류를 처리하는 클래스를 만들어 보겠습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDatabaseException\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eEquatable\u003c/span\u003e implements \u003cspan class=\"hljs-title class_\"\u003eException\u003c/span\u003e {\n  late final \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e message;\n\n  \u003cspan class=\"hljs-title class_\"\u003eDatabaseException\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efromIsarError\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eIsarError\u003c/span\u003e isarError) : message = isarError.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e;\n\n  @override\n  \u003cspan class=\"hljs-title class_\"\u003eList\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e?\u003e get props =\u003e [message];\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e알겠어요! 여기까지입니다. 이 부분에서는 여기까지 언급할 거예요.\u003c/p\u003e\n\u003cp\u003e이제 Clean Architecture에 대해 준비되었습니다.\u003c/p\u003e\n\u003cp\u003e다음 파트\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-20-FlutterCleanArchitecturePart1Introduction"},"buildId":"4HDhroK4kHnB5DAbbbGv3","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>