---
layout: post
title: "기본 요소와 사용자 정의 선택 요소 간의 균형 조정"
author: "Uidev Css"
thumbnail: "https://res.cloudinary.com/css-tricks/image/fetch/w_1200,q_auto,f_auto/https://css-tricks.com/wp-content/uploads/2020/06/select-custom-native.png"
tags: ACCESSIBILITY,FORMS,SELECT
---


계획은 이렇습니다! 우리는 스타일리시한 선택 요소를 만들 것입니다. 바깥뿐만 아니라 안쪽도요. 총 스타일링 컨트롤. 그리고 우리는 그것을 접근 가능하게 만들 것이다. 기본적으로 브라우저가 수행하는 모든 작업을 네이티브 `<select> 요소로 복제하지는 않을 것입니다. 우리는 보조 기술이 사용될 때 문자 그대로 `선택` 요소를 사용할 것이다. 하지만 마우스가 사용될 때, 우리는 스타일링된 버전을 보여주고 그것을 선택 요소로 기능하게 할 것이다.

즉, "하이브리드"가 선택하는 것입니다. 기본 `<select>`와 하나의 디자인 패턴으로 구성된 스타일의 대체 선택입니다.

![image](https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-5.png?fit=1024%2C509&ssl=1)

### 선택, 드롭다운, 탐색, 메뉴… 이름이 중요합니다.

이 기사를 위해 연구를 하면서 선택자를 말할 때 이리저리 뒤척이는 많은 이름들을 생각해 보았는데, 그중 가장 흔한 것이 `다운다운`과 `메뉴`다. 우리가 할 수 있는 두 가지 종류의 이름 실수가 있습니다: 같은 이름을 다른 것에 붙이는 것과 같은 이름을 붙이는 것. 선택자는 두 가지 실수를 모두 겪을 수 있다.

앞서 "drop down"을 용어로 사용하는 것에 대해 명확하게 설명하겠습니다. 드롭다운의 의미를 정의하는 방법은 다음과 같습니다.

> 드롭다운: 일반적으로 마우스 호버, 클릭 또는 탭 등의 항목 목록을 표시하고 숨기는 단추로 구성된 대화형 구성 요소를 클릭하거나 누릅니다. 상호 작용이 시작될 때까지 기본적으로 목록이 표시되지 않습니다. 목록에는 일반적으로 다른 콘텐츠 위에 콘텐츠 블록(예: 옵션)이 표시됩니다.

많은 인터페이스가 드롭다운처럼 보일 수 있습니다. 하지만 단순히 요소를 "drop down"이라고 부르는 것은 동물을 묘사하기 위해 "fish"를 사용하는 것과 같다. 그것은 어떤 종류의 물고기입니까? 광대 물고기는 상어와 같지 않다. 드롭다운도 마찬가지입니다.

![image](https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-2.jpeg?fit=1024%2C640&ssl=1)

바다에는 다양한 종류의 물고기가 있는 것처럼, 우리가 "drop down"이라는 단어를 던질 때 이야기 할 수 있는 다양한 종류의 구성 요소들이 있습니다.

- 메뉴: 사용자가 페이지 내용 내에서 수행할 수 있는 명령 또는 작업의 목록입니다.
- 내비게이션: 웹 사이트를 탐색하는 데 사용되는 링크 목록입니다.
- 선택: 사용자가 양식 내에서 선택할 수 있는 옵션 목록을 표시하는 양식 컨트롤(``<선택`)

어떤 유형의 드롭다운을 말하는지 결정하는 것은 안개 낀 작업이 될 수 있습니다. 다음은 이 세 가지 유형을 분류하는 방법과 일치하는 웹의 몇 가지 예입니다. 이것은 제 연구에 바탕을 두고 있고, 때때로 제가 적절한 답을 찾을 수 없을 때, 직관은 제 경험에 바탕을 두고 있습니다.

![image](https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-9.png?fit=1024%2C638&ssl=1)

모든 사람이 인터넷을 같은 방식으로 인식하고 상호작용하는 것은 아니다. 사용자 인터페이스의 이름을 지정하고 설계 패턴을 정의하는 것은 개인적인 해석의 여지가 많은 프로세스이지만 기본적인 프로세스입니다. 이 모든 변화는 드롭다운 지대의 인구를 움직이는 것입니다.

드롭다운 유형이 분명히 메뉴입니다. 그것의 용도는 접근성에 대한 대화에서 화두이다. 여기서 별로 얘기하지는 않겠지만, `<메뉴>`라는 요소가 더 이상 추천되지 않는다는 점을 다시 한번 강조해 보겠습니다. 다음은 ARIA 메뉴 역할이 사이트 탐색에 사용되지 않아야 하는 이유를 포함한 포함 메뉴 및 메뉴 단추에 대한 자세한 설명입니다.

WCAG 커뮤니티의 실제 활용 사례가 부족하기 때문에 드롭다운 분류를 더 흐리게 만드는 다소 회색 영역에 속하는 다른 요소에는 손도 대지 못했습니다.

어... 정말 많았어. 이 드롭다운-랜드의 혼란은 잊어버리고 분명한 `<select> 요소인 드롭다운 유형에만 집중합시다.

### 그럼 '선택'에 대해 이야기해 볼까요?

양식 컨트롤의 스타일링은 흥미로운 여정입니다. MDN의 표현대로 좋은 것, 나쁜 것, 못생긴 것이 있습니다. 좋은 것은 단지 블록 수준의 스타일 요소인 <형식>과 같은 것이다. 나쁜 것은 체크박스와 같은 것으로, 할 수 있지만 다소 번거롭다. `<select>는 확실히 추악한 지역에 있다.

이에 대한 많은 기사가 작성되었고, 2020년에도 여전히 사용자 정의 선택을 만드는 것은 어려운 과제이며, 일부 사용자들은 여전히 간단한 네이티브 선택을 선호합니다.

개발자들 사이에서 <선택>은 지금까지 가장 답답한 형태인데, 주로 스타일링 지원이 부족했기 때문이다. 그 이면의 UX 투쟁이 너무 커서 우리는 다른 대안을 찾는다. 글쎄요, <선택>의 첫 번째 규칙은 ARIA와 비슷하다고 생각합니다. 가능하면 사용하지 마세요.

나는 여기서 "Don don`t use use a period"로 기사를 끝낼 수 있었다. 하지만 현실을 직시하자: 선택권은 여전히 여러 상황에서 우리의 최선의 해결책이다. 여기에는 수많은 옵션, 공간에 제약이 있는 레이아웃 또는 처음부터 훌륭한 맞춤형 대화형 구성 요소를 설계하고 구현할 수 있는 시간이나 예산이 부족한 목록이 포함된 시나리오가 포함될 수 있습니다.

### 사용자 정의 '<select>' 요구 사항

"간단한" 선택 항목이라 하더라도 사용자 지정 항목을 만들기로 결정할 때 일반적으로 다음과 같은 요구 사항을 충족해야 합니다.

- 현재 선택한 옵션이 포함된 버튼이 있습니다.
- 상자를 클릭하면 옵션 목록(목록 상자라고도 함)의 가시성이 전환됩니다.
- 목록 상자에서 옵션을 클릭하면 선택한 값이 업데이트됩니다. 버튼 텍스트가 변경되고 목록 상자가 닫힙니다.
- 구성 요소 밖을 클릭하면 목록 상자가 닫힙니다.
- 트리거에는 옵션이 있음을 나타내기 위해 아래쪽을 가리키는 작은 삼각형 아이콘이 포함되어 있습니다.

이와 비슷한 것:

<div class="wp-block-cp-codepen-gutenberg-embed-block cp_embed_wrapper resizable" style="height: 575px;"><iframe id="cp_embed_dyYqmya" src="//codepen.io/anon/embed/dyYqmya?height=575&amp;theme-id=1&amp;slug-hash=dyYqmya&amp;default-tab=result" height="575" scrolling="no" frameborder="0" allowfullscreen="" allowpaymentrequest="" name="CodePen Embed dyYqmya" title="CodePen Embed dyYqmya" class="cp_embed_iframe" style="width: 100%; overflow: hidden; height: 100%;">CodePen Embed Fallback</iframe><div class="win-size-grip" style="touch-action: none;"></div></div>

여러분 중 일부는 이것이 효과가 있고 가기 좋다고 생각할지도 모른다. 하지만 잠깐, 그게 모두에게 효과가 있을까요? 모든 사람이 마우스(또는 터치 스크린)를 사용하는 것은 아닙니다. 또한 기본 `<select> 요소에는 무료로 제공되는 더 많은 기능이 포함되어 있으며 다음과 같은 요구 사항에 포함되지 않습니다.

- 선택한 옵션은 시각적 능력에 관계없이 모든 사용자에게 인식될 수 있다.
- 구성 요소는 모든 브라우저에서 예측 가능한 방식으로 키보드와 상호 작용할 수 있습니다(예: 화살표 키를 사용하여 탐색, Enter to select, Esc to cancel 등).
- 보조 기술(예: 화면 판독기)은 사용자에게 역할, 이름 및 상태를 포함하여 요소를 명확하게 알립니다.
- 목록 상자 위치가 조정됩니다. (즉, 스크린에서 잘리지 않는다.)
- 요소는 사용자의 운영 체제 기본 설정(예: 고대비, 색 구성표, 동작 등)을 존중합니다.

이 경우 사용자 지정 선택 항목 중 대다수가 어떤 방식으로든 실패합니다. 몇 가지 주요 UI 구성 요소 라이브러리를 살펴봅니다. 웹이 덧없어서 아무 말도 하지 않겠지만, 가서 한 번 해보세요. 한 프레임워크에서 선택한 구성요소가 다른 프레임워크와 다르게 동작한다는 것을 알 수 있습니다.

다음은 주의해야 할 추가 특성입니다.

- 키보드로 탐색할 때 포커스에 맞춰 목록 상자 옵션이 즉시 활성화됩니까?
- `Enter` 및/또는 `Space`를 사용하여 옵션을 선택할 수 있습니까?
- 탭 키 점프가 목록 상자의 다음 옵션으로 이동합니까, 아니면 다음 양식 컨트롤로 이동합니까?
- 화살표 키를 사용하여 목록 상자의 마지막 옵션에 도달하면 어떻게 됩니까? 단순히 마지막 항목에 머무르는가, 첫 번째 옵션으로 되돌아가는가, 아니면 최악의 경우 포커스가 다음 양식 컨트롤로 이동하는가?
- `Page Down` 키를 사용하여 목록 상자의 마지막 항목으로 바로 이동할 수 있습니까?
- 현재 보이는 것보다 많은 항목이 있으면 목록 상자 항목을 스크롤할 수 있습니까?

이것은 네이티브 `<select> 요소에 포함된 기능의 작은 샘플입니다.

> 일단 우리가 우리만의 맞춤 선택을 만들기로 결정하면, 우리는 사람들이 기대하는 것과는 다른 특정한 방법으로 그것을 사용하도록 강요하고 있다.

하지만 점점 더 나빠져요. 심지어 네이티브 >select도 브라우저와 화면 리더에서 다르게 동작한다. 일단 우리가 우리만의 맞춤 선택을 만들기로 결정하면, 우리는 사람들이 기대하는 것과는 다른 특정한 방법으로 그것을 사용하도록 강요하고 있다. 그것은 위험한 결정이고 그것은 악마가 사는 곳의 세부사항에 있다.

### "하이브리드" 선택 구성

간단한 맞춤 선택을 할 때, 우리는 그것을 눈치채지 못하고 절충을 하고 있다. 구체적으로, 우리는 기능성을 미학에 희생시킨다. 그 반대일 거예요.

대신 기본 선택을 제공하고 가능하면 더 미적으로 만족스러운 선택으로 대체하면 어떨까요? 여기서 "하이브리드" 선택 아이디어가 실현됩니다. 두 가지 선택 항목으로 구성되어 있어 "하이브리드"입니다. 적절한 순간에 적절한 선택 항목을 표시합니다.

- 기본적으로 볼 수 있고 액세스할 수 있는 네이티브 선택
- 마우스와 상호 작용해도 안전할 때까지 숨겨져 있는 사용자 지정 선택

마크업부터 시작해보죠. 먼저 사용자 지정 선택기 앞에 `옵션` 항목이 있는 네이티브 `<select>를 추가하여 작업을 진행하겠습니다. (잠시 후에 이유를 설명하겠습니다.)

모든 양식 컨트롤에는 설명 레이블이 있어야 합니다. 우리는 `<label>`을 사용할 수 있지만, 그것은 라벨을 클릭할 때 네이티브 선택에 초점을 맞출 것이다. 이러한 행동을 방지하기 위해 `스팬`을 사용하고 `아리아 레이블 by`를 사용하여 선택자와 연결합니다.

마지막으로, 어시스턴트 테크놀로지에 `aria-hidden=`true`를 사용하여 사용자 지정 선택을 무시하도록 지시할 필요가 있다. 그래야 무조건 토종 선발만 발표한다.

```html
<span class="selectLabel" id="jobLabel">Main job role</span>
<div class="selectWrapper">
  <select class="selectNative js-selectNative" aria-labelledby="jobLabel">
    <!-- options -->
    <option></option>
  </select>
  <div class="selectCustom js-selectCustom" aria-hidden="true">
     <!-- The beautiful custom select -->
  </div>
</div> 
 
 
 

```

이렇게 하면 스타일링에 익숙해지는데, 여기서 우리는 사물을 예쁘게 보이게 할 뿐만 아니라, 한 선택에서 다른 선택으로 스위치를 조작하게 됩니다. 우리는 모든 마법을 실현하기 위해 단지 몇 개의 새로운 선언이 필요하다.

첫째, 기본 선택과 사용자 지정 선택 모두 폭과 높이가 같아야 합니다. 이렇게 하면 전환 시 레이아웃의 주요 차이를 볼 수 없습니다.

```css
.selectNative,
.selectCustom {
  position: relative;
  width: 22rem;
  height: 4rem;
}
```

두 개의 선택 항목이 있지만, 한 개만 선택 영역을 지정할 수 있는 공간을 지정할 수 있습니다. 다른 하나는 문서 흐름에서 빼내려면 완전히 배치되어야 합니다. 사용자 지정 선택이 가능한 경우에만 사용되는 "교체"이기 때문에 그렇게 합시다. 아직 아무도 연락하지 못하도록 기본적으로 숨기겠습니다.

```css
.selectCustom {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
}
```

여기 "재미있는" 부분이 나옵니다. 마우스를 사용하는 컴퓨터처럼 호버(hover)가 기본 입력의 일부인 장치를 사용하는지 여부를 탐지해야 합니다. 일반적으로 응답성 중단점 또는 기능 지원 확인에 대한 미디어 쿼리를 생각하지만, 모든 주요 브라우저에서 지원하는 `@media 쿼리(hover:hover)`를 사용하여 호버 지원을 감지하는 데 사용할 수 있다. 따라서 이 옵션을 사용하여 호버 기능이 있는 장치에서만 사용자 지정 선택을 표시해 보겠습니다.

```css
@media (hover: hover) {
  .selectCustom {
    display: block;
  }
}
```

좋아요, 하지만 키보드를 사용하여 호버 기능이 있는 장치에서도 탐색하는 사람은 어떨까요? 기본 선택이 포커스에 있을 때 사용자 지정 선택을 숨깁니다. 인접한 형제 결합기(`+`)를 찾을 수 있습니다. 기본 선택이 포커스에 있으면 DOM 순서로 옆에 있는 사용자 정의 선택을 숨깁니다. 이 때문에 기본 선택이 사용자 정의 선택보다 먼저 배치되어야 합니다.

```css
@media (hover: hover) {
  .selectNative:focus + .selectCustom {
    display: none;
  }
}
```

다 됐다! 더 이상 어쩔 수 없다! 두 선택 항목 간에 전환되는 트릭이 완료되었습니다! 물론 다른 CSS 방법들도 있지만, 이것은 아주 잘 작동합니다.

마지막으로, 우리는 자바스크립트 한 잔이 필요합니다. 이벤트 수신기를 추가해 보겠습니다.

- 사용자 지정이 트리거되는 클릭 이벤트용 1개로 옵션을 열고 표시합니다.
- 하나는 두 가지 선택 값을 동기화하기 위한 것입니다. 하나의 선택 값이 변경되면 다른 선택 값도 업데이트됩니다.
- 위쪽 및 아래쪽 키를 사용한 탐색, Enter 또는 Space 키를 사용한 옵션 선택, Esc 키를 사용하여 선택 닫기 등 기본 키보드 탐색 컨트롤용

<div class="wp-block-cp-codepen-gutenberg-embed-block cp_embed_wrapper resizable" style="height: 575px;"><iframe id="cp_embed_YzyOYRr" src="//codepen.io/anon/embed/YzyOYRr?height=575&amp;theme-id=1&amp;slug-hash=YzyOYRr&amp;default-tab=result" height="575" scrolling="no" frameborder="0" allowfullscreen="" allowpaymentrequest="" name="CodePen Embed YzyOYRr" title="CodePen Embed YzyOYRr" class="cp_embed_iframe" style="width: 100%; overflow: hidden; height: 100%;">CodePen Embed Fallback</iframe><div class="win-size-grip" style="touch-action: none;"></div></div>

### 사용적합성 시험

저는 매우 작은 사용적합성 테스트를 실시했고, 몇몇 장애인에게 하이브리드 선택 부품을 사용해 보라고 했습니다. Chrome(81), Firefox(76) 및 Safari(13)의 최신 버전을 사용하여 다음 장치와 도구를 테스트했습니다.

- 마우스만 사용하는 데스크톱 장치
- 키보드만 사용하는 데스크톱 장치
- 키보드를 사용한 MacOS의 VoiceOver
- 키보드를 사용하는 Windows의 NVDA
- Safari를 사용한 iPhone 및 iPad의 VoiceOver

이 모든 테스트는 예상대로 작동했지만, 나는 이것이 더 다양한 사람과 도구를 가진 사용적합성 시험을 훨씬 더 많이 가질 수 있다고 믿는다. JAWS, Dragon 등과 같은 다른 장치나 도구에 액세스할 수 있는 경우 테스트 방법을 알려 주십시오.

테스트 중에 문제가 발견되었습니다. 특히, 이 문제는 VoiceOver 설정 "Mouse pointers: Moves Voice Over cursors"와 관련된 것이었다. 마우스로 선택을 열면 기본 선택이 아닌 사용자 지정 선택이 열리고 기본 선택이 수행되지 않습니다.

이 접근 방식의 가장 마음에 드는 점은 핵심 기능을 손상시키지 않으면서 두 가지 장점을 모두 활용하는 방법입니다.

- 모바일 및 태블릿 사용자는 기본 선택을 받을 수 있으며, 일반적으로 성능 이점을 비롯하여 사용자 지정 선택보다 더 나은 사용자 환경을 제공합니다.
- 키보드 사용자는 원하는 방식으로 네이티브 선택과 상호 작용할 수 있습니다.
- 보조 기술은 일반 기술처럼 네이티브 셀렉트와 상호 작용할 수 있습니다.
- 마우스 사용자는 향상된 사용자 지정 선택과 상호 작용할 수 있습니다.

이 접근 방식은 모든 기본 기능을 구현하기 위한 추가적인 엄청난 코드 노력 없이 모든 사람에게 필수적인 기본 기능을 제공한다.

날 오해하지 말아라. 이 기법은 일률적인 해결책이 아니다. 간단한 선택에는 효과가 있을 수 있지만 복잡한 상호작용을 수반하는 경우에는 효과가 없을 수 있습니다. 이러한 경우에는 ARIA와 JavaScript를 사용하여 격차를 보완하고 진정으로 액세스 가능한 맞춤형 선택을 해야 합니다.

### 메뉴처럼 보이는 선택 항목에 대한 참고 사항

세 번째 드롭다운-랜드 시나리오를 다시 살펴보겠습니다. 이 드롭다운은 항상 선택된 옵션(예: 일부 콘텐츠 정렬)을 가집니다. 회색 영역에 메뉴 또는 선택 항목으로 분류했습니다.

제 생각은 이렇습니다: 수년 전, 이런 유형의 드롭다운은 주로 네이티브 `<select>를 사용하여 구현되었습니다. 요즘에는 사용자 지정 스타일로 처음부터 구현되는 것을 흔히 볼 수 있습니다(접근 가능 여부). 결국 메뉴처럼 보이는 선택 요소가 나오게 됩니다.

![image](https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-11.png?resize=718%2C284&ssl=1)

`선택`은 메뉴의 한 종류입니다. 둘 다 유사한 의미론과 행동을 가지고 있으며, 특히 항상 체크되는 옵션 목록을 포함하는 시나리오에서 그러하다. 이제 WCAG 3.2.2 입력(레벨 A) 기준을 언급하겠다.

> 사용자 인터페이스 구성 요소의 설정을 변경해도 구성 요소를 사용하기 전에 사용자에게 동작을 알려주지 않는 한 컨텍스트가 자동으로 변경되어서는 안 됩니다.

이것을 실행에 옮기자. 정렬 가능한 학생 목록을 상상해 보십시오. 시각적으로 정렬이 즉시 이루어지는 것은 분명하지만, 반드시 모든 사람에게 해당되는 것은 아닙니다. 따라서 `<select>`를 사용할 경우 페이지 내용이 변경되고 페이지 내용이 크게 재정렬되기 때문에 WCAG 가이드라인이 실패할 위험이 있다.

기준의 성공을 보장하려면 요소와 상호 작용하기 전에 사용자에게 작업에 대해 경고하거나 선택 직후에 `<버튼>을 포함시켜 변경을 확인해야 한다.

```html
<label for="sortStudents">
  Sort students
  <!-- Warn the user about the change when a confirmation button is not present. -->
  <span class="visually-hidden">(Immediate effect upon selection)</span>
</label>
<select id="sortStudents"> ... </select>
```

그러나 페이지 내용을 바꾸는 간단한 메뉴라면 <선택>을 사용하거나 사용자 정의 메뉴를 만드는 것이 모두 좋은 방법이다. 구성 요소에 완전히 액세스할 수 있도록 하는 데 필요한 작업량이 결정된다는 사실을 기억하십시오. 이는 하이브리드 선택 방식을 사용할 수 있는 시나리오입니다.

### 마지막 단어

이 모든 아이디어는 순진한 CSS 속임수로 시작되었지만, 이 모든 연구 후에, 접근성을 훼손하지 않고 독특한 경험을 만드는 것은 쉬운 일이 아니라는 것을 다시 한 번 상기했다.

실제로 액세스할 수 있는 선택 구성 요소(또는 어떤 종류의 드롭다운)를 구축하는 것은 보기보다 어렵습니다. WCAG는 우수한 지침과 모범 사례를 제공하지만, 구체적인 사례와 다양한 실제 활용 사례가 없다면 지침은 대부분 야심찬 것이다. 그렇다고 ARIA 지원이 미지근하고 브라우저마다 네이티브 `<select> 요소가 다르게 보이고 동작한다는 사실은 말할 것도 없다.

"하이브리드" 선택은 가능한 한 많은 기본 기능을 얻으면서 좋은 선택 항목을 만들기 위한 또 다른 시도일 뿐입니다. 이 기술 실험을 접근성을 과소평가하기 위한 핑계로 보지 말고 두 세계에 봉사하기 위한 시도로 보아야 합니다. 리소스, 시간 및 필요한 기술이 있는 경우 올바른 작업을 수행하고 구성 요소를 전 세계로 배송하기 전에 다른 사용자와 함께 테스트해 보십시오.

추신: "drop down" 구성 요소를 만들 때는 적절한 이름을 사용해야 합니다. 😉