---
layout: post
title: "집중 관리 및 불활성"
author: 'CSS Dev'
thumbnail: https://res.cloudinary.com/css-tricks/image/fetch/w_1200,q_auto,f_auto/https://css-tricks.com/wp-content/uploads/2018/11/keyboard-focus.png
tags: ACCESSIBILITY,FOCUS,INERT
---


많은 형태의 보조 기술은 화면 내용을 이해하고 조치를 취하기 위해 키보드 네비게이션을 사용한다. Tab 키를 통해 탐색하는 방법 중 하나가 있습니다. 마우스나 트랙패드를 찾을 필요 없이 폼의 입력에서 입력으로 빠르게 이동할 때 이 방법을 이미 알고 있을 수 있습니다.

탭은 DOM에 표시되는 순서대로 대화형 요소로 이동합니다. 이것이 소스 코드의 순서가 설계의 시각적 계층과 일치할 정도로 중요한 이유 중 하나입니다.

탭이 가능한 대화형 요소의 목록은 다음과 같습니다.

- 앵커, `href` 특성이 존재할 때
- 「<단추의 버튼>」.
- `<input> 및 `<text area>에는 라벨이 붙어 있습니다.
- <선택>하다.
- `<br>`의
- 컨트롤이 있을 때는 <오디오>와 <비디오>,
- `<객체>는 사용 방법에 따라 달라집니다.
- 파이어폭스에서 스크롤 오버플로가 발생한 모든 요소,
- `내용 가능한` 속성을 가진 모든 요소 및
- 탭 인덱스 속성을 가진 모든 요소(이 요소에 대한 추가 정보)

대화식 요소는 다음과 같은 경우에 초점을 맞춥니다.

- Tab 키를 통해 탐색되었습니다.
- 다른 초점 요소에 연결되는 앵커를 따라 클릭된다.
- 또는 포커스는 프로그래밍 방식으로 `contract`를 통해 설정됩니다.자바스크립트에 포커스를 맞추다.

포커스는 활성화하려는 대상을 식별한다는 점에서 마우스 커서로 요소 위를 맴도는 것과 유사합니다. 시각적으로 분명한 초점 스타일이 중요한 이유이기도 하다.


<div class="video_wrapper" style="padding-top: 56.25%;">
    <video controls="" loop="" muted="" src="https://css-tricks.com/wp-content/uploads/2020/10/focus-navigation.mp4" playsinline="" name="fitvid0"></video>
</div>


### 초점관리

포커스 관리는 포커스 이벤트를 받을 수 있고 받을 수 없는 것을 조정하는 작업입니다. 프런트엔드 개발에서 더 까다로운 작업 중 하나이지만 웹 사이트와 웹 앱에 액세스할 수 있도록 하는 것이 중요합니다.

99%는 포커스 순서를 그대로 두고 싶어합니다. 나는 이것을 충분히 강조할 수 없다.

버튼의 경우 `<버튼> 요소, 링크의 경우 앵커 요소, 사용자 입력의 경우 `<입력> 요소 등을 사용한다면 추가적인 노력 없이 포커스를 사용할 수 있습니다.

포커스 순서가 맞지 않는 항목에 포커스를 적용하거나 포커스 이벤트를 받을 수 없는 항목을 포커스가 가능하도록 만드는 경우는 드물다. 다음은 접근 가능하고 직관적인 방법으로 이동하는 방법에 대한 몇 가지 지침입니다.

### 포커스 트래핑

사물이 집중되는 것을 막아야 할 때가 있을 수 있다. 이것의 좋은 예는 포커스 트래핑인데, 포커스 이벤트를 요소 및 그 아이들로 조건부로 제한하는 행위이다.

포커스 트랩은 키보드 트랩(포커스 트랩이라고도 함)과 혼동하지 않아야 한다. 키보드 트랩(keyboard trap)은 잘못 작성된 로직의 비정상적인 루프 때문에 키보드를 통해 탐색하는 사람이 위젯이나 구성 요소에서 빠져나올 수 없는 상황을 말한다.

포커스 트랩을 사용하는 방법의 실제 예는 다음과 같습니다.


<div class="video_wrapper" style="padding-top: 56.25%;">
    <video controls="" loop="" muted="" src="https://css-tricks.com/wp-content/uploads/2020/10/trapped-focus.mp4" playsinline="" name="fitvid1"></video>
</div>


모달 내에서 초점을 유지하는 것은 그 경계를 전달하고 모달 콘텐츠가 아닌 것을 알려주는데 도움이 된다. 이것은 보는 사람이 모달 콘텐츠가 다른 웹 사이트나 웹 앱 콘텐츠에 어떻게 "떠다니는"지를 볼 수 있는 것과 비슷하다. 이 정보는 다음과 같은 경우에 중요합니다.

- 시력이 낮거나 없거나 화면 판독기 공지사항에 의존하여 상호 작용 모드의 변화를 전달하는 데 도움이 됩니다.
- 시력이 낮고 확대된 디스플레이가 있으며, 모달의 경계 밖에 포커스를 맞추면 혼란스럽고 방향이 흐트러질 수 있습니다.
- 키보드를 통해서만 탐색할 수 있으며, 그렇지 않으면 모달에서 탭으로 이동하여 모달로 돌아가려는 기본 페이지나 뷰에서 길을 잃을 수 있습니다.

집중력을 안정적으로 관리하는 것은 복잡한 일이다. JavaScript를 사용하여 다음을 수행해야 합니다.

- 현재 페이지 또는 보기에 있는 모든 포커스 가능 요소의 컨테이너 요소를 결정합니다.
- 첫 번째 및 마지막 포커스 가능 항목을 포함하여 갇힌 내용의 경계를 식별합니다.
- 갇혀 있는 컨텐츠 집합 내에 있지 않은 포커서블에서 상호 작용성과 검색 가능성을 모두 제거합니다.
- 포커스를 갇힌 콘텐츠로 이동합니다.
- 갇힌 콘텐츠를 해제하는 신호(저장, 취소, Esc 키 해제/히트 등)를 보내는 이벤트를 청취합니다.
- 관련 이벤트에 의해 트리거되면 갇힌 내용 영역을 제거합니다.
- 이전에 제거된 상호 작용을 복원합니다.
- 포커스를 다시 갇힌 콘텐츠를 트리거한 대화형 요소로 이동합니다.

나는 거짓말하지 않을 것이다: 이 모든 것은 까다롭고 시간이 많이 걸린다. 그러나 포커스 관리 및 사용 가능한 포커스 순서는 Web Content Accessibility Guideline입니다. 사용성에 관한 국제적이고 법적 구속력을 갖는 표준의 일부로 간주될 만큼 충분히 중요합니다.

발견성과 상호작용성을 모두 제거하는 데는 약간의 속임수가 있습니다.

화면 판독기에는 가상 커서를 통해 페이지 또는 보기를 탐색할 수 있는 상호 작용 모드가 있습니다. 또한 가상 커서를 사용하여 화면 판독기를 사용하는 사용자가 페이지의 비 대화식 부분(제목, 목록 등)을 검색할 수 있습니다. Tab 및 Focus 스타일을 사용하는 것과 달리, 가상 커서는 화면 판독기를 사용하는 사용자만 사용할 수 있습니다.

포커스를 관리하는 경우 가상 커서가 콘텐츠를 검색하는 기능을 제한할 수 있습니다. 우리의 모달 예제에서, 이것은 누군가가 그것을 읽을 때 모달의 경계를 실수로 "탈퇴"하는 것을 막는 것을 의미한다.

"aria-hidden="true"의 신중한 적용을 통해 발견 가능성을 억제할 수 있다. 그러나 상호 작용은 조금 더 미묘한 차이가 있다.

### 'inert' 입력

inert 속성은 인터랙티브 요소를 제거했다가 검색 및 포커스가 훨씬 쉽게 복원되는 글로벌 HTML 속성이다. 작동 방법의 예는 다음과 같습니다.

```html
<body>
  <div 
    aria-labelledby="modal-title"
    class="c-modal" 
    id="modal" 
    role="dialog" 
    tabindex="-1">
    <div role="document">
      <h2 id="modal-title">Save changes?</h2>
      <p>The changes you have made will be lost if you do not save them.<p>
      <button type="button">Save</button>
      <button type="button">Discard</button>
    </div>
  </div>
  <main inert>
    <!-- ... -->
  </main>
</body> 

```

많은 보조 기술 지원 문제 때문에 나는 의도적으로 모달에 `<dialog>` 요소를 사용하는 것을 피하고 있다.

저장 확인모달에 이어 ➡메인 요소에 ➡가 선언됐다. 이는 <메인> 안에 포함된 모든 콘텐츠가 포커스를 받거나 클릭할 수 없다는 것을 의미한다.

모달 내부로 포커스가 제한됩니다. 모달(modal)이 해제되면 <main> 요소에서 inert를 제거할 수 있다. 이러한 초점 트래핑 처리 방법은 기존 기법에 비해 훨씬 쉽다.

기억하기: 해제 이벤트는 모달 예제의 두 버튼에 의해 발생할 수 있지만 키보드의 Esc 키를 눌러도 발생할 수 있습니다. 또한 일부 모델에서는 모달 영역 밖을 클릭하여 해제할 수도 있습니다.

최신 버전의 Edge, Chrome, Opera는 모두 실험적인 웹 플랫폼 기능을 사용할 때 inert를 지원한다. Firefox 지원도 곧 출시될 예정입니다! 한 가지 특이점은 데스크톱 및 모바일 버전의 Safari입니다.

나는 애플이 `inert`에 대한 토종 지원을 실행하는 것을 보고 싶다. 폴리필을 사용할 수 있지만 모든 주요 화면 판독기에 대한 사소한 지원 문제가 있습니다. 별로야!

또한 inert polyfill 프로젝트의 README에서 이 노트에 주의를 환기시키고자 합니다.

> 폴리필은 나무보행의 양이 상당히 필요하기 때문에 기존의 관성형 구현에 비해 비용이 많이 들고 성능도 좋을 것이다.

트리 워킹은 폴리필의 자바스크립트가 작동하기 위해 잠재적으로 많은 계산 능력을 요구하며, 따라서 최종 사용자 경험의 속도를 늦춘다는 것을 의미한다.

저가형 Android 스마트폰, 구형 노트북 및 컴퓨팅 집약적인 작업(예: 여러 개의 Electron 앱 실행)을 수행하는 보다 강력한 장치 등 전력 소모가 낮은 장치의 경우, 동파 또는 충돌이 발생할 수 있습니다. 기본 브라우저 지원이란 JavaScript가 지원하지 않는 브라우저의 일부에 액세스할 수 있기 때문에 이러한 동작은 기기에 부담이 훨씬 적다는 것을 의미합니다.

개인적으로 애플이 `불안`을 지지하지 않아 실망스럽다. 브라우저에 새로운 기능을 추가하는 것은 매우 복잡하고 어려운 일이라는 것을 이해하지만, inert는 애플이 훨씬 더 일찍 지원했을 기능처럼 보인다.

macOS와 iOS는 역사적으로 접근성에 대한 많은 지원을 받아왔으며, 보조 기술 친화적인 기능들은 그들의 마케팅 캠페인의 일반적인 부분이다. 이 기능 자체가 접근성이 높은 웹 경험을 쉽게 개발할 수 있게 해주기 때문에 inert를 지원하는 것은 애플의 임무의 자연스러운 확장처럼 보인다.

실망스럽게도, 애플사는 또한 자신이 무엇을 하고 있는지, 그리고 우리가 일반적으로 언제 그것을 볼 수 있을지에 대해 입을 굳게 다물고 있다. 이 때문에 관성(inert)의 미래는 미해결 문제다.

이갈리아는 브라우저 기능을 하는 회사입니다. 그들은 현재 대중들이 어떤 특징을 보고 싶은지 투표할 수 있는 실험을 하고 있다. 이 이니셔티브에 대한 이유는 이 기사의 범위 밖이지만, 스매싱 매거진에서 자세히 볼 수 있습니다.

이갈리아가 고려하고 있는 한 가지 특징은 `inert`에 대한 웹킷 지원을 추가하는 것이다. 웹에서 접근성을 향상시킬 수 있는 방법을 찾고 있었지만 어떻게 시작해야 할지 잘 모르겠다면 서약해 주시기 바랍니다. $5, $10, $25. 아주 많은 양이 될 필요는 없습니다. 아주 작은 것 하나하나가 합쳐집니다.

### 마무리하기

집중력을 관리하려면 약간의 기술과 주의가 필요하지만, 할 가치가 매우 높습니다. inert 속성은 이것을 더 쉽게 만드는 데 큰 도움이 될 수 있다.

`inert`와 같은 기술은 또한 웹 플랫폼의 가장 큰 장점 중 하나를 대표하는데, 즉, 긴급 행동의 길을 닦고 쉽고 효과적인 것으로 성문화할 수 있는 능력이다.

- 탭 인덱스로 초점 제어(A11ycasts, 에피소드 04)
- 탭 인덱스 속성 사용(Pacielo Group)
- JavaScript를 사용하여 요소에 포커스를 트랩합니다(Hidde de Vries).

Adrian Roselli와 Sarah Higley의 피드백에 감사드립니다.