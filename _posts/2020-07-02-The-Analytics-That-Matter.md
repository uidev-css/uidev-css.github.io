---
layout: post
title: "중요한 분석"
author: "CSS Dev"
thumbnail: "https://res.cloudinary.com/css-tricks/image/fetch/w_1200,q_auto,f_auto/https://css-tricks.com/wp-content/uploads/2019/02/bar-chart.png"
tags: ANALYTICS,GOOGLE ANALYTICS,PERFORMANCE
---


저는 브라우저 기능의 사용을 정당화하기 위해 글로벌 브라우저 사용 비율을 인용하는 것에 대해 오랫동안 회의적이었습니다. 이상한 칵테일 파티 사료 말고는 브라우저의 전 세계 용도가 어떤지는 중요하지 않다. 중요한 용도는 사이트의 사용자가 사용하는 용도이며 사이트마다 크게 다를 수 있습니다.

당신의 실제 사이트 개념의 실제 사용을 추적한다는 생각이 지난 며칠간 내 머리속에 떠올랐다. 그리고 단순히 "IE 11은 여전히 전 세계 사용량의 1.42%를 가지고 있기 때문에 CSS 그리드를 사용할 수 없다"는 것이 아니라, 어떤 메트릭스를 사용하든 간에 여러분의 사이트에 중요한 메트릭을 측정하는 것입니다.

성능 지표는 매우 중요합니다. 성능 테스트를 수행할 때는 대부분 합성 테스트라고 합니다. 자동화된 브라우저는 사이트를 로드하고 사물의 시기, 자산 크기, 자산 수 등과 같이 로드되는 동안 발견한 내용을 추적합니다. 이런 합성 정보는 성능에 엄청난 시간을 투자하면 머릿속에 떠오른다. "한 가지 추가 요청을 없앨 수 있을 것 같습니다."라고 저는 생각합니다. "이 자산을 좀 더 최적화할 수 있을 것 같습니다." 그리고 우리가 사용하는 성능 툴은 이러한 종류의 데이터를 우리에게 쉽게 보고합니다. 당사의 JavaScript 번들의 크기는 얼마입니까? 당사의 "가장 큰 만족스러운 그림"은 무엇입니까? 저희 등대 공연 점수는 몇 점인가요? 성능과 관련이 있지만 실제 사용자의 경험을 측정하지는 않습니다.

잠깐만 앉아 있자.

사용 현황 분석과 같은 사이트에서 수집할 수 있는 다른 분석이 있습니다. 예를 들어 Google Analytics를 사이트에 게시하여 일반 코드 조각만 설치할 수 있습니다. 이것은 우리에게 어떤 페이지가 가장 인기 있는지, 사람들이 얼마나 사이트에서 시간을 보내는지, 그리고 어떤 나라가 가장 많은 트래픽을 전달하는지와 같은 것들을 말해 줄 것입니다. 이는 실제 사용자 분석이지만 매우 일반적인 분석 정보입니다.

사이트에서 더 유용한 분석 데이터를 원하신다면, 미리 좀 더 생각해보셔야 합니다. 뭘 알고 싶어? 사람들이 Feature X를 얼마나 자주 사용하는지 알고 싶을 것이다. 아니면 이번 주에 얼마나 많은 파일을 업로드했는지 알고 싶으실 겁니다. 또는 보낸 메시지 수. 또는 스타 버튼을 몇 번 클릭했는지도 알 수 있습니다. 이것은 당신의 사이트가 어떻게 돌아가는지 말해주는 것입니다. 일반적인 분석 추적은 그렇게 할 수 없습니다. 이러한 것들을 캡처하고 보고하기 위해 약간의 JavaScript를 작성해야 합니다. 여러분이 정말로 관심을 가지고 있는 분석을 얻기 위해서는 약간의 노력이 필요합니다.

이제 이 기능을 성능 툴링에 적용합니다.

일반적인 합성 테스트보다는 특정 사이트에 실제로 중요한 항목을 측정하는 것이 어떨까요? 이에 대한 한 가지 측면은 RUM, 즉 "실제 사용자 모니터링"입니다. 따라서 단일 합성 테스트가 사이트의 모든 성능 테스트의 원천이 아니라 실제 사용자가 실제 장치에서 사이트를 사용하는지 추적합니다. 그것은 저에게 매우 이치에 맞지만, 그것의 논리는 제쳐두고, 그것은 중요한 데이터를 공개합니다.

예를 들어, 곧 페이지의 SEO에 영향을 미칠 Google의 Web Core Vitals 중 하나에 FID(First Input Delay)라는 메트릭이 포함되어 있으며, 이를 사용하려면 페이지에서 JavaScript를 통해 데이터를 수집해야 합니다.

또 다른 Web Core Vital은 "Large Contentful Paint"로, 보다 의미 있는 성능 지표에 대한 흥미로운 시도입니다. "렌더 시작"이나 첫 페이지 페인트와 같은 메트릭을 상상해 보십시오. 재미있어요? Sorta. 적어도 그것은 (아마도) 어떤 일이 일어나고 있다는 것을 사용자에게 알리고 있다. 그러나 이 첫 번째 렌더링은 헤드라인이나 뉴스 기사의 본문과 같이 실제로 유용한 컨텐츠가 아닐 수도 있습니다. 그래서 이 메트릭스는 그 유용한 컨텐츠가 무엇인지 추측하고 그것을 측정합니다. 매우 총명하다.

하지만, 왜 추측하죠? 구글이 왜 추측해야 하는지 알겠다. 이들은 수십억 개의 사이트에서 LCP를 측정하고 일반적으로 유용한 측정값을 제공해야 합니다. 그러나 자체 사이트(집중 분석이 실제로 중요한 곳)에서는 성능 툴에 어떤 요소가 중요한지 알려주고 렌더링 시기를 기록할 수 있습니다. 개인적으로, 나는 이 사이트에서 기사 자체가 언제 렌더링되는지 알고 싶다. SpeedCurve의 영웅 렌더링 시간을 통해 다음과 같은 작업을 수행할 수 있었습니다.

```html
<main elementtiming="article"></main>

<!-- or focus on the top of the page, like the "hero" timing suggests -->
<header elementtiming="hero"></header>
```

이제 저는 제 사이트에 중요한 것을 측정하고 있습니다. 단지 일반 번호만이 아닙니다.

마찬가지로 FID도 멋지지만 사이트에 중요한 일이 발생할 때 성능 툴링을 알려주는 JavaScript 이벤트를 시작하지 않는 것이 좋습니다. 예를 들어, CodePen에서는 편집기를 사용할 준비가 되었을 때 이 작업을 수행합니다. 그것은 사용자 타이밍이라고 불리고 이것은 당 W3C 사양입니다!

```js
Editors.init();
performance.mark("Editors are initialized.");
```

이러한 약간의 노력이 필요한 분석은 표준 요금보다 확실히 더 좋습니다. 물론, 200KB 이상의 JavaScript를 사용할 때 경고하는 성능 예산은 좋지만, 애플리케이션의 핵심 기능이 준비되지 않은 경우 1.1초가 소요되는 1.4초가 지나야 경고하는 성능 예산은 훨씬 더 중요합니다.