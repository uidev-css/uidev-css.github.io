{"version":3,"file":"static/chunks/pages/posts/[page]-498da29379dd58dc.js","mappings":"oFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,gBACA,WACA,OAAeC,EAAQ,KACvB,EACA,+XCSA,IAAMC,EAAKC,IAAAA,IAAe,CAACC,cAUpB,IAAMC,EAAY,GACZC,EAAgB,GAChBC,EAAW,KAAeC,MAAA,CAAVC,EAAAA,EAASA,CAAC,mBAC1BC,EAAgB,KAAeF,MAAA,CAAVC,EAAAA,EAASA,CAAC,yBAE7B,SAASE,EAAKC,CAOrB,CAAE,IAPmB,CAC3BC,MAAAA,CAAAA,CACAC,KAAAA,CAAAA,CACAC,eAAAA,CAAAA,CACAC,oBAAAA,CAAAA,CACAC,iBAAAA,CAAAA,CACAC,cAAAA,CAAAA,CACM,CAPqBN,EAQrBO,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,IAET,CAACC,EAAmBC,EAAqB,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAASN,GACrD,CAACO,EAAgBC,EAAkB,CAAGF,CAAAA,EAAAA,EAAAA,QAAAA,EAASL,GAE/CQ,EAAmB,GAA2B,CAElDJ,EADAK,EAAgBA,EAAgB,EAAI,EAAIA,CAAa,CAEvD,EAYA,MAVAC,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,IAAM,CACdC,QAAQC,GAAG,CAACT,EAAmBL,GAC3BK,EAAoB,IAAML,EAC5BS,EAAkBV,EAAiBT,GAAkB,EAAIA,EAAgBS,EAAiBT,CAAa,EAEvGmB,EAAkBnB,EAEtB,EAAG,CAACe,EAAkB,EAEtBO,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,IAAM,CAAC,EAAG,CAACJ,EAAe,EAElC,GAAAO,EAAAC,GAAA,EAAAD,EAAAE,QAAA,WACGd,EAAOe,UAAU,CAChB,YAEA,GAAAH,EAAAI,IAAA,EAAAJ,EAAAE,QAAA,YACE,GAAAF,EAAAC,GAAA,EAACI,EAAAA,CAAUA,CAAAA,CAACC,KAAK,SACjB,GAAAN,EAAAI,IAAA,EAACG,MAAAA,CAAIC,UAAWrC,EAAG,YAAa,mBAC9B,GAAA6B,EAAAC,GAAA,EAACQ,EAAAA,CAAMA,CAAAA,CAAAA,GACP,GAAAT,EAAAI,IAAA,EAACG,MAAAA,CAAIC,UAAWrC,EAAG,mBACjB,GAAA6B,EAAAI,IAAA,EAACM,UAAAA,WACC,GAAAV,EAAAC,GAAA,EAACU,EAAAA,CAAYA,CAAAA,CAACC,MAAM,UACpB,GAAAZ,EAAAC,GAAA,EAACM,MAAAA,CAAIC,UAAWrC,EAAG,yBACjB,GAAA6B,EAAAC,GAAA,EAACY,EAAAA,CAAQA,CAAAA,CAACC,SAAUhC,SAGxB,GAAAkB,EAAAI,IAAA,EAACG,MAAAA,CAAIC,UAAWrC,EAAG,wBAChBmB,EAAoB,GACnB,GAAAU,EAAAC,GAAA,EAACc,SAAAA,CACCT,KAAK,SACLE,UAAWrC,EAAG,cAAe,SAC7B6C,QAAS,IAAMrB,EAAiBL,EAAoB,YACrD,MAIF2B,MAAMC,IAAI,CAAC,CAAEC,OAAQ1B,CAAe,EAAG,CAAC2B,EAAGC,IAAM,CAChD,IAAMC,EAAU/C,EAAgBe,EAAqB+B,CAAAA,EAAI,GAEzD,MACE,GAAArB,EAAAC,GAAA,EAACsB,IAAIA,CAEHf,UAAWrC,EAAG,OAAQ,CAAE,UAAWmD,IAAY,CAACvC,CAAK,GACrDyC,KAAM,UAAsD/C,MAAA,CAA5CF,EAAgBe,EAAqB+B,CAAAA,EAAI,aAExDC,GAJID,EAOX,GACC/B,EAAoB,EAAIL,GACvB,GAAAe,EAAAC,GAAA,EAACc,SAAAA,CACCT,KAAK,SACLE,UAAWrC,EAAG,cAAe,SAC7B6C,QAAS,IAAMrB,EAAiBL,EAAoB,YAEnD,iBAOd,EAGP,oBChHAmC,EAAAC,OAAA,EAAkB","sources":["webpack://_N_E/?da74","webpack://_N_E/./pages/posts/[page].tsx","webpack://_N_E/./pages/posts/posts.module.scss","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/posts/[page]\",\n      function () {\n        return require(\"private-next-pages/posts/[page].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/posts/[page]\"])\n      });\n    }\n  ","import { useRouter } from \"next/router\";\nimport ErrorPage from \"next/error\";\nimport { getPosts } from \"@/lib/api\";\nimport type PostType from \"@/interfaces/post\";\nimport Header from \"@/components/Header\";\nimport style from \"./posts.module.scss\";\nimport classnames from \"classnames/bind\";\n\nimport CustomHead from \"@/components/CustomHead\";\nimport PostList from \"@/components/PostList\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { SITE_NAME } from \"@/lib/constants\";\n\nconst cx = classnames.bind(style);\ntype Props = {\n  posts: PostType[];\n  page: number;\n  totalPageCount: number;\n  totalPageGroupCount: number;\n  lastPageGroup: number;\n  currentPageGroup: number;\n};\n\nexport const PAGE_SIZE = 10;\nexport const PER_PAGE_SIZE = 20;\nexport const PAGE_KEY = `__${SITE_NAME}_CURRENT_PAGE__`;\nexport const PAGEGROUP_KEY = `__${SITE_NAME}_CURRENT_PAGE_GROUP__`;\n\nexport default function Post({\n  posts,\n  page,\n  totalPageCount,\n  totalPageGroupCount,\n  currentPageGroup,\n  lastPageGroup,\n}: Props) {\n  const router = useRouter();\n\n  const [currentPageGroupS, setCurrentPageGroupS] = useState(currentPageGroup);\n  const [lastPageGroupS, setLastPageGroupS] = useState(lastPageGroup);\n\n  const onClickPageGroup = (nextPageGroup: number) => {\n    nextPageGroup = nextPageGroup < 0 ? 0 : nextPageGroup;\n    setCurrentPageGroupS(nextPageGroup);\n  };\n\n  useEffect(() => {\n    console.log(currentPageGroupS, totalPageGroupCount);\n    if (currentPageGroupS + 1 === totalPageGroupCount) {\n      setLastPageGroupS(totalPageCount % PER_PAGE_SIZE === 0 ? PER_PAGE_SIZE : totalPageCount % PER_PAGE_SIZE);\n    } else {\n      setLastPageGroupS(PER_PAGE_SIZE);\n    }\n  }, [currentPageGroupS]);\n\n  useEffect(() => {}, [lastPageGroupS]);\n  return (\n    <>\n      {router.isFallback ? (\n        \" Loadingâ€¦\"\n      ) : (\n        <>\n          <CustomHead type=\"post\" />\n          <div className={cx(\"container\", \"-list\")}>\n            <Header />\n            <div className={cx(\"inner\")}>\n              <article>\n                <SectionTitle title=\"Posts\"></SectionTitle>\n                <div className={cx(\"project_list\")}>\n                  <PostList postList={posts}></PostList>\n                </div>\n              </article>\n              <div className={cx(\"pagination\")}>\n                {currentPageGroupS > 0 && (\n                  <button\n                    type=\"button\"\n                    className={cx(\"page_button\", \"-prev\")}\n                    onClick={() => onClickPageGroup(currentPageGroupS - 1)}\n                  >\n                    &lt;\n                  </button>\n                )}\n                {Array.from({ length: lastPageGroupS }, (_, i) => {\n                  const pageNum = PER_PAGE_SIZE * currentPageGroupS + (i + 1);\n\n                  return (\n                    <Link\n                      key={i}\n                      className={cx(\"link\", { \"-active\": pageNum === +page })}\n                      href={`/posts/${PER_PAGE_SIZE * currentPageGroupS + (i + 1)}`}\n                    >\n                      {pageNum}\n                    </Link>\n                  );\n                })}\n                {currentPageGroupS + 1 < totalPageGroupCount && (\n                  <button\n                    type=\"button\"\n                    className={cx(\"page_button\", \"-prev\")}\n                    onClick={() => onClickPageGroup(currentPageGroupS + 1)}\n                  >\n                    {\">\"}\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n}\n\ntype Params = {\n  params: {\n    page: string;\n  };\n};\n\nexport async function getStaticProps({ params }: Params) {\n  const res: any = await getPosts({\n    fields: [\n      \"title\",\n      \"description\",\n      \"date\",\n      \"slug\",\n      \"author\",\n      \"content\",\n      \"ogImage\",\n      \"coverImage\",\n      \"date\",\n      \"tag\",\n      \"readingTime\",\n    ],\n    page: params.page,\n  });\n  return {\n    props: { ...res, page: params.page },\n  };\n}\n\nexport async function getStaticPaths() {\n  const posts: any = await getPosts({ fields: [\"slug\"] });\n  const totalPageCount = Math.ceil(posts.length / PAGE_SIZE);\n  let paths = [];\n\n  for (let i = 0; i < totalPageCount; i++) {\n    paths.push({\n      params: {\n        page: String(i + 1),\n      },\n    });\n  }\n\n  return {\n    paths,\n    fallback: false,\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post_content\":\"posts_post_content__wH2Ce\",\"container\":\"posts_container__s9Z_H\",\"-list\":\"posts_-list__bsl0U\",\"inner\":\"posts_inner__HIBjT\",\"project_list\":\"posts_project_list__oDV_y\",\"ifram_wrap\":\"posts_ifram_wrap__P_ew9\",\"iframe\":\"posts_iframe__gpxHG\",\"meta\":\"posts_meta__8YunI\",\"date\":\"posts_date__vuNf0\",\"post_title\":\"posts_post_title__lWpp0\",\"tag_area\":\"posts_tag_area__BghHa\",\"tag\":\"posts_tag__ZKXGK\",\"view_badge\":\"posts_view_badge__OHBm0\",\"pagination\":\"posts_pagination__R_03T\",\"-active\":\"posts_-active__YVJEi\"};"],"names":["window","__NEXT_P","push","__webpack_require__","cx","classnames","style","PAGE_SIZE","PER_PAGE_SIZE","PAGE_KEY","concat","SITE_NAME","PAGEGROUP_KEY","Post","param","posts","page","totalPageCount","totalPageGroupCount","currentPageGroup","lastPageGroup","router","useRouter","currentPageGroupS","setCurrentPageGroupS","useState","lastPageGroupS","setLastPageGroupS","onClickPageGroup","nextPageGroup","useEffect","console","log","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Fragment","isFallback","jsxs","CustomHead","type","div","className","Header","article","SectionTitle","title","PostList","postList","button","onClick","Array","from","length","_","i","pageNum","Link","href","module","exports"],"sourceRoot":""}