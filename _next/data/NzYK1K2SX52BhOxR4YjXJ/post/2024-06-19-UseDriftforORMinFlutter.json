{"pageProps":{"post":{"title":"플러터에서 ORM으로 Drift 사용하기","description":"","date":"2024-06-19 14:28","slug":"2024-06-19-UseDriftforORMinFlutter","content":"\n<img src=\"/assets/img/2024-06-19-UseDriftforORMinFlutter_0.png\" />\n\n# 1. 소개\n\nDrift은 Dart와 Flutter 애플리케이션용 강력한 데이터베이스 라이브러리입니다. 타입 안정한 SQL 쿼리, 데이터베이스의 검증 및 마이그레이션과 같은 고급 기능을 지원하기 위해, 컴파일 시간에 실행되는 빌더와 명령줄 도구를 사용합니다.\n\n아래 표를 마핑하기 위한 Dart 클래스를 생성할 수 있습니다:\n\n<div class=\"content-ad\"></div>\n\n```js\nclass TodoItems extends Table {\n  IntColumn get id => integer().autoIncrement()();\n  TextColumn get title => text().withLength(min: 6, max: 32)();\n  TextColumn get content => text().named('body')();\n  IntColumn get category => integer().nullable()();\n}\n```\n\n하지만 저는 ORM 코딩을 생성하기 위해 SQL 문을 사용하는 것을 선호합니다 (나중에 보여드리겠습니다). 보통 테이블용 SQL을 먼저 생성하고, 그 SQL을 재사용해야 하기 때문에 괜찮을 거예요 🙂\n\n# 2. 사용법\n\n나중에 Drift에서 모델을 생성할 때 SQL 문을 사용하는 방법을 보여드리겠습니다.\n\n<div class=\"content-ad\"></div>\n\n# 2.1 필수 라이브러리 가져오기\n\nDrift는 sqlite3와 코드를 생성하는 Flutter 빌드 러너를 기반으로 하고 있기 때문에, pubspec.yaml 파일에 아래 종속성을 가져와야합니다:\n\n```yaml\ndependencies:\n  drift: ^2.16.0\n  sqlite3_flutter_libs: ^0.5.20\n  path_provider: ^2.1.2\n  path: ^1.9.0\n\ndev_dependencies:\n  drift_dev: ^2.16.0\n  build_runner: ^2.4.8\n```\n\n# 2.2 데이터베이스 클래스 생성하기\n\n<div class=\"content-ad\"></div>\n\n예를 들어, 책 데이터베이스를 생성해야 한다면 아래의 book_database.dart 파일을 만들 수 있습니다.\n\n```js\nimport 'dart:io';\n\nimport 'package:drift/drift.dart';\nimport 'package:path_provider/path_provider.dart';\nimport 'package:path/path.dart' as p;\nimport 'package:drift/native.dart';\n\npart 'book_database.g.dart'; // 이 파일은 생성 파일이며 기존 db 파일과 동일한 파일 이름을 사용해야 함\n\n@DriftDatabase(\n  include: {'book.drift'}, // 책 테이블을 만들기 위한 SQL 파일\n)\nclass BookDatabase extends _$BookDatabase {\n  BookDatabase() : super(_openConnection());\n\n  @override\n  int get schemaVersion => 1;\n}\n\nLazyDatabase _openConnection() {\n  return LazyDatabase(() async {\n    // 데이터베이스 파일인 db.sqlite을 여기 앱의 documents 폴더로 넣습니다.\n    final dbFolder = await getApplicationSupportDirectory();\n\n    // db 파일의 경로 설정\n    final file = File(p.join(dbFolder.path, 'book.db'));\n    return NativeDatabase.createInBackground(file);\n  });\n}\n```\n\n# 2.2 SQL 문장 파일 생성\n\nbook.drift 파일을 생성하여 테이블을 만드는 일반적인 SQL 문장을 입력하고, SQL에서 사용자 정의 메서드도 생성할 수 있습니다.\n\n<div class=\"content-ad\"></div>\n\n```js\nCREATE TABLE IF NOT EXISTS \"book\" (\n            \"id\" INTEGER PRIMARY KEY NOT NULL UNIQUE,\n            \"viewCount\" INTEGER DEFAULT(NULL),\n            \"name\" VARCHAR(64) COLLATE NOCASE NOT NULL UNIQUE,\n            \"artist\" VARCHAR(64) COLLATE NOCASE NOT NULL,\n            \"folder\" VARCHAR(64) COLLATE NOCASE NOT NULL,\n            \"coverImg\" VARCHAR(64) COLLATE NOCASE NOT NULL\n);\nCREATE UNIQUE INDEX IF NOT EXISTS \"book_1\" ON book (id);\nCREATE UNIQUE INDEX IF NOT EXISTS \"book_2\" ON book (name);\n\nisBookExists: Select count(*) from book where name = :name Limit 1;\nfilterBooks: SELECT * FROM book WHERE $predicate;\ngetTop10: SELECT * FROM book ORDER BY viewCount DESC Limit 10;\n```\n\n여기서 간단한 book 테이블을 만들었고, id 및 name 열에 대한 인덱스를 생성했습니다. 한편, 3가지 사용자 정의 메서드도 만들었고, 이후에 사용 방법을 알려드리겠습니다.\n\n코드를 생성한 후 drift가 dart 코드로 DB 도우미 클래스에서 이러한 3가지 메서드를 자동으로 생성할 것입니다.\n\n# 2.3 데이터베이스 도우미 클래스 생성하기\n\n<div class=\"content-ad\"></div>\n\n아래 명령어를 실행하여 DB 헬퍼 클래스를 생성할 수 있습니다:\n\n```js\ndart run build_runner build\n```\n\n그 결과로 book_database.g.dart와 같은 하나의 파일이 더 생성될 것이고, 해당 파일 안에 사용자 정의 메서드도 찾을 수 있을 거예요. 물론, 이 동작 방식에 대해 걱정할 필요는 없습니다. 그냥 사용하면 됩니다!\n\n# 2.4 데이터베이스 헬퍼 사용하기\n\n<div class=\"content-ad\"></div>\n\n우리는 예시로 GetX 프레임워크를 사용할 것입니다.\n\nmain.dart 파일에 BookDatabase 클래스를 넣어주세요.\n\n```js\nGet.put(BookDatabase());\n```\n\n이제 우리는 어디서든 사용할 수 있습니다:\n\n<div class=\"content-ad\"></div>\n\n```js\n//책 DB 도우미 가져오기\nfinal BookDatabase _bookDB = Get.find<BookDatabase>();\n\n...\n\n//DB에서 모든 책 아이템 가져오기\nvar dbBooks = await _bookDB.book.select().get();\n...\n//책 아이템의 folder 열만 업데이트하여 DB에 저장\n_bookDB.updateBookItem(\n  bookItem.id,\n  BookCompanion(\n      folder: drift.Value(bookItem.folder),\n  ),\n);\n...\n//책 아이템 일괄 삽입\nList<BookData> dbBooks = [];\ndbBooks.add(BookData(\n        id: 1,\n        viewCount: 0,\n        name: 'book 1',\n        artist: 'artist 1',\n        folder: 'assets/books/01/',\n        coverImg: 'assets/books/01/cover.jpg',));\ndbBooks.add(BookData(\n        id: 2,\n        viewCount: 0,\n        name: 'book 2',\n        artist: 'artist 2',\n        folder: 'assets/books/02/',\n        coverImg: 'assets/books/02/cover.jpg',));\n_bookDB.book.insertAll(dbBooks);e custom methods\n```\n\n예제에서는 SQL 문으로 3개의 메서드를 정의했습니다:\n\n```js\nisBookExists: Select count(*) from book where name = :name Limit 1 ;\nfilterBooks: SELECT * FROM book WHERE $predicate;\ngetTop10: SELECT * FROM book ORDER BY viewCount DESC Limit 10;\n```\n\n아래에서 이를 사용할 수 있습니다.\n\n<div class=\"content-ad\"></div>\n\n```js\n// 도서 이름으로 책이 있는지 확인\nint bookCount = await _bookDB.isBookExists('bookName').getSingle();\n\n// 사용자 지정 필터로 책 가져오기\nvar bookItems = await _bookDB.filterBooks((book) => book.name.contains('bookName')).get();\n\n// 상위 10권의 책 가져오기\nvar topTenBooks = await _bookDB.getTop10().get();\n```\n\n# 3. 결론\n\nDrift는 데이터베이스를 관리하는 데 유용합니다. 데이터를 가져오기 위해 사용자 지정 메서드를 생성할 수 있으며 SQL 문을 사용하지 않고 Dart API를 사용할 수도 있습니다. 자세한 내용은 여기에서 확인할 수 있습니다. 여전히 오피서 웹사이트에서 많은 강력한 기능을 찾을 수 있습니다.\n\n이 글이 마음에 드셨다면 .Net Core, Angular 및 기타 기술에 관한 더 많은 이야기를 보려면 Medium에서 팔로우해주세요! 🙂\n","ogImage":{"url":"/assets/img/2024-06-19-UseDriftforORMinFlutter_0.png"},"coverImage":"/assets/img/2024-06-19-UseDriftforORMinFlutter_0.png","tag":["Tech"],"readingTime":6},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<img src=\"/assets/img/2024-06-19-UseDriftforORMinFlutter_0.png\">\n<h1>1. 소개</h1>\n<p>Drift은 Dart와 Flutter 애플리케이션용 강력한 데이터베이스 라이브러리입니다. 타입 안정한 SQL 쿼리, 데이터베이스의 검증 및 마이그레이션과 같은 고급 기능을 지원하기 위해, 컴파일 시간에 실행되는 빌더와 명령줄 도구를 사용합니다.</p>\n<p>아래 표를 마핑하기 위한 Dart 클래스를 생성할 수 있습니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TodoItems</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Table</span> {\n  <span class=\"hljs-title class_\">IntColumn</span> get id => <span class=\"hljs-title function_\">integer</span>().<span class=\"hljs-title function_\">autoIncrement</span>()();\n  <span class=\"hljs-title class_\">TextColumn</span> get title => <span class=\"hljs-title function_\">text</span>().<span class=\"hljs-title function_\">withLength</span>(<span class=\"hljs-attr\">min</span>: <span class=\"hljs-number\">6</span>, <span class=\"hljs-attr\">max</span>: <span class=\"hljs-number\">32</span>)();\n  <span class=\"hljs-title class_\">TextColumn</span> get content => <span class=\"hljs-title function_\">text</span>().<span class=\"hljs-title function_\">named</span>(<span class=\"hljs-string\">'body'</span>)();\n  <span class=\"hljs-title class_\">IntColumn</span> get category => <span class=\"hljs-title function_\">integer</span>().<span class=\"hljs-title function_\">nullable</span>()();\n}\n</code></pre>\n<p>하지만 저는 ORM 코딩을 생성하기 위해 SQL 문을 사용하는 것을 선호합니다 (나중에 보여드리겠습니다). 보통 테이블용 SQL을 먼저 생성하고, 그 SQL을 재사용해야 하기 때문에 괜찮을 거예요 🙂</p>\n<h1>2. 사용법</h1>\n<p>나중에 Drift에서 모델을 생성할 때 SQL 문을 사용하는 방법을 보여드리겠습니다.</p>\n<div class=\"content-ad\"></div>\n<h1>2.1 필수 라이브러리 가져오기</h1>\n<p>Drift는 sqlite3와 코드를 생성하는 Flutter 빌드 러너를 기반으로 하고 있기 때문에, pubspec.yaml 파일에 아래 종속성을 가져와야합니다:</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">dependencies:</span>\n  <span class=\"hljs-attr\">drift:</span> <span class=\"hljs-string\">^2.16.0</span>\n  <span class=\"hljs-attr\">sqlite3_flutter_libs:</span> <span class=\"hljs-string\">^0.5.20</span>\n  <span class=\"hljs-attr\">path_provider:</span> <span class=\"hljs-string\">^2.1.2</span>\n  <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">^1.9.0</span>\n\n<span class=\"hljs-attr\">dev_dependencies:</span>\n  <span class=\"hljs-attr\">drift_dev:</span> <span class=\"hljs-string\">^2.16.0</span>\n  <span class=\"hljs-attr\">build_runner:</span> <span class=\"hljs-string\">^2.4.8</span>\n</code></pre>\n<h1>2.2 데이터베이스 클래스 생성하기</h1>\n<div class=\"content-ad\"></div>\n<p>예를 들어, 책 데이터베이스를 생성해야 한다면 아래의 book_database.dart 파일을 만들 수 있습니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'dart:io'</span>;\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'package:drift/drift.dart'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'package:path_provider/path_provider.dart'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'package:path/path.dart'</span> <span class=\"hljs-keyword\">as</span> p;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'package:drift/native.dart'</span>;\n\npart <span class=\"hljs-string\">'book_database.g.dart'</span>; <span class=\"hljs-comment\">// 이 파일은 생성 파일이며 기존 db 파일과 동일한 파일 이름을 사용해야 함</span>\n\n@<span class=\"hljs-title class_\">DriftDatabase</span>(\n  <span class=\"hljs-attr\">include</span>: {<span class=\"hljs-string\">'book.drift'</span>}, <span class=\"hljs-comment\">// 책 테이블을 만들기 위한 SQL 파일</span>\n)\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BookDatabase</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">_$BookDatabase</span> {\n  <span class=\"hljs-title class_\">BookDatabase</span>() : <span class=\"hljs-variable language_\">super</span>(<span class=\"hljs-title function_\">_openConnection</span>());\n\n  @override\n  int get schemaVersion => <span class=\"hljs-number\">1</span>;\n}\n\n<span class=\"hljs-title class_\">LazyDatabase</span> <span class=\"hljs-title function_\">_openConnection</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">LazyDatabase</span>(() <span class=\"hljs-keyword\">async</span> {\n    <span class=\"hljs-comment\">// 데이터베이스 파일인 db.sqlite을 여기 앱의 documents 폴더로 넣습니다.</span>\n    final dbFolder = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getApplicationSupportDirectory</span>();\n\n    <span class=\"hljs-comment\">// db 파일의 경로 설정</span>\n    final file = <span class=\"hljs-title class_\">File</span>(p.<span class=\"hljs-title function_\">join</span>(dbFolder.<span class=\"hljs-property\">path</span>, <span class=\"hljs-string\">'book.db'</span>));\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">NativeDatabase</span>.<span class=\"hljs-title function_\">createInBackground</span>(file);\n  });\n}\n</code></pre>\n<h1>2.2 SQL 문장 파일 생성</h1>\n<p>book.drift 파일을 생성하여 테이블을 만드는 일반적인 SQL 문장을 입력하고, SQL에서 사용자 정의 메서드도 생성할 수 있습니다.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">CREATE</span> <span class=\"hljs-variable constant_\">TABLE</span> <span class=\"hljs-variable constant_\">IF</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">EXISTS</span> <span class=\"hljs-string\">\"book\"</span> (\n            <span class=\"hljs-string\">\"id\"</span> <span class=\"hljs-variable constant_\">INTEGER</span> <span class=\"hljs-variable constant_\">PRIMARY</span> <span class=\"hljs-variable constant_\">KEY</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">NULL</span> <span class=\"hljs-variable constant_\">UNIQUE</span>,\n            <span class=\"hljs-string\">\"viewCount\"</span> <span class=\"hljs-variable constant_\">INTEGER</span> <span class=\"hljs-title function_\">DEFAULT</span>(<span class=\"hljs-variable constant_\">NULL</span>),\n            <span class=\"hljs-string\">\"name\"</span> <span class=\"hljs-title function_\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-variable constant_\">COLLATE</span> <span class=\"hljs-variable constant_\">NOCASE</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">NULL</span> <span class=\"hljs-variable constant_\">UNIQUE</span>,\n            <span class=\"hljs-string\">\"artist\"</span> <span class=\"hljs-title function_\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-variable constant_\">COLLATE</span> <span class=\"hljs-variable constant_\">NOCASE</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">NULL</span>,\n            <span class=\"hljs-string\">\"folder\"</span> <span class=\"hljs-title function_\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-variable constant_\">COLLATE</span> <span class=\"hljs-variable constant_\">NOCASE</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">NULL</span>,\n            <span class=\"hljs-string\">\"coverImg\"</span> <span class=\"hljs-title function_\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-variable constant_\">COLLATE</span> <span class=\"hljs-variable constant_\">NOCASE</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">NULL</span>\n);\n<span class=\"hljs-variable constant_\">CREATE</span> <span class=\"hljs-variable constant_\">UNIQUE</span> <span class=\"hljs-variable constant_\">INDEX</span> <span class=\"hljs-variable constant_\">IF</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">EXISTS</span> <span class=\"hljs-string\">\"book_1\"</span> <span class=\"hljs-variable constant_\">ON</span> book (id);\n<span class=\"hljs-variable constant_\">CREATE</span> <span class=\"hljs-variable constant_\">UNIQUE</span> <span class=\"hljs-variable constant_\">INDEX</span> <span class=\"hljs-variable constant_\">IF</span> <span class=\"hljs-variable constant_\">NOT</span> <span class=\"hljs-variable constant_\">EXISTS</span> <span class=\"hljs-string\">\"book_2\"</span> <span class=\"hljs-variable constant_\">ON</span> book (name);\n\n<span class=\"hljs-attr\">isBookExists</span>: <span class=\"hljs-title class_\">Select</span> <span class=\"hljs-title function_\">count</span>(*) <span class=\"hljs-keyword\">from</span> book where name = :name <span class=\"hljs-title class_\">Limit</span> <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-attr\">filterBooks</span>: <span class=\"hljs-variable constant_\">SELECT</span> * <span class=\"hljs-variable constant_\">FROM</span> book <span class=\"hljs-variable constant_\">WHERE</span> $predicate;\n<span class=\"hljs-attr\">getTop10</span>: <span class=\"hljs-variable constant_\">SELECT</span> * <span class=\"hljs-variable constant_\">FROM</span> book <span class=\"hljs-variable constant_\">ORDER</span> <span class=\"hljs-variable constant_\">BY</span> viewCount <span class=\"hljs-variable constant_\">DESC</span> <span class=\"hljs-title class_\">Limit</span> <span class=\"hljs-number\">10</span>;\n</code></pre>\n<p>여기서 간단한 book 테이블을 만들었고, id 및 name 열에 대한 인덱스를 생성했습니다. 한편, 3가지 사용자 정의 메서드도 만들었고, 이후에 사용 방법을 알려드리겠습니다.</p>\n<p>코드를 생성한 후 drift가 dart 코드로 DB 도우미 클래스에서 이러한 3가지 메서드를 자동으로 생성할 것입니다.</p>\n<h1>2.3 데이터베이스 도우미 클래스 생성하기</h1>\n<div class=\"content-ad\"></div>\n<p>아래 명령어를 실행하여 DB 헬퍼 클래스를 생성할 수 있습니다:</p>\n<pre><code class=\"hljs language-js\">dart run build_runner build\n</code></pre>\n<p>그 결과로 book_database.g.dart와 같은 하나의 파일이 더 생성될 것이고, 해당 파일 안에 사용자 정의 메서드도 찾을 수 있을 거예요. 물론, 이 동작 방식에 대해 걱정할 필요는 없습니다. 그냥 사용하면 됩니다!</p>\n<h1>2.4 데이터베이스 헬퍼 사용하기</h1>\n<div class=\"content-ad\"></div>\n<p>우리는 예시로 GetX 프레임워크를 사용할 것입니다.</p>\n<p>main.dart 파일에 BookDatabase 클래스를 넣어주세요.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">Get</span>.<span class=\"hljs-title function_\">put</span>(<span class=\"hljs-title class_\">BookDatabase</span>());\n</code></pre>\n<p>이제 우리는 어디서든 사용할 수 있습니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//책 DB 도우미 가져오기</span>\nfinal <span class=\"hljs-title class_\">BookDatabase</span> _bookDB = <span class=\"hljs-title class_\">Get</span>.<span class=\"hljs-property\">find</span>&#x3C;<span class=\"hljs-title class_\">BookDatabase</span>>();\n\n...\n\n<span class=\"hljs-comment\">//DB에서 모든 책 아이템 가져오기</span>\n<span class=\"hljs-keyword\">var</span> dbBooks = <span class=\"hljs-keyword\">await</span> _bookDB.<span class=\"hljs-property\">book</span>.<span class=\"hljs-title function_\">select</span>().<span class=\"hljs-title function_\">get</span>();\n...\n<span class=\"hljs-comment\">//책 아이템의 folder 열만 업데이트하여 DB에 저장</span>\n_bookDB.<span class=\"hljs-title function_\">updateBookItem</span>(\n  bookItem.<span class=\"hljs-property\">id</span>,\n  <span class=\"hljs-title class_\">BookCompanion</span>(\n      <span class=\"hljs-attr\">folder</span>: drift.<span class=\"hljs-title class_\">Value</span>(bookItem.<span class=\"hljs-property\">folder</span>),\n  ),\n);\n...\n<span class=\"hljs-comment\">//책 아이템 일괄 삽입</span>\n<span class=\"hljs-title class_\">List</span>&#x3C;<span class=\"hljs-title class_\">BookData</span>> dbBooks = [];\ndbBooks.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-title class_\">BookData</span>(\n        <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>,\n        <span class=\"hljs-attr\">viewCount</span>: <span class=\"hljs-number\">0</span>,\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'book 1'</span>,\n        <span class=\"hljs-attr\">artist</span>: <span class=\"hljs-string\">'artist 1'</span>,\n        <span class=\"hljs-attr\">folder</span>: <span class=\"hljs-string\">'assets/books/01/'</span>,\n        <span class=\"hljs-attr\">coverImg</span>: <span class=\"hljs-string\">'assets/books/01/cover.jpg'</span>,));\ndbBooks.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-title class_\">BookData</span>(\n        <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">2</span>,\n        <span class=\"hljs-attr\">viewCount</span>: <span class=\"hljs-number\">0</span>,\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'book 2'</span>,\n        <span class=\"hljs-attr\">artist</span>: <span class=\"hljs-string\">'artist 2'</span>,\n        <span class=\"hljs-attr\">folder</span>: <span class=\"hljs-string\">'assets/books/02/'</span>,\n        <span class=\"hljs-attr\">coverImg</span>: <span class=\"hljs-string\">'assets/books/02/cover.jpg'</span>,));\n_bookDB.<span class=\"hljs-property\">book</span>.<span class=\"hljs-title function_\">insertAll</span>(dbBooks);e custom methods\n</code></pre>\n<p>예제에서는 SQL 문으로 3개의 메서드를 정의했습니다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">isBookExists</span>: <span class=\"hljs-title class_\">Select</span> <span class=\"hljs-title function_\">count</span>(*) <span class=\"hljs-keyword\">from</span> book where name = :name <span class=\"hljs-title class_\">Limit</span> <span class=\"hljs-number\">1</span> ;\n<span class=\"hljs-attr\">filterBooks</span>: <span class=\"hljs-variable constant_\">SELECT</span> * <span class=\"hljs-variable constant_\">FROM</span> book <span class=\"hljs-variable constant_\">WHERE</span> $predicate;\n<span class=\"hljs-attr\">getTop10</span>: <span class=\"hljs-variable constant_\">SELECT</span> * <span class=\"hljs-variable constant_\">FROM</span> book <span class=\"hljs-variable constant_\">ORDER</span> <span class=\"hljs-variable constant_\">BY</span> viewCount <span class=\"hljs-variable constant_\">DESC</span> <span class=\"hljs-title class_\">Limit</span> <span class=\"hljs-number\">10</span>;\n</code></pre>\n<p>아래에서 이를 사용할 수 있습니다.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// 도서 이름으로 책이 있는지 확인</span>\nint bookCount = <span class=\"hljs-keyword\">await</span> _bookDB.<span class=\"hljs-title function_\">isBookExists</span>(<span class=\"hljs-string\">'bookName'</span>).<span class=\"hljs-title function_\">getSingle</span>();\n\n<span class=\"hljs-comment\">// 사용자 지정 필터로 책 가져오기</span>\n<span class=\"hljs-keyword\">var</span> bookItems = <span class=\"hljs-keyword\">await</span> _bookDB.<span class=\"hljs-title function_\">filterBooks</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">book</span>) =></span> book.<span class=\"hljs-property\">name</span>.<span class=\"hljs-title function_\">contains</span>(<span class=\"hljs-string\">'bookName'</span>)).<span class=\"hljs-title function_\">get</span>();\n\n<span class=\"hljs-comment\">// 상위 10권의 책 가져오기</span>\n<span class=\"hljs-keyword\">var</span> topTenBooks = <span class=\"hljs-keyword\">await</span> _bookDB.<span class=\"hljs-title function_\">getTop10</span>().<span class=\"hljs-title function_\">get</span>();\n</code></pre>\n<h1>3. 결론</h1>\n<p>Drift는 데이터베이스를 관리하는 데 유용합니다. 데이터를 가져오기 위해 사용자 지정 메서드를 생성할 수 있으며 SQL 문을 사용하지 않고 Dart API를 사용할 수도 있습니다. 자세한 내용은 여기에서 확인할 수 있습니다. 여전히 오피서 웹사이트에서 많은 강력한 기능을 찾을 수 있습니다.</p>\n<p>이 글이 마음에 드셨다면 .Net Core, Angular 및 기타 기술에 관한 더 많은 이야기를 보려면 Medium에서 팔로우해주세요! 🙂</p>\n</body>\n</html>\n"},"__N_SSG":true}