{"pageProps":{"post":{"title":"Flutter에서 동적으로 앱 아이콘 변경하는 방법","description":"","date":"2024-06-23 14:51","slug":"2024-06-23-DynamicchangeAppIconFlutter","content":"\n안녕하세요! 이번 기사에서는 앱 아이콘을 동적으로 변경하는 방법을 구성하고 코딩하는 방법을 살펴보겠습니다. 안드로이드에서는 원하는 경우 라벨도 변경할 수 있습니다.\n\n우선, 새로운 Flutter 프로젝트를 만들어보세요. 저희 예시에서는 dynamic_icon_example이라는 프로젝트를 만들었습니다. 너무 많은 코딩 시간을 낭비하지 않도록 미리 만들어둔 예시 코드를 사용하겠습니다.\n\n시작해봅시다. 첫 번째로 이해해야 할 것은 MethodChannel입니다. 이 클래스를 사용하면 Flutter 애플리케이션 내에서 네이티브 코드를 작성할 수 있으며 (iOS의 경우 Swift, Android의 경우 Kotlin), 이 코드를 호출할 수 있습니다. 실용적인 예시를 살펴보겠습니다.\n\n앱 폴더 내에서 android → app → src → main → kotlin → MainActivity.kt 파일을 열어보세요. 다음과 같은 내용을 볼 수 있을 것입니다:\n\n<div class=\"content-ad\"></div>\n\n![Dynamic Change App Icon](/assets/img/2024-06-23-DynamicchangeAppIconFlutter_0.png)\n\n프로젝트를 생성할 때 생성된 이름이 첫 번째 줄입니다. 이제 Flutter 측에서 메소드를 호출하기 위한 코드를 작성해야 합니다. 여기에서 호출할 채널을 구성할 것인데, 그 채널의 이름은 \"com.example.dynamic_icon_example/icon\"으로 지정할 것입니다. 또한 몇 가지 import 문을 추가해야 합니다. 여기에 있습니다:\n\n```js\npackage com.example.com.example.dynamic_icon_example\n\nimport androidx.annotation.NonNull\nimport io.flutter.embedding.android.FlutterFragmentActivity\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.MethodChannel\nimport io.flutter.embedding.android.FlutterActivity\nimport io.flutter.plugins.GeneratedPluginRegistrant\n```\n\n이제 도움이 될 몇 가지 속성을 만들 수 있습니다. MainActivity 클래스 내부에 두 개의 변수를 추가할 수 있습니다:\n\n<div class=\"content-ad\"></div>\n\n```js\n    private val CHANNEL = \"app.com.get.number\"\n    var methodChannelResult: MethodChannel.Result? = null\n```\n\nCHANNEL 변수는 호출할 채널의 이름입니다; 원하는 이름을 넣을 수 있어요. 이후에 configureFlutterEngine을 오버라이드하고 우리의 메소드를 생성할 수 있어요.\n\n```js\n@Override\n    override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {\n        GeneratedPluginRegistrant.registerWith(flutterEngine)\n        super.configureFlutterEngine(flutterEngine)\n\n        MethodChannel(flutterEngine.dartExecutor, CHANNEL).setMethodCallHandler { call, result ->\n            try {\n                methodChannelResult = result\n                if (call.method.equals(\"odd\")) {\n                    result.success(1)\n                } else if (call.method.equals(\"even\")) {\n                    result.success(2)\n                } else {\n                    result.success(-1)\n                }\n            } catch (e: Exception) {\n                print(e)\n            }\n        }\n    }\n```\n\n이렇게 하면 Flutter 측에서 우리의 메소드를 호출할 수 있어요. 마지막으로, 완전한 코드는 다음과 같아요:\n\n<div class=\"content-ad\"></div>\n\n```kotlin\npackage com.example.dynamic_icon_example\n\nimport androidx.annotation.NonNull\nimport io.flutter.embedding.android.FlutterFragmentActivity\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.MethodChannel\nimport io.flutter.embedding.android.FlutterActivity\nimport io.flutter.plugins.GeneratedPluginRegistrant\n\nclass MainActivity: FlutterActivity() {\n\n    private val CHANNEL = \"app.com.get.number\"\n    var methodChannelResult: MethodChannel.Result? = null\n\n    @Override\n    override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {\n        GeneratedPluginRegistrant.registerWith(flutterEngine)\n        super.configureFlutterEngine(flutterEngine)\n\n        MethodChannel(flutterEngine.dartExecutor, CHANNEL).setMethodCallHandler { call, result ->\n            try {\n                methodChannelResult = result\n                if (call.method.equals(\"odd\")) {\n                    result.success(1)\n                } else if (call.method.equals(\"even\")) {\n                    result.success(2)\n                } else {\n                    result.success(-1)\n                }\n            } catch (e: Exception) {\n                print(e)\n            }\n        }\n    }\n}\n```\n\n우리의 Android에서의 MethodChannel 설정이 완료되었습니다. 이제 iOS로 넘어갑시다. ios 폴더로 이동하여 `Runner` -> `AppDelegate.swift`로 이동해주세요.\n![앱 아이콘을 동적으로 변경하는 플러터 앱의 스크린샷](/assets/img/2024-06-23-DynamicchangeAppIconFlutter_1.png)\n\n여기가 iOS 측의 코드입니다. 코드는 다음과 같이 보일 것입니다:\n\n<div class=\"content-ad\"></div>\n\n```js\nimport UIKit\nimport Flutter\n\n@UIApplicationMain\n@objc class AppDelegate: FlutterAppDelegate {\n  override func application(\n    _ application: UIApplication,\n    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\n  ) -> Bool {\n\n    let controller: FlutterViewController = window?.rootViewController as! FlutterViewController\n    let appIconChannel = FlutterMethodChannel(\n      name: \"com.example.dynamic_icon_example.get.number\", binaryMessenger: controller.binaryMessenger)\n\n    appIconChannel.setMethodCallHandler({\n      [weak self] (call: FlutterMethodCall, result: FlutterResult) -> Void in\n      if call.method == \"odd\" {\n       result(1)\n      } else if call.method == \"even\" {\n        result(2)\n      } else {\n       result(-1)\n        return\n      }\n    })\n\n    GeneratedPluginRegistrant.register(with: self)\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\n  }\n}\n```\n\n위 코드를 설명하자면, 이 함수는 화면에서 선택한 홀수나 짝수에 따라 홀수나 짝수를 반환합니다. 이제 main.dart 파일로 돌아가서 코드를 작성할 수 있습니다. 소스 코드에서 모든 주석을 제거하고 \\_incrementCounter라는 함수를 찾습니다. 이 함수를 비동기식으로 만듭니다. 상태(State) 내부에 채널을 호출할 변수를 만들 수 있습니다. 다음과 같이 채널을 호출하는 변수를 생성합니다:\n\n```js\nclass _MyHomePageState extends State<MyHomePage> {\n  int _counter = 0;\n  final MethodChannel channel = const MethodChannel('com.example.dynamic_icon_example.get.number');\n```\n\n그리고 \\_incrementCounter 함수 내부에서 메소드를 호출할 것입니다:\n\n<div class=\"content-ad\"></div>\n\n```js\n  Future<void> _incrementCounter() async {\n    final int number =\n        await channel.invokeMethod(_counter % 2 == 0 ? 'even' : 'odd');\n    print(number);\n    setState(() {\n      _counter++;\n    });\n  }\n```\n\n그리고 디버그 콘솔에서 값들을 확인할 수 있습니다:\n\n![이미지](/assets/img/2024-06-23-DynamicchangeAppIconFlutter_2.png)\n\n이제 앱 아이콘을 동적으로 변경하는 방법에 대해 이야기해보겠습니다. 먼저 Android 및 iOS 앱을 구성해야 합니다.\n\n<div class=\"content-ad\"></div>\n\nANDROID\n\n안녕하세요! 안드로이드 개발자 여러분!\n\nandroid/app/src/main 폴더 안의 AndroidManifest.xml 파일을 열어주세요. `activity` 태그를 찾은 후, 그 안에 다음 코드를 추가해주세요:\n\n```js\nandroid: enabled = \"false\";\n```\n\n이후, 각 아이콘 변형에 대해 activity-alias를 생성할 건데요. 각 activity-alias 코드는 다음과 같이 보일 거에요:\n\n<div class=\"content-ad\"></div>\n\n```js\n<activity-alias\n    android:name=\".launcherAlias.one\"\n    android:enabled=\"false\"\n    android:icon=\"@mipmap/icon_launch\"\n    android:label=\"One\"\n    android:targetActivity=\".MainActivity\"\n    android:exported=\"true\">\n    <intent-filter>\n        <action android:name=\"android.intent.action.MAIN\" />\n        <category android:name=\"android.intent.category.LAUNCHER\" />\n    </intent-filter>\n    <intent-filter>\n        <action android:name=\"android.intent.action.VIEW\" />\n        <category android:name=\"android.intent.category.DEFAULT\" />\n        <category android:name=\"android.intent.category.BROWSABLE\" />\n    </intent-filter>\n</activity-alias>\n\n<activity-alias\n    android:name=\".launcherAlias.two\"\n    android:enabled=\"false\"\n    android:icon=\"@mipmap/icon_launch\"\n    android:label=\"Two\"\n    android:targetActivity=\".MainActivity\"\n    android:exported=\"true\">\n    <intent-filter>\n        <action android:name=\"android.intent.action.MAIN\" />\n        <category android:name=\"android.intent.category.LAUNCHER\" />\n    </intent-filter>\n    <intent-filter>\n        <action android:name=\"android.intent.action.VIEW\" />\n        <category android:name=\"android.intent.category.DEFAULT\" />\n        <category android:name=\"android.intent.category.BROWSABLE\" />\n    </intent-filter>\n</activity-alias>\n\n<activity-alias\n    android:name=\".launcherAlias.default\"\n    android:enabled=\"true\"\n    android:icon=\"@mipmap/icon_launch\"\n    android:label=\"Dynamic\"\n    android:targetActivity=\".MainActivity\"\n    android:exported=\"true\">\n    <intent-filter>\n        <action android:name=\"android.intent.action.MAIN\" />\n        <category android:name=\"android.intent.category.LAUNCHER\" />\n    </intent-filter>\n    <intent-filter>\n        <action android:name=\"android.intent.action.VIEW\" />\n        <category android:name=\"android.intent.category.DEFAULT\" />\n        <category android:name=\"android.intent.category.BROWSABLE\" />\n    </intent-filter>\n</activity-alias>\n```\n\n2개의 추가 구성을 만들어 Android 앱 아이콘 및 앱 레이블을 변경할 것입니다. 아이콘만 변경하려면 각 activity-alias 정의에서 android:label 줄을 삭제하면 됩니다. 이제 이미지를 생성해야 합니다. 이미지를 생성하려면 이 사이트를 사용할 수 있습니다: AppIcon. 이제 각 activity-alias의 android:icon 속성을 mipmap 폴더 내의 이미지 이름과 일치하도록 변경하십시오. AndroidManifest.xml은 다음과 같아야 합니다:\n\n```js\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <application\n        android:label=\"Dynamic\"\n        android:name=\"${applicationName}\"\n        android:icon=\"@mipmap/ic_launcher\">\n        <activity\n            android:name=\".MainActivity\"\n            android:exported=\"true\"\n            android:enabled=\"false\"\n            android:launchMode=\"singleTop\"\n            android:theme=\"@style/LaunchTheme\"\n            android:configChanges=\"orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode\"\n            android:hardwareAccelerated=\"true\"\n            android:windowSoftInputMode=\"adjustResize\">\n            <!-- Specifies an Android theme to apply to this Activity as soon as\n                 the Android process has started. This theme is visible to the user\n                 while the Flutter UI initializes. After that, this theme continues\n                 to determine the Window background behind the Flutter UI. -->\n            <meta-data\n                android:name=\"io.flutter.embedding.android.NormalTheme\"\n                android:resource=\"@style/NormalTheme\"\n            />\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <!-- Don't delete the meta-data below.\n             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java -->\n        <meta-data\n            android:name=\"flutterEmbedding\"\n            android:value=\"2\" />\n\n        <!-- 여기에 위의 activity-alias 코드를 붙여넣으세요 -->\n    </application>\n</manifest>\n\nMainActivity.kt 파일이 있는 폴더로 이동하면, 각 alias에 대한 이름으로 파일을 생성해야 합니다. \".launcherAlias.\" 이후의 마지막 이름만 사용하면 됩니다. 제 경우에는 파일 이름이 Default.kt, One.kt, Two.kt 여야 합니다. 각 파일에 아래 코드를 복사하여 붙여넣고 이름만 변경하시면 됩니다.\n```\n\n<div class=\"content-ad\"></div>\n\n```kotlin\npackage com.example.dynamic_icon_example.launcherAlias\n\nimport io.flutter.embedding.android.FlutterActivity\n// 각 alias의 이름을 변경합니다.\nclass Default: FlutterActivity() {\n}\n```\n\nMainActivity에서는 앱의 아이콘과 라벨을 변경하는 코드를 만들 것입니다. CHANNEL의 이름을 변경하여 아이콘 변경을 나타내는 의미 있는 이름으로 바꿔주세요. 예를 들어, \"app.com.get.change.icon\"과 같은 이름을 사용했습니다.\n\n다음은 사용할 주석이 달린 코드입니다:\n\n```kotlin\npackage com.example.dynamic_icon_example\n\nimport android.content.ComponentName\nimport android.content.pm.PackageManager\nimport androidx.annotation.NonNull\nimport io.flutter.embedding.android.FlutterFragmentActivity\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.MethodChannel\nimport io.flutter.embedding.android.FlutterActivity\nimport io.flutter.plugins.GeneratedPluginRegistrant\n\nclass MainActivity: FlutterActivity() {\n\n    // 채널의 이름\n    private val CHANNEL = \"app.com.get.change.icon\"\n    var methodChannelResult: MethodChannel.Result? = null\n    // 초기 점을 제외한 모든 alias를 추가합니다.\n    val aliases = listOf(\"launcherAlias.Default\", \"launcherAlias.One\", \"launcherAlias.Two\")\n\n    @Override\n    override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {\n        GeneratedPluginRegistrant.registerWith(flutterEngine)\n        super.configureFlutterEngine(flutterEngine)\n\n        MethodChannel(flutterEngine.dartExecutor, CHANNEL).setMethodCallHandler { call, result ->\n            try {\n                methodChannelResult = result\n                // 우리가 호출할 메소드\n                if (call.method.equals(\"changeIcon\")) {\n                    // 전달된 이름을 복구합니다\n                    val targetIcon = call.argument<String>(\"targetIcon\") as String\n                    // 변경을 수행할 함수를 호출합니다.\n                    // 여기서 이미 \"launcherAlias\"를 추가했습니다.\n                    setIcon(\"launcherAlias.$targetIcon\")\n                } else {\n                    result.success(-1)\n                }\n            } catch (e: Exception) {\n                print(e)\n            }\n        }\n    }\n\n    private fun setIcon(targetIcon: String) {\n        try {\n            // 사용할 패키지 이름을 포함하는 String을 작성합니다.\n            val packageManager: PackageManager = applicationContext!!.packageManager\n            val packageName = applicationContext!!.packageName\n            val className = StringBuilder()\n            className.append(packageName)\n            className.append(\".\")\n            className.append(targetIcon)\n\n            aliases.forEach { alias ->\n                // 모든 목록을 실행하고 설정할 것 외에는 모두 비활성화합니다.\n                val state =\n                    if (alias == targetIcon) PackageManager.COMPONENT_ENABLED_STATE_ENABLED\n                    else PackageManager.COMPONENT_ENABLED_STATE_DISABLED\n\n                // 새로운 아이콘과 라벨을 설정합니다.\n                packageManager.setComponentEnabledSetting(\n                    ComponentName(packageName, \"com.example.dynamic_icon_example.$alias\"),\n                    state,\n                    PackageManager.DONT_KILL_APP\n                )\n            }\n        } catch (e: Exception) {\n            print(e)\n        }\n    }\n}\n```\n\n<div class=\"content-ad\"></div>\n\n플러터 쪽에서 main.dart의 \\_incrementCounter 함수 내부에서:\n\n```js\n  Future<void> _incrementCounter() async {\n// 네이티브 메서드를 호출하여 아이콘을 변경할 예정\n// 아이콘의 최종 이름만 전달하면 \"launcherAlias\"는 kotlin 쪽에서 설정됨\n    final dynamic number =\n        await channel.invokeMethod('changeIcon', <String, dynamic>{'targetIcon': 'One'});\n    print(number);\n    setState(() {\n      _counter++;\n    });\n  }\n```\n\n이제 테스트할 수 있습니다.\n\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*eICX4eVobzz-tyLme9W4Hg.gif\" />\n\n<div class=\"content-ad\"></div>\n\n본글에 나온 코드는 앱이 아이콘을 변경할 때 종료되는 문제를 해결하는 코드입니다. MainActivity 폴더로 돌아가 \"SharedPref.kt\"라는 다른 파일을 만들어 아래 코드를 붙여넣으세요:\n\n```js\npackage com.example.dynamic_icon_example.helper\n\nimport android.content.Context\nimport android.content.Context.MODE_PRIVATE\nimport android.content.SharedPreferences\n\nopen class AppSharedPref {\n\n    companion object {\n        const val CONFIGURATION_PREF = \"configurationPreference\"\n\n        /*런처 아이콘*/\n        private const val KEY_LAUNCHER_IMAGE = \"launcherIcon\"\n        private const val KEY_LAUNCHER_COUNT = \"count\"\n        private const val KEY_LAUNCHER_SAVED_COUNT = \"savedCount\"\n\n        fun getSharedPreference(context: Context, preferenceFile: String): SharedPreferences {\n            return context.getSharedPreferences(preferenceFile, MODE_PRIVATE)\n        }\n\n        fun getSharedPreferenceEditor(\n            context: Context,\n            preferenceFile: String\n        ): SharedPreferences.Editor {\n            return context.getSharedPreferences(preferenceFile, MODE_PRIVATE).edit()\n        }\n\n        /* 설정 관련 함수 */\n\n        fun getLauncherIcon(context: Context): String? {\n            return getSharedPreference(context, CONFIGURATION_PREF)\n                .getString(KEY_LAUNCHER_IMAGE, \"launcherAlias.DefaultLauncherAlias\")\n        }\n\n        fun setLauncherIcon(context: Context, launcherIcon: String) {\n            getSharedPreferenceEditor(context, CONFIGURATION_PREF)\n                .putString(KEY_LAUNCHER_IMAGE, launcherIcon)\n                .apply()\n        }\n\n        fun getCount(context: Context): Int {\n            return getSharedPreference(context, CONFIGURATION_PREF).getInt(KEY_LAUNCHER_COUNT, 0)\n        }\n\n        fun setCount(context: Context, count: Int) {\n            getSharedPreferenceEditor(context, CONFIGURATION_PREF)\n                .putInt(KEY_LAUNCHER_COUNT, count)\n                .apply()\n        }\n\n        fun getSavedCount(context: Context): Int {\n            return getSharedPreference(context, CONFIGURATION_PREF)\n                .getInt(KEY_LAUNCHER_SAVED_COUNT, 0)\n        }\n\n        fun setSavedCount(context: Context, count: Int) {\n            getSharedPreferenceEditor(context, CONFIGURATION_PREF)\n                .putInt(KEY_LAUNCHER_SAVED_COUNT, count)\n                .apply()\n        }\n    }\n}\n```\n\n이 코드는 공유 설정을 사용하여 메모리에 아이콘 변경 정보를 저장합니다. 이제 MainActivity로 돌아가 일부 변경사항을 가해봅시다.\n\n```js\npackage com.example.dynamic_icon_example\n\nimport android.content.ComponentName\nimport android.content.pm.PackageManager\nimport androidx.annotation.NonNull\nimport io.flutter.embedding.android.FlutterFragmentActivity\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.MethodChannel\nimport io.flutter.embedding.android.FlutterActivity\nimport io.flutter.plugins.GeneratedPluginRegistrant\nimport com.example.dynamic_icon_example.helper.AppSharedPref\n\nclass MainActivity: FlutterActivity() {\n\n    private val CHANNEL = \"app.com.get.change.icon\"\n    var methodChannelResult: MethodChannel.Result? = null\n    // initial dot을 뺀 모든 별칭을 추가하세요\n    val aliases = listOf(\"launcherAlias.Default\", \"launcherAlias.One\", \"launcherAlias.Two\")\n\n    @Override\n    override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {\n        GeneratedPluginRegistrant.registerWith(flutterEngine)\n        super.configureFlutterEngine(flutterEngine)\n\n        MethodChannel(flutterEngine.dartExecutor, CHANNEL).setMethodCallHandler { call, result ->\n            try {\n                methodChannelResult = result\n                if (call.method.equals(\"changeIcon\")) {\n                    val targetIcon = call.argument<String>(\"targetIcon\") as String\n                    // 여기에서 정보를 저장하여 앱을 닫은 후 적용할 것입니다\n                    AppSharedPref.setLauncherIcon(this, \"launcherAlias.$targetIcon\")\n                    AppSharedPref.setCount(this, 0)\n                } else {\n                    result.success(-1)\n                }\n            } catch (e: Exception) {\n                print(e)\n            }\n        }\n    }\n\n    // 우리 앱이 종료될 때 아이콘 및 레이블 변경을 호출할 메소드입니다\n    override fun onDestroy() {\n        setIcon(AppSharedPref.getLauncherIcon(this).toString())\n        super.onDestroy()\n    }\n\n    private fun setIcon(targetIcon: String) {\n        try {\n            val packageManager: PackageManager = applicationContext!!.packageManager\n            val packageName = applicationContext!!.packageName\n            val className = StringBuilder()\n            className.append(packageName)\n            className.append(\".\")\n            className.append(targetIcon)\n\n            aliases.forEach { alias ->\n                val state =\n                    if (alias == targetIcon) PackageManager.COMPONENT_ENABLED_STATE_ENABLED\n                    else PackageManager.COMPONENT_ENABLED_STATE_DISABLED\n\n                packageManager.setComponentEnabledSetting(\n                    ComponentName(packageName, \"com.example.dynamic_icon_example.$alias\"),\n                    state,\n                    PackageManager.DONT_KILL_APP\n                )\n            }\n        } catch (e: Exception) {\n            print(e)\n        }\n    }\n}\n```\n\n<div class=\"content-ad\"></div>\n\n결과를 확인해봅시다:\n\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*yIABZsLhcIv84MjkGh1cWA.gif\" />\n\nIOS\n\niOS로 이동하여 Xcode로 열어주세요. Runner 디렉토리 내에 AlternativeIcons라는 폴더를 생성해주세요. 여기에 이미지를 저장하겠습니다.\n\n<div class=\"content-ad\"></div>\n\n![이미지_이름](/assets/img/2024-06-23-DynamicchangeAppIconFlutter_3.png)\n\n이제 Xcode의 Info.plist로 이동하여 \"Icon files (iOS 5)\"라는 매개변수를 Dictionary으로 추가하십시오. 이 매개변수 내에서 \"CFBundleAlternateIcons\"를 Dictionary로 추가하십시오. 그런 다음 사용하려는 각 새 이미지에 대해(예: \"Default\", \"One\", \"Two\") 새 항목을 만드십시오. 각 항목 내에서 \"CFBundleIconFiles\" 매개변수를 Array로 추가하십시오. 배열의 첫 번째 위치에는 이미지 이름을 @2x 또는 @3x 없이, .png 없이 사용하십시오.\n\n최종적으로 아래와 같이 보여야 합니다:\n\n![이미지_이름](/assets/img/2024-06-23-DynamicchangeAppIconFlutter_4.png)\n\n<div class=\"content-ad\"></div>\n\nAppDelegate.swift 파일에 함수를 만들어 봅시다.\n\n```js\nimport UIKit\nimport Flutter\n\n@UIApplicationMain\n@objc class AppDelegate: FlutterAppDelegate {\n  override func application(\n    _ application: UIApplication,\n    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\n  ) -> Bool {\n\n    let controller: FlutterViewController = window?.rootViewController as! FlutterViewController\n    //우리 채널 이름이 업데이트됐어요\n    let appIconChannel = FlutterMethodChannel(\n      name: \"app.com.get.change.icon\", binaryMessenger: controller.binaryMessenger)\n\n    appIconChannel.setMethodCallHandler({\n      [weak self] (call: FlutterMethodCall, result: FlutterResult) -> Void in\n      if call.method == \"changeIcon\" {\n        // 변경을 수행하는 함수\n       self?.changeAppIcon(call: call, result: result)\n      } else {\n       result(-1)\n        return\n      }\n    })\n\n    GeneratedPluginRegistrant.register(with: self)\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\n  }\n\n  private func changeAppIcon(call: FlutterMethodCall, result: FlutterResult) {\n    // 10.3 이상에서만 작동\n    if #available(iOS 10.3, *) {\n      guard UIApplication.shared.supportsAlternateIcons else {\n        result(false)\n        return\n      }\n      // 전달된 이름 복원\n      guard let args = call.arguments as? [String : Any] else {return}\n      let arguments: String = args[\"targetIcon\"] as! String\n\n      var iconName: String?\n\n      // 현재 아이콘의 이름 확인\n      if let currentIconName = UIApplication.shared.alternateIconName {\n        iconName = currentIconName\n      } else {\n        iconName = \"Normal\"\n      }\n      // 두 번 변경하지 않도록하는 조건 설정\n      if iconName == arguments {\n        result(false)\n        return\n      }\n      // 새 아이콘 적용\n      UIApplication.shared.setAlternateIconName(arguments)\n      result(true)\n\n    } else {\n      result(false)\n    }\n  }\n\n  private func getIcon(call: FlutterMethodCall, result: FlutterResult) {\n    result(UIApplication.shared.alternateIconName)\n  }\n}\n```\n\n작동 방식을 확인해 봅시다. 앱 아이콘을 \"Default\"로 변경해 보겠습니다:\n\n<img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_5.png\" />\n\n<div class=\"content-ad\"></div>\n\n![이미지](https://miro.medium.com/v2/resize:fit:1400/1*siJRg9-s1ba9LwJfuvvscQ.gif)\n\n여기에서 소스 코드를 찾을 수 있습니다.\n\n이 글이 도움이 되었기를 바랍니다. 읽어 주셔서 감사합니다!\n","ogImage":{"url":"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_0.png"},"coverImage":"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_0.png","tag":["Tech"],"readingTime":22},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>안녕하세요! 이번 기사에서는 앱 아이콘을 동적으로 변경하는 방법을 구성하고 코딩하는 방법을 살펴보겠습니다. 안드로이드에서는 원하는 경우 라벨도 변경할 수 있습니다.</p>\n<p>우선, 새로운 Flutter 프로젝트를 만들어보세요. 저희 예시에서는 dynamic_icon_example이라는 프로젝트를 만들었습니다. 너무 많은 코딩 시간을 낭비하지 않도록 미리 만들어둔 예시 코드를 사용하겠습니다.</p>\n<p>시작해봅시다. 첫 번째로 이해해야 할 것은 MethodChannel입니다. 이 클래스를 사용하면 Flutter 애플리케이션 내에서 네이티브 코드를 작성할 수 있으며 (iOS의 경우 Swift, Android의 경우 Kotlin), 이 코드를 호출할 수 있습니다. 실용적인 예시를 살펴보겠습니다.</p>\n<p>앱 폴더 내에서 android → app → src → main → kotlin → MainActivity.kt 파일을 열어보세요. 다음과 같은 내용을 볼 수 있을 것입니다:</p>\n<div class=\"content-ad\"></div>\n<p><img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_0.png\" alt=\"Dynamic Change App Icon\"></p>\n<p>프로젝트를 생성할 때 생성된 이름이 첫 번째 줄입니다. 이제 Flutter 측에서 메소드를 호출하기 위한 코드를 작성해야 합니다. 여기에서 호출할 채널을 구성할 것인데, 그 채널의 이름은 \"com.example.dynamic_icon_example/icon\"으로 지정할 것입니다. 또한 몇 가지 import 문을 추가해야 합니다. 여기에 있습니다:</p>\n<pre><code class=\"hljs language-js\">package com.<span class=\"hljs-property\">example</span>.<span class=\"hljs-property\">com</span>.<span class=\"hljs-property\">example</span>.<span class=\"hljs-property\">dynamic_icon_example</span>\n\n<span class=\"hljs-keyword\">import</span> androidx.<span class=\"hljs-property\">annotation</span>.<span class=\"hljs-property\">NonNull</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">embedding</span>.<span class=\"hljs-property\">android</span>.<span class=\"hljs-property\">FlutterFragmentActivity</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">embedding</span>.<span class=\"hljs-property\">engine</span>.<span class=\"hljs-property\">FlutterEngine</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">plugin</span>.<span class=\"hljs-property\">common</span>.<span class=\"hljs-property\">MethodChannel</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">embedding</span>.<span class=\"hljs-property\">android</span>.<span class=\"hljs-property\">FlutterActivity</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">plugins</span>.<span class=\"hljs-property\">GeneratedPluginRegistrant</span>\n</code></pre>\n<p>이제 도움이 될 몇 가지 속성을 만들 수 있습니다. MainActivity 클래스 내부에 두 개의 변수를 추가할 수 있습니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">    private val <span class=\"hljs-variable constant_\">CHANNEL</span> = <span class=\"hljs-string\">\"app.com.get.number\"</span>\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-attr\">methodChannelResult</span>: <span class=\"hljs-title class_\">MethodChannel</span>.<span class=\"hljs-property\">Result</span>? = <span class=\"hljs-literal\">null</span>\n</code></pre>\n<p>CHANNEL 변수는 호출할 채널의 이름입니다; 원하는 이름을 넣을 수 있어요. 이후에 configureFlutterEngine을 오버라이드하고 우리의 메소드를 생성할 수 있어요.</p>\n<pre><code class=\"hljs language-js\">@<span class=\"hljs-title class_\">Override</span>\n    override fun <span class=\"hljs-title function_\">configureFlutterEngine</span>(<span class=\"hljs-params\">@NonNull flutterEngine: FlutterEngine</span>) {\n        <span class=\"hljs-title class_\">GeneratedPluginRegistrant</span>.<span class=\"hljs-title function_\">registerWith</span>(flutterEngine)\n        <span class=\"hljs-variable language_\">super</span>.<span class=\"hljs-title function_\">configureFlutterEngine</span>(flutterEngine)\n\n        <span class=\"hljs-title class_\">MethodChannel</span>(flutterEngine.<span class=\"hljs-property\">dartExecutor</span>, <span class=\"hljs-variable constant_\">CHANNEL</span>).<span class=\"hljs-property\">setMethodCallHandler</span> { call, result ->\n            <span class=\"hljs-keyword\">try</span> {\n                methodChannelResult = result\n                <span class=\"hljs-keyword\">if</span> (call.<span class=\"hljs-property\">method</span>.<span class=\"hljs-title function_\">equals</span>(<span class=\"hljs-string\">\"odd\"</span>)) {\n                    result.<span class=\"hljs-title function_\">success</span>(<span class=\"hljs-number\">1</span>)\n                } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (call.<span class=\"hljs-property\">method</span>.<span class=\"hljs-title function_\">equals</span>(<span class=\"hljs-string\">\"even\"</span>)) {\n                    result.<span class=\"hljs-title function_\">success</span>(<span class=\"hljs-number\">2</span>)\n                } <span class=\"hljs-keyword\">else</span> {\n                    result.<span class=\"hljs-title function_\">success</span>(-<span class=\"hljs-number\">1</span>)\n                }\n            } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-attr\">e</span>: <span class=\"hljs-title class_\">Exception</span>) {\n                <span class=\"hljs-title function_\">print</span>(e)\n            }\n        }\n    }\n</code></pre>\n<p>이렇게 하면 Flutter 측에서 우리의 메소드를 호출할 수 있어요. 마지막으로, 완전한 코드는 다음과 같아요:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-kotlin\"><span class=\"hljs-keyword\">package</span> com.example.dynamic_icon_example\n\n<span class=\"hljs-keyword\">import</span> androidx.<span class=\"hljs-keyword\">annotation</span>.NonNull\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.android.FlutterFragmentActivity\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.engine.FlutterEngine\n<span class=\"hljs-keyword\">import</span> io.flutter.plugin.common.MethodChannel\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.android.FlutterActivity\n<span class=\"hljs-keyword\">import</span> io.flutter.plugins.GeneratedPluginRegistrant\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span>: <span class=\"hljs-type\">FlutterActivity</span>() {\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> CHANNEL = <span class=\"hljs-string\">\"app.com.get.number\"</span>\n    <span class=\"hljs-keyword\">var</span> methodChannelResult: MethodChannel.Result? = <span class=\"hljs-literal\">null</span>\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">configureFlutterEngine</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@NonNull</span> flutterEngine: <span class=\"hljs-type\">FlutterEngine</span>)</span></span> {\n        GeneratedPluginRegistrant.registerWith(flutterEngine)\n        <span class=\"hljs-keyword\">super</span>.configureFlutterEngine(flutterEngine)\n\n        MethodChannel(flutterEngine.dartExecutor, CHANNEL).setMethodCallHandler { call, result ->\n            <span class=\"hljs-keyword\">try</span> {\n                methodChannelResult = result\n                <span class=\"hljs-keyword\">if</span> (call.method.equals(<span class=\"hljs-string\">\"odd\"</span>)) {\n                    result.success(<span class=\"hljs-number\">1</span>)\n                } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (call.method.equals(<span class=\"hljs-string\">\"even\"</span>)) {\n                    result.success(<span class=\"hljs-number\">2</span>)\n                } <span class=\"hljs-keyword\">else</span> {\n                    result.success(-<span class=\"hljs-number\">1</span>)\n                }\n            } <span class=\"hljs-keyword\">catch</span> (e: Exception) {\n                print(e)\n            }\n        }\n    }\n}\n</code></pre>\n<p>우리의 Android에서의 MethodChannel 설정이 완료되었습니다. 이제 iOS로 넘어갑시다. ios 폴더로 이동하여 <code>Runner</code> -> <code>AppDelegate.swift</code>로 이동해주세요.\n<img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_1.png\" alt=\"앱 아이콘을 동적으로 변경하는 플러터 앱의 스크린샷\"></p>\n<p>여기가 iOS 측의 코드입니다. 코드는 다음과 같이 보일 것입니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">UIKit</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Flutter</span>\n\n@<span class=\"hljs-title class_\">UIApplicationMain</span>\n@objc <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AppDelegate</span>: <span class=\"hljs-title class_\">FlutterAppDelegate</span> {\n  override func <span class=\"hljs-title function_\">application</span>(\n    _ <span class=\"hljs-attr\">application</span>: <span class=\"hljs-title class_\">UIApplication</span>,\n    didFinishLaunchingWithOptions <span class=\"hljs-attr\">launchOptions</span>: [<span class=\"hljs-title class_\">UIApplication</span>.<span class=\"hljs-property\">LaunchOptionsKey</span>: <span class=\"hljs-title class_\">Any</span>]?\n  ) -> <span class=\"hljs-title class_\">Bool</span> {\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-attr\">controller</span>: <span class=\"hljs-title class_\">FlutterViewController</span> = <span class=\"hljs-variable language_\">window</span>?.<span class=\"hljs-property\">rootViewController</span> <span class=\"hljs-keyword\">as</span>! <span class=\"hljs-title class_\">FlutterViewController</span>\n    <span class=\"hljs-keyword\">let</span> appIconChannel = <span class=\"hljs-title class_\">FlutterMethodChannel</span>(\n      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"com.example.dynamic_icon_example.get.number\"</span>, <span class=\"hljs-attr\">binaryMessenger</span>: controller.<span class=\"hljs-property\">binaryMessenger</span>)\n\n    appIconChannel.<span class=\"hljs-title function_\">setMethodCallHandler</span>({\n      [weak self] (<span class=\"hljs-attr\">call</span>: <span class=\"hljs-title class_\">FlutterMethodCall</span>, <span class=\"hljs-attr\">result</span>: <span class=\"hljs-title class_\">FlutterResult</span>) -> <span class=\"hljs-title class_\">Void</span> <span class=\"hljs-keyword\">in</span>\n      <span class=\"hljs-keyword\">if</span> call.<span class=\"hljs-property\">method</span> == <span class=\"hljs-string\">\"odd\"</span> {\n       <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-number\">1</span>)\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> call.<span class=\"hljs-property\">method</span> == <span class=\"hljs-string\">\"even\"</span> {\n        <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-number\">2</span>)\n      } <span class=\"hljs-keyword\">else</span> {\n       <span class=\"hljs-title function_\">result</span>(-<span class=\"hljs-number\">1</span>)\n        <span class=\"hljs-keyword\">return</span>\n      }\n    })\n\n    <span class=\"hljs-title class_\">GeneratedPluginRegistrant</span>.<span class=\"hljs-title function_\">register</span>(<span class=\"hljs-attr\">with</span>: self)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">super</span>.<span class=\"hljs-title function_\">application</span>(application, <span class=\"hljs-attr\">didFinishLaunchingWithOptions</span>: launchOptions)\n  }\n}\n</code></pre>\n<p>위 코드를 설명하자면, 이 함수는 화면에서 선택한 홀수나 짝수에 따라 홀수나 짝수를 반환합니다. 이제 main.dart 파일로 돌아가서 코드를 작성할 수 있습니다. 소스 코드에서 모든 주석을 제거하고 _incrementCounter라는 함수를 찾습니다. 이 함수를 비동기식으로 만듭니다. 상태(State) 내부에 채널을 호출할 변수를 만들 수 있습니다. 다음과 같이 채널을 호출하는 변수를 생성합니다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">_MyHomePageState</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">State</span>&#x3C;<span class=\"hljs-title class_\">MyHomePage</span>> {\n  int _counter = <span class=\"hljs-number\">0</span>;\n  final <span class=\"hljs-title class_\">MethodChannel</span> channel = <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">MethodChannel</span>(<span class=\"hljs-string\">'com.example.dynamic_icon_example.get.number'</span>);\n</code></pre>\n<p>그리고 _incrementCounter 함수 내부에서 메소드를 호출할 것입니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">  <span class=\"hljs-title class_\">Future</span>&#x3C;<span class=\"hljs-keyword\">void</span>> <span class=\"hljs-title function_\">_incrementCounter</span>() <span class=\"hljs-keyword\">async</span> {\n    final int number =\n        <span class=\"hljs-keyword\">await</span> channel.<span class=\"hljs-title function_\">invokeMethod</span>(_counter % <span class=\"hljs-number\">2</span> == <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">'even'</span> : <span class=\"hljs-string\">'odd'</span>);\n    <span class=\"hljs-title function_\">print</span>(number);\n    <span class=\"hljs-title function_\">setState</span>(() {\n      _counter++;\n    });\n  }\n</code></pre>\n<p>그리고 디버그 콘솔에서 값들을 확인할 수 있습니다:</p>\n<p><img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_2.png\" alt=\"이미지\"></p>\n<p>이제 앱 아이콘을 동적으로 변경하는 방법에 대해 이야기해보겠습니다. 먼저 Android 및 iOS 앱을 구성해야 합니다.</p>\n<div class=\"content-ad\"></div>\n<p>ANDROID</p>\n<p>안녕하세요! 안드로이드 개발자 여러분!</p>\n<p>android/app/src/main 폴더 안의 AndroidManifest.xml 파일을 열어주세요. <code>activity</code> 태그를 찾은 후, 그 안에 다음 코드를 추가해주세요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">android</span>: enabled = <span class=\"hljs-string\">\"false\"</span>;\n</code></pre>\n<p>이후, 각 아이콘 변형에 대해 activity-alias를 생성할 건데요. 각 activity-alias 코드는 다음과 같이 보일 거에요:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">&#x3C;activity-alias\n    <span class=\"hljs-attr\">android</span>:name=<span class=\"hljs-string\">\".launcherAlias.one\"</span>\n    <span class=\"hljs-attr\">android</span>:enabled=<span class=\"hljs-string\">\"false\"</span>\n    <span class=\"hljs-attr\">android</span>:icon=<span class=\"hljs-string\">\"@mipmap/icon_launch\"</span>\n    <span class=\"hljs-attr\">android</span>:label=<span class=\"hljs-string\">\"One\"</span>\n    <span class=\"hljs-attr\">android</span>:targetActivity=<span class=\"hljs-string\">\".MainActivity\"</span>\n    <span class=\"hljs-attr\">android</span>:exported=<span class=\"hljs-string\">\"true\"</span>>\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.MAIN\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.LAUNCHER\"</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span></span>\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.VIEW\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.DEFAULT\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.BROWSABLE\"</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span></span>\n&#x3C;/activity-alias>\n\n<span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">activity-alias</span>\n    <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".launcherAlias.two\"</span>\n    <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">\"false\"</span>\n    <span class=\"hljs-attr\">android:icon</span>=<span class=\"hljs-string\">\"@mipmap/icon_launch\"</span>\n    <span class=\"hljs-attr\">android:label</span>=<span class=\"hljs-string\">\"Two\"</span>\n    <span class=\"hljs-attr\">android:targetActivity</span>=<span class=\"hljs-string\">\".MainActivity\"</span>\n    <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"true\"</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.MAIN\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.LAUNCHER\"</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.VIEW\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.DEFAULT\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.BROWSABLE\"</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">activity-alias</span>></span></span>\n\n<span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">activity-alias</span>\n    <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".launcherAlias.default\"</span>\n    <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">\"true\"</span>\n    <span class=\"hljs-attr\">android:icon</span>=<span class=\"hljs-string\">\"@mipmap/icon_launch\"</span>\n    <span class=\"hljs-attr\">android:label</span>=<span class=\"hljs-string\">\"Dynamic\"</span>\n    <span class=\"hljs-attr\">android:targetActivity</span>=<span class=\"hljs-string\">\".MainActivity\"</span>\n    <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"true\"</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.MAIN\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.LAUNCHER\"</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.VIEW\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.DEFAULT\"</span> /></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.BROWSABLE\"</span> /></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">activity-alias</span>></span></span>\n</code></pre>\n<p>2개의 추가 구성을 만들어 Android 앱 아이콘 및 앱 레이블을 변경할 것입니다. 아이콘만 변경하려면 각 activity-alias 정의에서 android:label 줄을 삭제하면 됩니다. 이제 이미지를 생성해야 합니다. 이미지를 생성하려면 이 사이트를 사용할 수 있습니다: AppIcon. 이제 각 activity-alias의 android:icon 속성을 mipmap 폴더 내의 이미지 이름과 일치하도록 변경하십시오. AndroidManifest.xml은 다음과 같아야 합니다:</p>\n<pre><code class=\"hljs language-js\">&#x3C;manifest <span class=\"hljs-attr\">xmlns</span>:android=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span>>\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">application</span>\n        <span class=\"hljs-attr\">android:label</span>=<span class=\"hljs-string\">\"Dynamic\"</span>\n        <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"${applicationName}\"</span>\n        <span class=\"hljs-attr\">android:icon</span>=<span class=\"hljs-string\">\"@mipmap/ic_launcher\"</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">activity</span>\n            <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".MainActivity\"</span>\n            <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"true\"</span>\n            <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">\"false\"</span>\n            <span class=\"hljs-attr\">android:launchMode</span>=<span class=\"hljs-string\">\"singleTop\"</span>\n            <span class=\"hljs-attr\">android:theme</span>=<span class=\"hljs-string\">\"@style/LaunchTheme\"</span>\n            <span class=\"hljs-attr\">android:configChanges</span>=<span class=\"hljs-string\">\"orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode\"</span>\n            <span class=\"hljs-attr\">android:hardwareAccelerated</span>=<span class=\"hljs-string\">\"true\"</span>\n            <span class=\"hljs-attr\">android:windowSoftInputMode</span>=<span class=\"hljs-string\">\"adjustResize\"</span>></span>\n            <span class=\"hljs-comment\">&#x3C;!-- Specifies an Android theme to apply to this Activity as soon as\n                 the Android process has started. This theme is visible to the user\n                 while the Flutter UI initializes. After that, this theme continues\n                 to determine the Window background behind the Flutter UI. --></span>\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">meta-data</span>\n                <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"io.flutter.embedding.android.NormalTheme\"</span>\n                <span class=\"hljs-attr\">android:resource</span>=<span class=\"hljs-string\">\"@style/NormalTheme\"</span>\n            /></span>\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">intent-filter</span>></span>\n                <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.action.MAIN\"</span> /></span>\n                <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">category</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.intent.category.LAUNCHER\"</span> /></span>\n            <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">intent-filter</span>></span>\n        <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">activity</span>></span>\n        <span class=\"hljs-comment\">&#x3C;!-- Don't delete the meta-data below.\n             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java --></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">meta-data</span>\n            <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"flutterEmbedding\"</span>\n            <span class=\"hljs-attr\">android:value</span>=<span class=\"hljs-string\">\"2\"</span> /></span>\n\n        <span class=\"hljs-comment\">&#x3C;!-- 여기에 위의 activity-alias 코드를 붙여넣으세요 --></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">application</span>></span></span>\n&#x3C;/manifest>\n\n<span class=\"hljs-title class_\">MainActivity</span>.<span class=\"hljs-property\">kt</span> 파일이 있는 폴더로 이동하면, 각 alias에 대한 이름으로 파일을 생성해야 합니다. <span class=\"hljs-string\">\".launcherAlias.\"</span> 이후의 마지막 이름만 사용하면 됩니다. 제 경우에는 파일 이름이 <span class=\"hljs-title class_\">Default</span>.<span class=\"hljs-property\">kt</span>, <span class=\"hljs-title class_\">One</span>.<span class=\"hljs-property\">kt</span>, <span class=\"hljs-title class_\">Two</span>.<span class=\"hljs-property\">kt</span> 여야 합니다. 각 파일에 아래 코드를 복사하여 붙여넣고 이름만 변경하시면 됩니다.\n</code></pre>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-kotlin\"><span class=\"hljs-keyword\">package</span> com.example.dynamic_icon_example.launcherAlias\n\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.android.FlutterActivity\n<span class=\"hljs-comment\">// 각 alias의 이름을 변경합니다.</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Default</span>: <span class=\"hljs-type\">FlutterActivity</span>() {\n}\n</code></pre>\n<p>MainActivity에서는 앱의 아이콘과 라벨을 변경하는 코드를 만들 것입니다. CHANNEL의 이름을 변경하여 아이콘 변경을 나타내는 의미 있는 이름으로 바꿔주세요. 예를 들어, \"app.com.get.change.icon\"과 같은 이름을 사용했습니다.</p>\n<p>다음은 사용할 주석이 달린 코드입니다:</p>\n<pre><code class=\"hljs language-kotlin\"><span class=\"hljs-keyword\">package</span> com.example.dynamic_icon_example\n\n<span class=\"hljs-keyword\">import</span> android.content.ComponentName\n<span class=\"hljs-keyword\">import</span> android.content.pm.PackageManager\n<span class=\"hljs-keyword\">import</span> androidx.<span class=\"hljs-keyword\">annotation</span>.NonNull\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.android.FlutterFragmentActivity\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.engine.FlutterEngine\n<span class=\"hljs-keyword\">import</span> io.flutter.plugin.common.MethodChannel\n<span class=\"hljs-keyword\">import</span> io.flutter.embedding.android.FlutterActivity\n<span class=\"hljs-keyword\">import</span> io.flutter.plugins.GeneratedPluginRegistrant\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span>: <span class=\"hljs-type\">FlutterActivity</span>() {\n\n    <span class=\"hljs-comment\">// 채널의 이름</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> CHANNEL = <span class=\"hljs-string\">\"app.com.get.change.icon\"</span>\n    <span class=\"hljs-keyword\">var</span> methodChannelResult: MethodChannel.Result? = <span class=\"hljs-literal\">null</span>\n    <span class=\"hljs-comment\">// 초기 점을 제외한 모든 alias를 추가합니다.</span>\n    <span class=\"hljs-keyword\">val</span> aliases = listOf(<span class=\"hljs-string\">\"launcherAlias.Default\"</span>, <span class=\"hljs-string\">\"launcherAlias.One\"</span>, <span class=\"hljs-string\">\"launcherAlias.Two\"</span>)\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">configureFlutterEngine</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@NonNull</span> flutterEngine: <span class=\"hljs-type\">FlutterEngine</span>)</span></span> {\n        GeneratedPluginRegistrant.registerWith(flutterEngine)\n        <span class=\"hljs-keyword\">super</span>.configureFlutterEngine(flutterEngine)\n\n        MethodChannel(flutterEngine.dartExecutor, CHANNEL).setMethodCallHandler { call, result ->\n            <span class=\"hljs-keyword\">try</span> {\n                methodChannelResult = result\n                <span class=\"hljs-comment\">// 우리가 호출할 메소드</span>\n                <span class=\"hljs-keyword\">if</span> (call.method.equals(<span class=\"hljs-string\">\"changeIcon\"</span>)) {\n                    <span class=\"hljs-comment\">// 전달된 이름을 복구합니다</span>\n                    <span class=\"hljs-keyword\">val</span> targetIcon = call.argument&#x3C;String>(<span class=\"hljs-string\">\"targetIcon\"</span>) <span class=\"hljs-keyword\">as</span> String\n                    <span class=\"hljs-comment\">// 변경을 수행할 함수를 호출합니다.</span>\n                    <span class=\"hljs-comment\">// 여기서 이미 \"launcherAlias\"를 추가했습니다.</span>\n                    setIcon(<span class=\"hljs-string\">\"launcherAlias.<span class=\"hljs-variable\">$targetIcon</span>\"</span>)\n                } <span class=\"hljs-keyword\">else</span> {\n                    result.success(-<span class=\"hljs-number\">1</span>)\n                }\n            } <span class=\"hljs-keyword\">catch</span> (e: Exception) {\n                print(e)\n            }\n        }\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setIcon</span><span class=\"hljs-params\">(targetIcon: <span class=\"hljs-type\">String</span>)</span></span> {\n        <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-comment\">// 사용할 패키지 이름을 포함하는 String을 작성합니다.</span>\n            <span class=\"hljs-keyword\">val</span> packageManager: PackageManager = applicationContext!!.packageManager\n            <span class=\"hljs-keyword\">val</span> packageName = applicationContext!!.packageName\n            <span class=\"hljs-keyword\">val</span> className = StringBuilder()\n            className.append(packageName)\n            className.append(<span class=\"hljs-string\">\".\"</span>)\n            className.append(targetIcon)\n\n            aliases.forEach { alias ->\n                <span class=\"hljs-comment\">// 모든 목록을 실행하고 설정할 것 외에는 모두 비활성화합니다.</span>\n                <span class=\"hljs-keyword\">val</span> state =\n                    <span class=\"hljs-keyword\">if</span> (alias == targetIcon) PackageManager.COMPONENT_ENABLED_STATE_ENABLED\n                    <span class=\"hljs-keyword\">else</span> PackageManager.COMPONENT_ENABLED_STATE_DISABLED\n\n                <span class=\"hljs-comment\">// 새로운 아이콘과 라벨을 설정합니다.</span>\n                packageManager.setComponentEnabledSetting(\n                    ComponentName(packageName, <span class=\"hljs-string\">\"com.example.dynamic_icon_example.<span class=\"hljs-variable\">$alias</span>\"</span>),\n                    state,\n                    PackageManager.DONT_KILL_APP\n                )\n            }\n        } <span class=\"hljs-keyword\">catch</span> (e: Exception) {\n            print(e)\n        }\n    }\n}\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>플러터 쪽에서 main.dart의 _incrementCounter 함수 내부에서:</p>\n<pre><code class=\"hljs language-js\">  <span class=\"hljs-title class_\">Future</span>&#x3C;<span class=\"hljs-keyword\">void</span>> <span class=\"hljs-title function_\">_incrementCounter</span>() <span class=\"hljs-keyword\">async</span> {\n<span class=\"hljs-comment\">// 네이티브 메서드를 호출하여 아이콘을 변경할 예정</span>\n<span class=\"hljs-comment\">// 아이콘의 최종 이름만 전달하면 \"launcherAlias\"는 kotlin 쪽에서 설정됨</span>\n    final dynamic number =\n        <span class=\"hljs-keyword\">await</span> channel.<span class=\"hljs-title function_\">invokeMethod</span>(<span class=\"hljs-string\">'changeIcon'</span>, &#x3C;<span class=\"hljs-title class_\">String</span>, dynamic>{<span class=\"hljs-string\">'targetIcon'</span>: <span class=\"hljs-string\">'One'</span>});\n    <span class=\"hljs-title function_\">print</span>(number);\n    <span class=\"hljs-title function_\">setState</span>(() {\n      _counter++;\n    });\n  }\n</code></pre>\n<p>이제 테스트할 수 있습니다.</p>\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*eICX4eVobzz-tyLme9W4Hg.gif\">\n<div class=\"content-ad\"></div>\n<p>본글에 나온 코드는 앱이 아이콘을 변경할 때 종료되는 문제를 해결하는 코드입니다. MainActivity 폴더로 돌아가 \"SharedPref.kt\"라는 다른 파일을 만들어 아래 코드를 붙여넣으세요:</p>\n<pre><code class=\"hljs language-js\">package com.<span class=\"hljs-property\">example</span>.<span class=\"hljs-property\">dynamic_icon_example</span>.<span class=\"hljs-property\">helper</span>\n\n<span class=\"hljs-keyword\">import</span> android.<span class=\"hljs-property\">content</span>.<span class=\"hljs-property\">Context</span>\n<span class=\"hljs-keyword\">import</span> android.<span class=\"hljs-property\">content</span>.<span class=\"hljs-property\">Context</span>.<span class=\"hljs-property\">MODE_PRIVATE</span>\n<span class=\"hljs-keyword\">import</span> android.<span class=\"hljs-property\">content</span>.<span class=\"hljs-property\">SharedPreferences</span>\n\nopen <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AppSharedPref</span> {\n\n    companion object {\n        <span class=\"hljs-keyword\">const</span> val <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span> = <span class=\"hljs-string\">\"configurationPreference\"</span>\n\n        <span class=\"hljs-comment\">/*런처 아이콘*/</span>\n        private <span class=\"hljs-keyword\">const</span> val <span class=\"hljs-variable constant_\">KEY_LAUNCHER_IMAGE</span> = <span class=\"hljs-string\">\"launcherIcon\"</span>\n        private <span class=\"hljs-keyword\">const</span> val <span class=\"hljs-variable constant_\">KEY_LAUNCHER_COUNT</span> = <span class=\"hljs-string\">\"count\"</span>\n        private <span class=\"hljs-keyword\">const</span> val <span class=\"hljs-variable constant_\">KEY_LAUNCHER_SAVED_COUNT</span> = <span class=\"hljs-string\">\"savedCount\"</span>\n\n        fun <span class=\"hljs-title function_\">getSharedPreference</span>(<span class=\"hljs-attr\">context</span>: <span class=\"hljs-title class_\">Context</span>, <span class=\"hljs-attr\">preferenceFile</span>: <span class=\"hljs-title class_\">String</span>): <span class=\"hljs-title class_\">SharedPreferences</span> {\n            <span class=\"hljs-keyword\">return</span> context.<span class=\"hljs-title function_\">getSharedPreferences</span>(preferenceFile, <span class=\"hljs-variable constant_\">MODE_PRIVATE</span>)\n        }\n\n        fun <span class=\"hljs-title function_\">getSharedPreferenceEditor</span>(\n            <span class=\"hljs-attr\">context</span>: <span class=\"hljs-title class_\">Context</span>,\n            <span class=\"hljs-attr\">preferenceFile</span>: <span class=\"hljs-title class_\">String</span>\n        ): <span class=\"hljs-title class_\">SharedPreferences</span>.<span class=\"hljs-property\">Editor</span> {\n            <span class=\"hljs-keyword\">return</span> context.<span class=\"hljs-title function_\">getSharedPreferences</span>(preferenceFile, <span class=\"hljs-variable constant_\">MODE_PRIVATE</span>).<span class=\"hljs-title function_\">edit</span>()\n        }\n\n        <span class=\"hljs-comment\">/* 설정 관련 함수 */</span>\n\n        fun <span class=\"hljs-title function_\">getLauncherIcon</span>(<span class=\"hljs-attr\">context</span>: <span class=\"hljs-title class_\">Context</span>): <span class=\"hljs-title class_\">String</span>? {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">getSharedPreference</span>(context, <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span>)\n                .<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-variable constant_\">KEY_LAUNCHER_IMAGE</span>, <span class=\"hljs-string\">\"launcherAlias.DefaultLauncherAlias\"</span>)\n        }\n\n        fun <span class=\"hljs-title function_\">setLauncherIcon</span>(<span class=\"hljs-params\">context: Context, launcherIcon: <span class=\"hljs-built_in\">String</span></span>) {\n            <span class=\"hljs-title function_\">getSharedPreferenceEditor</span>(context, <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span>)\n                .<span class=\"hljs-title function_\">putString</span>(<span class=\"hljs-variable constant_\">KEY_LAUNCHER_IMAGE</span>, launcherIcon)\n                .<span class=\"hljs-title function_\">apply</span>()\n        }\n\n        fun <span class=\"hljs-title function_\">getCount</span>(<span class=\"hljs-attr\">context</span>: <span class=\"hljs-title class_\">Context</span>): <span class=\"hljs-title class_\">Int</span> {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">getSharedPreference</span>(context, <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span>).<span class=\"hljs-title function_\">getInt</span>(<span class=\"hljs-variable constant_\">KEY_LAUNCHER_COUNT</span>, <span class=\"hljs-number\">0</span>)\n        }\n\n        fun <span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-params\">context: Context, count: Int</span>) {\n            <span class=\"hljs-title function_\">getSharedPreferenceEditor</span>(context, <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span>)\n                .<span class=\"hljs-title function_\">putInt</span>(<span class=\"hljs-variable constant_\">KEY_LAUNCHER_COUNT</span>, count)\n                .<span class=\"hljs-title function_\">apply</span>()\n        }\n\n        fun <span class=\"hljs-title function_\">getSavedCount</span>(<span class=\"hljs-attr\">context</span>: <span class=\"hljs-title class_\">Context</span>): <span class=\"hljs-title class_\">Int</span> {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">getSharedPreference</span>(context, <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span>)\n                .<span class=\"hljs-title function_\">getInt</span>(<span class=\"hljs-variable constant_\">KEY_LAUNCHER_SAVED_COUNT</span>, <span class=\"hljs-number\">0</span>)\n        }\n\n        fun <span class=\"hljs-title function_\">setSavedCount</span>(<span class=\"hljs-params\">context: Context, count: Int</span>) {\n            <span class=\"hljs-title function_\">getSharedPreferenceEditor</span>(context, <span class=\"hljs-variable constant_\">CONFIGURATION_PREF</span>)\n                .<span class=\"hljs-title function_\">putInt</span>(<span class=\"hljs-variable constant_\">KEY_LAUNCHER_SAVED_COUNT</span>, count)\n                .<span class=\"hljs-title function_\">apply</span>()\n        }\n    }\n}\n</code></pre>\n<p>이 코드는 공유 설정을 사용하여 메모리에 아이콘 변경 정보를 저장합니다. 이제 MainActivity로 돌아가 일부 변경사항을 가해봅시다.</p>\n<pre><code class=\"hljs language-js\">package com.<span class=\"hljs-property\">example</span>.<span class=\"hljs-property\">dynamic_icon_example</span>\n\n<span class=\"hljs-keyword\">import</span> android.<span class=\"hljs-property\">content</span>.<span class=\"hljs-property\">ComponentName</span>\n<span class=\"hljs-keyword\">import</span> android.<span class=\"hljs-property\">content</span>.<span class=\"hljs-property\">pm</span>.<span class=\"hljs-property\">PackageManager</span>\n<span class=\"hljs-keyword\">import</span> androidx.<span class=\"hljs-property\">annotation</span>.<span class=\"hljs-property\">NonNull</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">embedding</span>.<span class=\"hljs-property\">android</span>.<span class=\"hljs-property\">FlutterFragmentActivity</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">embedding</span>.<span class=\"hljs-property\">engine</span>.<span class=\"hljs-property\">FlutterEngine</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">plugin</span>.<span class=\"hljs-property\">common</span>.<span class=\"hljs-property\">MethodChannel</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">embedding</span>.<span class=\"hljs-property\">android</span>.<span class=\"hljs-property\">FlutterActivity</span>\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">flutter</span>.<span class=\"hljs-property\">plugins</span>.<span class=\"hljs-property\">GeneratedPluginRegistrant</span>\n<span class=\"hljs-keyword\">import</span> com.<span class=\"hljs-property\">example</span>.<span class=\"hljs-property\">dynamic_icon_example</span>.<span class=\"hljs-property\">helper</span>.<span class=\"hljs-property\">AppSharedPref</span>\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span>: <span class=\"hljs-title class_\">FlutterActivity</span>() {\n\n    private val <span class=\"hljs-variable constant_\">CHANNEL</span> = <span class=\"hljs-string\">\"app.com.get.change.icon\"</span>\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-attr\">methodChannelResult</span>: <span class=\"hljs-title class_\">MethodChannel</span>.<span class=\"hljs-property\">Result</span>? = <span class=\"hljs-literal\">null</span>\n    <span class=\"hljs-comment\">// initial dot을 뺀 모든 별칭을 추가하세요</span>\n    val aliases = <span class=\"hljs-title function_\">listOf</span>(<span class=\"hljs-string\">\"launcherAlias.Default\"</span>, <span class=\"hljs-string\">\"launcherAlias.One\"</span>, <span class=\"hljs-string\">\"launcherAlias.Two\"</span>)\n\n    @<span class=\"hljs-title class_\">Override</span>\n    override fun <span class=\"hljs-title function_\">configureFlutterEngine</span>(<span class=\"hljs-params\">@NonNull flutterEngine: FlutterEngine</span>) {\n        <span class=\"hljs-title class_\">GeneratedPluginRegistrant</span>.<span class=\"hljs-title function_\">registerWith</span>(flutterEngine)\n        <span class=\"hljs-variable language_\">super</span>.<span class=\"hljs-title function_\">configureFlutterEngine</span>(flutterEngine)\n\n        <span class=\"hljs-title class_\">MethodChannel</span>(flutterEngine.<span class=\"hljs-property\">dartExecutor</span>, <span class=\"hljs-variable constant_\">CHANNEL</span>).<span class=\"hljs-property\">setMethodCallHandler</span> { call, result ->\n            <span class=\"hljs-keyword\">try</span> {\n                methodChannelResult = result\n                <span class=\"hljs-keyword\">if</span> (call.<span class=\"hljs-property\">method</span>.<span class=\"hljs-title function_\">equals</span>(<span class=\"hljs-string\">\"changeIcon\"</span>)) {\n                    val targetIcon = call.<span class=\"hljs-property\">argument</span>&#x3C;<span class=\"hljs-title class_\">String</span>>(<span class=\"hljs-string\">\"targetIcon\"</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">String</span>\n                    <span class=\"hljs-comment\">// 여기에서 정보를 저장하여 앱을 닫은 후 적용할 것입니다</span>\n                    <span class=\"hljs-title class_\">AppSharedPref</span>.<span class=\"hljs-title function_\">setLauncherIcon</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-string\">\"launcherAlias.$targetIcon\"</span>)\n                    <span class=\"hljs-title class_\">AppSharedPref</span>.<span class=\"hljs-title function_\">setCount</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-number\">0</span>)\n                } <span class=\"hljs-keyword\">else</span> {\n                    result.<span class=\"hljs-title function_\">success</span>(-<span class=\"hljs-number\">1</span>)\n                }\n            } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-attr\">e</span>: <span class=\"hljs-title class_\">Exception</span>) {\n                <span class=\"hljs-title function_\">print</span>(e)\n            }\n        }\n    }\n\n    <span class=\"hljs-comment\">// 우리 앱이 종료될 때 아이콘 및 레이블 변경을 호출할 메소드입니다</span>\n    override fun <span class=\"hljs-title function_\">onDestroy</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-title function_\">setIcon</span>(<span class=\"hljs-title class_\">AppSharedPref</span>.<span class=\"hljs-title function_\">getLauncherIcon</span>(<span class=\"hljs-variable language_\">this</span>).<span class=\"hljs-title function_\">toString</span>())\n        <span class=\"hljs-variable language_\">super</span>.<span class=\"hljs-title function_\">onDestroy</span>()\n    }\n\n    private fun <span class=\"hljs-title function_\">setIcon</span>(<span class=\"hljs-params\">targetIcon: <span class=\"hljs-built_in\">String</span></span>) {\n        <span class=\"hljs-keyword\">try</span> {\n            val <span class=\"hljs-attr\">packageManager</span>: <span class=\"hljs-title class_\">PackageManager</span> = applicationContext!!.<span class=\"hljs-property\">packageManager</span>\n            val packageName = applicationContext!!.<span class=\"hljs-property\">packageName</span>\n            val className = <span class=\"hljs-title class_\">StringBuilder</span>()\n            className.<span class=\"hljs-title function_\">append</span>(packageName)\n            className.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">\".\"</span>)\n            className.<span class=\"hljs-title function_\">append</span>(targetIcon)\n\n            aliases.<span class=\"hljs-property\">forEach</span> { alias ->\n                val state =\n                    <span class=\"hljs-keyword\">if</span> (alias == targetIcon) <span class=\"hljs-title class_\">PackageManager</span>.<span class=\"hljs-property\">COMPONENT_ENABLED_STATE_ENABLED</span>\n                    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-title class_\">PackageManager</span>.<span class=\"hljs-property\">COMPONENT_ENABLED_STATE_DISABLED</span>\n\n                packageManager.<span class=\"hljs-title function_\">setComponentEnabledSetting</span>(\n                    <span class=\"hljs-title class_\">ComponentName</span>(packageName, <span class=\"hljs-string\">\"com.example.dynamic_icon_example.$alias\"</span>),\n                    state,\n                    <span class=\"hljs-title class_\">PackageManager</span>.<span class=\"hljs-property\">DONT_KILL_APP</span>\n                )\n            }\n        } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-attr\">e</span>: <span class=\"hljs-title class_\">Exception</span>) {\n            <span class=\"hljs-title function_\">print</span>(e)\n        }\n    }\n}\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>결과를 확인해봅시다:</p>\n<img src=\"https://miro.medium.com/v2/resize:fit:1400/1*yIABZsLhcIv84MjkGh1cWA.gif\">\n<p>IOS</p>\n<p>iOS로 이동하여 Xcode로 열어주세요. Runner 디렉토리 내에 AlternativeIcons라는 폴더를 생성해주세요. 여기에 이미지를 저장하겠습니다.</p>\n<div class=\"content-ad\"></div>\n<p><img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_3.png\" alt=\"이미지_이름\"></p>\n<p>이제 Xcode의 Info.plist로 이동하여 \"Icon files (iOS 5)\"라는 매개변수를 Dictionary으로 추가하십시오. 이 매개변수 내에서 \"CFBundleAlternateIcons\"를 Dictionary로 추가하십시오. 그런 다음 사용하려는 각 새 이미지에 대해(예: \"Default\", \"One\", \"Two\") 새 항목을 만드십시오. 각 항목 내에서 \"CFBundleIconFiles\" 매개변수를 Array로 추가하십시오. 배열의 첫 번째 위치에는 이미지 이름을 @2x 또는 @3x 없이, .png 없이 사용하십시오.</p>\n<p>최종적으로 아래와 같이 보여야 합니다:</p>\n<p><img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_4.png\" alt=\"이미지_이름\"></p>\n<div class=\"content-ad\"></div>\n<p>AppDelegate.swift 파일에 함수를 만들어 봅시다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">UIKit</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Flutter</span>\n\n@<span class=\"hljs-title class_\">UIApplicationMain</span>\n@objc <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AppDelegate</span>: <span class=\"hljs-title class_\">FlutterAppDelegate</span> {\n  override func <span class=\"hljs-title function_\">application</span>(\n    _ <span class=\"hljs-attr\">application</span>: <span class=\"hljs-title class_\">UIApplication</span>,\n    didFinishLaunchingWithOptions <span class=\"hljs-attr\">launchOptions</span>: [<span class=\"hljs-title class_\">UIApplication</span>.<span class=\"hljs-property\">LaunchOptionsKey</span>: <span class=\"hljs-title class_\">Any</span>]?\n  ) -> <span class=\"hljs-title class_\">Bool</span> {\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-attr\">controller</span>: <span class=\"hljs-title class_\">FlutterViewController</span> = <span class=\"hljs-variable language_\">window</span>?.<span class=\"hljs-property\">rootViewController</span> <span class=\"hljs-keyword\">as</span>! <span class=\"hljs-title class_\">FlutterViewController</span>\n    <span class=\"hljs-comment\">//우리 채널 이름이 업데이트됐어요</span>\n    <span class=\"hljs-keyword\">let</span> appIconChannel = <span class=\"hljs-title class_\">FlutterMethodChannel</span>(\n      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"app.com.get.change.icon\"</span>, <span class=\"hljs-attr\">binaryMessenger</span>: controller.<span class=\"hljs-property\">binaryMessenger</span>)\n\n    appIconChannel.<span class=\"hljs-title function_\">setMethodCallHandler</span>({\n      [weak self] (<span class=\"hljs-attr\">call</span>: <span class=\"hljs-title class_\">FlutterMethodCall</span>, <span class=\"hljs-attr\">result</span>: <span class=\"hljs-title class_\">FlutterResult</span>) -> <span class=\"hljs-title class_\">Void</span> <span class=\"hljs-keyword\">in</span>\n      <span class=\"hljs-keyword\">if</span> call.<span class=\"hljs-property\">method</span> == <span class=\"hljs-string\">\"changeIcon\"</span> {\n        <span class=\"hljs-comment\">// 변경을 수행하는 함수</span>\n       self?.<span class=\"hljs-title function_\">changeAppIcon</span>(<span class=\"hljs-attr\">call</span>: call, <span class=\"hljs-attr\">result</span>: result)\n      } <span class=\"hljs-keyword\">else</span> {\n       <span class=\"hljs-title function_\">result</span>(-<span class=\"hljs-number\">1</span>)\n        <span class=\"hljs-keyword\">return</span>\n      }\n    })\n\n    <span class=\"hljs-title class_\">GeneratedPluginRegistrant</span>.<span class=\"hljs-title function_\">register</span>(<span class=\"hljs-attr\">with</span>: self)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">super</span>.<span class=\"hljs-title function_\">application</span>(application, <span class=\"hljs-attr\">didFinishLaunchingWithOptions</span>: launchOptions)\n  }\n\n  private func <span class=\"hljs-title function_\">changeAppIcon</span>(<span class=\"hljs-params\">call: FlutterMethodCall, result: FlutterResult</span>) {\n    <span class=\"hljs-comment\">// 10.3 이상에서만 작동</span>\n    <span class=\"hljs-keyword\">if</span> #<span class=\"hljs-title function_\">available</span>(<span class=\"hljs-params\">iOS <span class=\"hljs-number\">10.3</span>, *</span>) {\n      guard <span class=\"hljs-title class_\">UIApplication</span>.<span class=\"hljs-property\">shared</span>.<span class=\"hljs-property\">supportsAlternateIcons</span> <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-literal\">false</span>)\n        <span class=\"hljs-keyword\">return</span>\n      }\n      <span class=\"hljs-comment\">// 전달된 이름 복원</span>\n      guard <span class=\"hljs-keyword\">let</span> args = call.<span class=\"hljs-property\">arguments</span> <span class=\"hljs-keyword\">as</span>? [<span class=\"hljs-title class_\">String</span> : <span class=\"hljs-title class_\">Any</span>] <span class=\"hljs-keyword\">else</span> {<span class=\"hljs-keyword\">return</span>}\n      <span class=\"hljs-keyword\">let</span> <span class=\"hljs-attr\">arguments</span>: <span class=\"hljs-title class_\">String</span> = args[<span class=\"hljs-string\">\"targetIcon\"</span>] <span class=\"hljs-keyword\">as</span>! <span class=\"hljs-title class_\">String</span>\n\n      <span class=\"hljs-keyword\">var</span> <span class=\"hljs-attr\">iconName</span>: <span class=\"hljs-title class_\">String</span>?\n\n      <span class=\"hljs-comment\">// 현재 아이콘의 이름 확인</span>\n      <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> currentIconName = <span class=\"hljs-title class_\">UIApplication</span>.<span class=\"hljs-property\">shared</span>.<span class=\"hljs-property\">alternateIconName</span> {\n        iconName = currentIconName\n      } <span class=\"hljs-keyword\">else</span> {\n        iconName = <span class=\"hljs-string\">\"Normal\"</span>\n      }\n      <span class=\"hljs-comment\">// 두 번 변경하지 않도록하는 조건 설정</span>\n      <span class=\"hljs-keyword\">if</span> iconName == <span class=\"hljs-variable language_\">arguments</span> {\n        <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-literal\">false</span>)\n        <span class=\"hljs-keyword\">return</span>\n      }\n      <span class=\"hljs-comment\">// 새 아이콘 적용</span>\n      <span class=\"hljs-title class_\">UIApplication</span>.<span class=\"hljs-property\">shared</span>.<span class=\"hljs-title function_\">setAlternateIconName</span>(<span class=\"hljs-variable language_\">arguments</span>)\n      <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-literal\">true</span>)\n\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-literal\">false</span>)\n    }\n  }\n\n  private func <span class=\"hljs-title function_\">getIcon</span>(<span class=\"hljs-params\">call: FlutterMethodCall, result: FlutterResult</span>) {\n    <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-title class_\">UIApplication</span>.<span class=\"hljs-property\">shared</span>.<span class=\"hljs-property\">alternateIconName</span>)\n  }\n}\n</code></pre>\n<p>작동 방식을 확인해 봅시다. 앱 아이콘을 \"Default\"로 변경해 보겠습니다:</p>\n<img src=\"/assets/img/2024-06-23-DynamicchangeAppIconFlutter_5.png\">\n<div class=\"content-ad\"></div>\n<p><img src=\"https://miro.medium.com/v2/resize:fit:1400/1*siJRg9-s1ba9LwJfuvvscQ.gif\" alt=\"이미지\"></p>\n<p>여기에서 소스 코드를 찾을 수 있습니다.</p>\n<p>이 글이 도움이 되었기를 바랍니다. 읽어 주셔서 감사합니다!</p>\n</body>\n</html>\n"},"__N_SSG":true}